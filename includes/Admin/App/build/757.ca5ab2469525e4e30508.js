"use strict";(self.webpackChunk_burst_statistics_burst_statistics=self.webpackChunk_burst_statistics_burst_statistics||[]).push([[757],{84696(e,t,r){r.d(t,{M:()=>o});var n=r(10790),s=r(51609),i=r(2573),a=r(85944),o=function(e){var t=e.children,r=e.className,o=(0,s.useRef)(null),l=(0,s.useState)(!1),c=l[0],u=l[1];(0,s.useEffect)(function(){var e=o.current;if(e){var t=function(){u(e.scrollWidth>e.clientWidth)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}},[t]);var d=(0,i.A)("truncate w-full text-base",r),f=(0,n.jsx)("div",{ref:o,className:d,children:t});return c?(0,n.jsx)(a.A,{content:t,children:f}):f}},65087(e,t,r){r.d(t,{A:()=>s});var n=r(10790);const s=function(e){var t=e.children,r=e.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:"absolute inset-0 flex items-end justify-center bg-black/10 z-50 py-4 px-4 ".concat(s),children:(0,n.jsx)("div",{className:"bg-white rounded-lg px-5 py-3  w-[90%] max-w-md relative shadow-md",children:t})})}},91995(e,t,r){r.d(t,{av:()=>u,j7:()=>a,Xi:()=>l});var n=r(10790),s=r(2573),i=r(18118);function a(e){var t=e.className,r=e.tabConfig,a=e.tabGroup,o=(0,i.bx)(function(e){return e.getActiveTab}),c=0<r.length?r[0].id:void 0;return o(a,c),(0,n.jsx)("div",{className:(0,s.A)("grid grid-flow-col auto-cols-fr gap-0.5 border border-gray-300 rounded-md bg-gray-200 p-0.5 shadow-sm",t),children:r.map(function(e,t){var r=0===t?"blue":1===t?"green":void 0;return(0,n.jsx)(l,{group:a,activeStyle:r,id:e.id,children:e.title},e.id)})})}var o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)};function l(e){var t=e.group,r=e.id,a=e.className,l=e.activeStyle,c=e.children,u=e.onClick,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["group","id","className","activeStyle","children","onClick"]),f=(0,i.bx)(function(e){return e.getActiveTab(t)}),p=(0,i.bx)(function(e){return e.setActiveTab}),b=f===r,m="green"===l?"green":"blue";return(0,n.jsx)("button",o({className:(0,s.A)("text-base px-4 py-1 transition-colors rounded-sm bg-white focus:outline-none text-gray-600 hover:text-gray-900 font-medium border border-transparent",{blue:['data-[active="true"]:bg-blue-lighter','data-[active="true"]:border-blue-darker','data-[active="true"]:text-[#1E73BE]'],green:['data-[active="true"]:bg-brand-lightest','data-[active="true"]:border-brand','data-[active="true"]:text-brand']}[m],a),type:"button",role:"tab","aria-controls":r,"aria-selected":b||void 0,onClick:function(e){p(t,r),null==u||u(e)},"data-active":b||void 0},d,{children:c}))}var c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},c.apply(this,arguments)};function u(e){var t=e.className,r=void 0===t?"":t,a=e.group,o=e.id,l=e.children,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["className","group","id","children"]);return(0,(0,i.bx)().getActiveTab)(a)===o?(0,n.jsx)("div",c({className:(0,s.$)("",r)},u,{children:l})):null}},78802(e,t,r){r.d(t,{wk:()=>b,B:()=>u});var n=r(10790),s=r(2573),i=r(92745),a=r(82529),o=r(27723);const l=function(e){var t=e.filter,r=e.onRemove,l=e.onClick,c=e.className,u=void 0===c?"":c,d=e.showRemoveButton,f=void 0===d||d,p=e.disabled,b=void 0!==p&&p,m=e.smallLabels,h=void 0!==m&&m,g=(0,s.$)("inline-flex items-center gap-2 border shadow-sm rounded-md transition-all duration-200",{"px-2 py-1 text-xs":h,"px-3 py-2 text-sm":!h},{"bg-gray-100 border-gray-200 cursor-not-allowed opacity-60":b,"bg-white border-gray-300 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] cursor-pointer":!b},u),x=function(e){b||e.target.closest(".remove-button")||l&&l(t)};return t&&t.config?t.key?(0,n.jsxs)("div",{className:g,onClick:x,onKeyDown:function(e){b||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x(e))},role:"button",tabIndex:b?-1:0,"aria-label":(0,o.__)("Edit %s filter","burst-statistics").replace("%s",t.config.label),"aria-disabled":b,title:b?"":(0,o.__)("Click to edit filter","burst-statistics"),children:[(0,n.jsx)(i.A,{name:t.config.icon,size:h?14:16}),(0,n.jsx)("p",{className:(0,s.$)("font-medium",{"text-gray-800":b}),children:t.config.label}),(0,n.jsx)("span",{className:(0,s.$)("w-px",h?"h-3":"h-4",b?"bg-gray-300":"bg-gray-400")}),(0,n.jsx)("p",{className:(0,s.$)({"text-gray-800":b,"text-gray":!b}),children:(0,a.S)(t.displayValue)}),f&&r&&!b&&(0,n.jsx)("button",{onClick:function(e){b?e.stopPropagation():r&&r(t.key)},disabled:b,className:(0,s.$)("remove-button rounded-full transition-colors",h?"p-0.5":"p-1",{"cursor-not-allowed opacity-50":b,"hover:bg-gray-200":!b}),"aria-label":(0,o.__)("Remove filter","burst-statistics"),title:b?"":(0,o.__)("Remove filter","burst-statistics"),children:(0,n.jsx)(i.A,{name:"times",color:b?"var(--rsp-grey-300)":"var(--rsp-grey-500)",size:h?14:16})})]}):null:(localStorage.removeItem("burst-filters-storage"),null)};var c=r(63557);const u=function(e){var t=e.filters,r=void 0===t?[]:t,s=e.onRemove,i=e.onClick,a=e.className,o=void 0===a?"flex flex-wrap gap-2":a,u=e.showRemoveButton,d=void 0===u||u,f=e.emptyMessage,p=void 0===f?null:f,b=e.isReport,m=void 0!==b&&b,h=e.smallLabels,g=void 0!==h&&h,x=(0,c.A)(function(e){return e.userCanFilter});return Array.isArray(r)&&0!==r.length||p?0===r.length&&p?(0,n.jsx)("div",{className:"text-gray-500 text-sm",children:p}):(0,n.jsx)("div",{className:o,children:r.map(function(e){return(0,n.jsx)(l,{disabled:m||!x,filter:e,onRemove:s,onClick:i,showRemoveButton:d,smallLabels:g},e.key)})}):null};var d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},d.apply(this,arguments)},f=function(e){var t=e.onClick,r=e.icon,a=e.iconSize,o=void 0===a?16:a,l=e.label,c=e.variant,u=void 0===c?"default":c,f=e.size,p=void 0===f?"md":f,b=e.disabled,m=void 0!==b&&b,h=e.className,g=void 0===h?"":h,x=e.ariaLabel,v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["onClick","icon","iconSize","label","variant","size","disabled","className","ariaLabel"]),y=(0,s.$)("inline-flex items-center gap-2 rounded-md transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-transparent border border-transparent hover:bg-gray-50":"default"===u,"bg-white border border-gray-300 border-dashed shadow-sm hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]":"dashed"===u,"bg-gray-100 border border-gray-300 hover:bg-gray-200":"solid"===u},{"py-1 px-2 text-xs":"sm"===p,"py-2 px-3 text-sm":"md"===p,"py-3 px-4 text-base":"lg"===p},{"opacity-50 cursor-not-allowed focus:ring-0 focus:ring-offset-0":m},g),j=Object.fromEntries(Object.entries({"aria-label":x||l,"aria-disabled":!!m||void 0}).filter(function(e){return e[0],void 0!==e[1]}));return(0,n.jsxs)("button",d({type:v.type||"button",onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||!t||m||(e.preventDefault(),t(e)),v.onKeyDown&&v.onKeyDown(e)},className:y,disabled:m},j,v,{children:[r&&(0,n.jsx)(i.A,{name:r,size:o}),l&&(0,n.jsx)("span",{className:"font-medium text-base",children:l})]}))};f.displayName="IconButton";const p=f,b=function(e){var t=e.onClick,r=e.className,s=void 0===r?"":r,i=e.icon,a=void 0===i?"plus":i,l=e.label,c=void 0===l?(0,o.__)("Add filter","burst-statistics"):l,u=e.smallLabels,d=void 0!==u&&u;return(0,n.jsx)(p,{variant:"dashed",icon:a,label:c,onClick:t,className:s,ariaLabel:c,size:d?"sm":"md"})}},95955(e,t,r){r.d(t,{y:()=>B});var n=r(10790),s=r(51609),i=r.n(s),a=r(84790),o=r(78802),l=r(27723),c=r(80076),u=r(2573),d=r(92745),f=r(717),p=r(3879),b=r(88511);const m=function(e){var t,r=e.filterKey,s=e.config,i=e.isActive,a=void 0!==i&&i,o=e.onClick,c=e.gridPosition,m=e.reportBlockIndex,h=(0,b.A)().isLicenseValid,g=(0,p.R7)(m),x=g.isFavorite,v=g.toggleFavorite,y=s.pro&&!h||s.coming_soon,j=x(r),w=function(e){e.stopPropagation(),e.preventDefault(),y||v(r)},_=function(){y||o()};return(0,n.jsxs)("div",{className:(0,u.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":a,"border-gray-300 shadow-sm hover:border-gray-400":!a&&!y,"bg-gray-100 border-gray-200":y,"bg-gray-300 opacity-90":s.coming_soon}),role:c?"gridcell":void 0,"aria-posinset":null==c?void 0:c.position,"aria-setsize":null==c?void 0:c.total,children:[(0,n.jsx)("button",{onClick:_,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),_())},disabled:y,"aria-label":(t="".concat(s.label," filter"),a&&(t+=", ".concat((0,l.__)("currently active","burst-statistics"))),s.pro&&(t+=", ".concat((0,l.__)("Pro feature","burst-statistics"))),s.coming_soon&&(t+=", ".concat((0,l.__)("coming soon","burst-statistics"))),y&&(t+=", ".concat((0,l.__)("disabled","burst-statistics"))),t),"aria-pressed":a,className:(0,u.A)("w-full h-full absolute inset-0 rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"cursor-not-allowed":y,"cursor-pointer hover:bg-black hover:bg-opacity-5":!y}),tabIndex:y?-1:0}),(0,n.jsx)("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200",children:(0,n.jsx)("button",{onClick:w,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),w(e))},disabled:y,className:(0,u.A)("p-1 rounded-full transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1","hover:bg-gray-200 active:bg-gray-300",{"text-yellow-500":j,"text-gray-400 hover:text-gray-600":!j,"cursor-not-allowed opacity-50":y}),"aria-label":j?(0,l.__)("Remove %s from favorites","burst-statistics").replace("%s",s.label):(0,l.__)("Add %s to favorites","burst-statistics").replace("%s",s.label),"aria-pressed":j,tabIndex:y?-1:0,children:(0,n.jsx)(d.A,{name:j?"star-filled":"star-outline",size:16,color:j?"yellow":"gray","aria-hidden":"true"})})}),a&&(0,n.jsx)("div",{className:"absolute top-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3 relative z-10 pointer-events-none",children:[(0,n.jsx)("div",{className:(0,u.A)("flex h-12 w-12 items-center justify-center rounded-lg",{"bg-gray-100":!a,"bg-primary-light":a}),"aria-hidden":"true",children:(0,n.jsx)(d.A,{name:s.icon,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:s.label}),s.pro&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(f.A,{label:(0,l.__)("Pro","burst-statistics")})}),s.coming_soon&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("span",{className:"inline-flex items-center rounded bg-blue-light px-2 py-0.5 text-xs font-medium text-gray",children:(0,l.__)("Coming soon","burst-statistics")})})]})]})]})};var h=r(67691),g=function(){return g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},g.apply(this,arguments)};const x=function(e){var t=e.onSelectFilter,r=e.reportBlockIndex,i=(0,p.R7)(r),a=i.filtersConf,o=i.filterCategories,c=i.getActiveFilters,f=i.getFiltersByCategory,b=i.getFavoriteFilters,x=(0,h.A)().getValue,v=(0,s.useState)("favorites"),y=v[0],j=v[1],w=(0,s.useState)(""),_=w[0],N=w[1],k=(0,s.useState)({}),O=k[0],S=k[1],A=(0,s.useRef)(null),C=c(),P=f(),R=b(),I=x("filtering_by_domain");(0,s.useEffect)(function(){if(I)S(a);else{var e=Object.fromEntries(Object.entries(a).filter(function(e){return"host"!==e[0]}));S(e)}},[a,I]),(0,s.useEffect)(function(){A.current&&A.current.focus()},[]);var E=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([{key:"favorites",label:(0,l.__)("Favorites","burst-statistics"),icon:"star-outline"},{key:"all",label:(0,l.__)("All","burst-statistics"),icon:"grid"}],Object.entries(o).sort(function(e,t){var r=e[1],n=t[1];return r.order-n.order}).map(function(e){var t=e[0],r=e[1];return{key:t,label:r.label,icon:r.icon}}),!0),z=function(e){if(!e.trim())return null;var t=e.toLowerCase(),r=Object.entries(O).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return g({key:t},r)}),n=function(e){return e.label.toLowerCase().includes(t)||e.key.toLowerCase().includes(t)},s=[];"favorites"===y?s=R:"all"===y?s=r:y in P&&(s=P[y]||[]);var i=s.filter(n);return 0<i.length?{results:i,source:y,isFromCurrentTab:!0}:{results:r.filter(n),source:"all",isFromCurrentTab:!1}}(_),F=function(e,s){return 0===e.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(d.A,{name:"empty",size:48,color:"gray"}),(0,n.jsx)("p",{className:"mt-2",children:_.trim()?(0,l.__)("No filters match your search.","burst-statistics"):"favorites"===y?(0,l.__)("No favorite filters yet. Pin filters to add them here.","burst-statistics"):"all"===y?(0,l.__)("No filters available.","burst-statistics"):(0,l.__)("No filters in this category.","burst-statistics")})]}):(0,n.jsxs)("div",{children:[s&&!s.isFromCurrentTab&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-blue-light border border-blue-200 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(d.A,{name:"help",size:16,color:"blue"}),(0,n.jsx)("span",{className:"text-sm text-blue-700",children:(0,l.__)("No results found in current tab. Showing results from all filters.","burst-statistics")})]})}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 justify-items-center",role:"grid","aria-label":(0,l.__)("Available filters","burst-statistics"),children:e.map(function(s,i){return(0,n.jsx)(m,{reportBlockIndex:r,filterKey:s.key,config:s,isActive:Object.prototype.hasOwnProperty.call(C,s.key),onClick:function(){return t(s.key,s)},gridPosition:{position:i+1,total:e.length}},s.key)})})]})};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"filter-search",className:"sr-only",children:(0,l.__)("Search filters","burst-statistics")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(d.A,{name:"search",size:16,className:"text-gray-400","aria-hidden":"true"})}),(0,n.jsx)("input",{id:"filter-search",type:"text",placeholder:(0,l.__)("Search filters…","burst-statistics"),value:_,onChange:function(e){return N(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm","aria-describedby":z?"search-results-info":void 0,ref:A}),_&&(0,n.jsx)("button",{onClick:function(){return N("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-900","aria-label":(0,l.__)("Clear search","burst-statistics"),type:"button",children:(0,n.jsx)(d.A,{name:"times",size:16,"aria-hidden":"true"})})]})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto scrollbar-hide",role:"tablist","aria-label":(0,l.__)("Filter categories","burst-statistics"),children:E.map(function(e){return(0,n.jsxs)("button",{id:"tab-".concat(e.key),onClick:function(){return j(e.key)},role:"tab","aria-selected":y===e.key,"aria-controls":"tabpanel-".concat(e.key),className:(0,u.A)("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap flex-shrink-0","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"border-primary text-primary":y===e.key,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":y!==e.key}),children:[(0,n.jsx)("span",{className:(0,u.A)("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-primary-light text-white shadow-sm border-primary border-0.5":y===e.key,"bg-transparent":y!==e.key}),"aria-hidden":"true",children:(0,n.jsx)(d.A,{name:e.icon,size:16})}),(0,n.jsx)("span",{children:e.label})]},e.key)})})})}),(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(y),"aria-labelledby":"tab-".concat(y),children:z?(0,n.jsxs)("div",{children:[0<z.results.length&&(0,n.jsx)("div",{id:"search-results-info",className:"sr-only",children:(0,l.__)("Showing %d search results","burst-statistics").replace("%d",z.results.length.toString())}),F(z.results,z)]}):"favorites"===y?F(R):"all"===y?F(Object.entries(O).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return g({key:t},r)})):y in P?F(P[y]||[]):null})]})};var v=r(17021),y=r(3316),j=r(51285),w=r(53576),_=r.n(w),N=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},k=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const O=function(e){var t=e.filterKey,r=e.config,i=e.initialValue,a=void 0===i?"":i,o=e.onChange,c=(0,s.useState)(a),u=c[0],d=c[1],f=(0,s.useRef)(null),p=(0,s.useRef)(null),b=(0,s.useState)([]),m=b[0],h=b[1],g=(0,s.useState)([]),x=g[0],w=g[1],O=(0,s.useState)(""),S=O[0],A=O[1],C=(0,s.useState)(!1),P=C[0],R=C[1],I=(0,j.A)().getFilterOptions;(0,s.useEffect)(function(){d(a)},[a]),(0,s.useEffect)(function(){N(void 0,void 0,void 0,function(){var e,t;return k(this,function(n){switch(n.label){case 0:return r.options?[4,I(r.options,"")]:[2];case 1:return e=n.sent(),t=Array.isArray(e)?e.map(function(e){return{value:e.id||e.title,label:e.title}}):[],h(t),w(t),R(1e3>t.length),[2]}})})},[r.options,I]);var E=(0,s.useMemo)(function(){return _()(function(e){return N(void 0,void 0,void 0,function(){var t,n;return k(this,function(s){switch(s.label){case 0:return r.options?[4,I(r.options,e)]:[2];case 1:return t=s.sent(),n=Array.isArray(t)?t.map(function(e){return{value:e.id||e.title,label:e.title}}):[],h(n),e||w(n),[2]}})})},300)},[r.options,I]);(0,s.useEffect)(function(){if(r.reloadOnSearch&&r.options&&!(3>S.length||P))return E(S),function(){E.cancel()}},[S,r.reloadOnSearch,P,E]),(0,s.useEffect)(function(){var e=setTimeout(function(){var e,t;r.options&&f.current?f.current.focus?f.current.focus():(null===(t=null===(e=f.current.select)||void 0===e?void 0:e.inputRef)||void 0===t?void 0:t.current)&&f.current.select.inputRef.current.focus():!r.options&&p.current&&p.current.focus()},100);return function(){return clearTimeout(e)}},[r.options]);var z=function(){if(r.options)return(0,l.__)("Search or select an option…","burst-statistics");switch(t){case"page_url":return(0,l.__)("Enter page URL (e.g., /about)","burst-statistics");case"referrer":return(0,l.__)("Enter referrer URL (e.g., google.com)","burst-statistics");case"campaign":return(0,l.__)("Enter campaign name","burst-statistics");case"source":return(0,l.__)("Enter traffic source","burst-statistics");case"medium":return(0,l.__)("Enter traffic medium","burst-statistics");case"term":return(0,l.__)("Enter search term","burst-statistics");case"content":return(0,l.__)("Enter content identifier","burst-statistics");case"parameter":return(0,l.__)("Enter URL parameter (e.g., utm_campaign)","burst-statistics");default:return(0,l.__)("Enter filter value…","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-2 relative",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,l.__)("Filter value","burst-statistics")}),r.options?(0,n.jsx)(v.A,{ref:f,value:u?m.find(function(e){return e.value===u})||{value:u,label:u}:null,onChange:function(e){var t=e?e.value:"";d(t),o(t)},loadOptions:function(e,t){return N(void 0,void 0,void 0,function(){var r,n;return k(this,function(s){return r=String(null!=e?e:"").toLowerCase(),A(r),m.length?0===r.length?(null==t||t(m),w(m),[2]):(n=m.filter(function(e){var t,n,s=String(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase(),i=String(null!==(n=e.value)&&void 0!==n?n:"").toLowerCase();return s.includes(r)||i.includes(r)}),null==t||t(n),w(n),[2]):(null==t||t([]),[2])})})},defaultOptions:x,placeholder:z(),isSearchable:!0,disabled:!1,insideModal:!0,allowCustomValue:0===x.length}):(0,n.jsx)(y.A,{ref:p,value:u,onChange:function(e){var t=e.target.value;d(t),o(t)},placeholder:z(),className:"w-full"})]})})};var S=r(75111);const A=function(e){var t=e.filterKey,r=e.initialValue,i=void 0===r?"":r,a=e.onChange,o=(0,s.useState)(i),c=o[0],u=o[1];(0,s.useEffect)(function(){u(i)},[i]);var d="bounces"===t?{"":{type:"",icon:"user",label:(0,l.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"bounce",label:(0,l.__)("Bounced visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,l.__)("Active visitors","burst-statistics")}}:"new_visitor"===t?{"":{type:"",icon:"user",label:(0,l.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"user-plus",label:(0,l.__)("New visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,l.__)("Returning visitors","burst-statistics")}}:"entry_exit_pages"===t?{"":{type:"",icon:"user",label:(0,l.__)("All pages","burst-statistics")},entry:{type:"entry",icon:"user-plus",label:(0,l.__)("Entry pages","burst-statistics")},exit:{type:"exit",icon:"user-check",label:(0,l.__)("Exit pages","burst-statistics")}}:{"":{type:"",icon:"user",label:(0,l.__)("All visitors (default)","burst-statistics"),description:(0,l.__)("Show all visitors without filtering","burst-statistics")},include:{type:"include",icon:"check",label:(0,l.__)("Include","burst-statistics"),description:(0,l.__)("Include visitors matching this criteria","burst-statistics")},exclude:{type:"exclude",icon:"times",label:(0,l.__)("Exclude","burst-statistics"),description:(0,l.__)("Exclude visitors matching this criteria","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,l.__)("Filter option","burst-statistics")}),(0,n.jsx)(S.A,{inputId:"".concat(t,"-boolean"),options:d,value:c,onChange:function(e){u(e),a(e)},columns:1})]})})};var C=r(90160),P=function(){return P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},P.apply(this,arguments)},R=(0,s.forwardRef)(function(e,t){var r=e.min,i=void 0===r?0:r,a=e.max,o=void 0===a?100:a,c=e.step,u=void 0===c?1:c,d=e.value,f=void 0===d?[i,o]:d,p=e.onChange,b=e.formatValue,m=void 0===b?function(e){return e.toString()}:b,h=e.className,g=void 0===h?"":h,x=e.disabled,v=void 0!==x&&x,y=e.label,j=e.showLabels,w=void 0===j||j,_=e.showCurrentValue,N=void 0===_||_,k=e.allowSingleValue,O=void 0!==k&&k,S=e.rangeSeparator,A=void 0===S?" - ":S,R=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["min","max","step","value","onChange","formatValue","className","disabled","label","showLabels","showCurrentValue","allowSingleValue","rangeSeparator"]),I=(0,s.useState)(f),E=I[0],z=I[1];return(0,s.useEffect)(function(){z(f)},[f]),(0,n.jsxs)("div",P({ref:t,className:"space-y-3 ".concat(g)},R,{children:[y&&(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:y}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(C.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:O&&E[0]===E[1]?[E[0]]:E,onValueChange:function(e){var t=O&&1===e.length?[e[0],e[0]]:[e[0],e[1]];z(t),null==p||p(t)},min:i,max:o,step:u,disabled:v,children:[(0,n.jsx)(C.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,n.jsx)(C.Q6,{className:"absolute bg-primary rounded-full h-full"})}),(0,n.jsx)(C.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,l.__)("Minimum value","burst-statistics")}),(!O||E[0]!==E[1])&&(0,n.jsx)(C.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,l.__)("Maximum value","burst-statistics")})]}),w&&(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,n.jsx)("span",{children:m(i)}),N&&(0,n.jsx)("span",{className:"font-medium text-primary",children:O&&E[0]===E[1]?m(E[0]):"".concat(m(E[0])).concat(A).concat(m(E[1]))}),(0,n.jsx)("span",{children:m(o)})]})]})]}))});R.displayName="RangeSliderInput";const I=R,E=function(e){var t=e.filterKey,r=e.initialValue,i=void 0===r?"":r,a=e.onChange,o=function(e){if(!e||""===e)return[0,100];if("string"==typeof e&&e.includes("-")){var t=e.split("-").map(function(e){return parseFloat(e.trim())});return[t[0]||0,t[1]||100]}return[0,parseFloat(e)||0]},c=(0,s.useState)(o(i)),u=c[0],d=c[1],f=(0,s.useState)(0),p=f[0],b=f[1],m=(0,s.useState)(100),h=m[0],g=m[1];(0,s.useEffect)(function(){d(o(i))},[i]),(0,s.useEffect)(function(){switch(t){case"bounce_rate":case"conversion_rate":default:b(0),g(100);break;case"time_per_session":b(0),g(3600)}},[t]);var x=function(e){d(e);var t=e[0]===e[1]?e[0].toString():"".concat(e[0],"-").concat(e[1]);a(t)};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(I,{min:p,max:h,value:u,onChange:x,formatValue:function(e){if(""===e||null==e)return"";var r="string"==typeof e?parseFloat(e):e;switch(t){case"bounce_rate":case"conversion_rate":return"".concat(r,"%");case"time_per_session":var n=Math.floor(r/60),s=r%60;return 0<n?"".concat(n,"m ").concat(s,"s"):"".concat(s,"s");default:return r.toString()}},label:(0,l.__)("Filter range","burst-statistics"),showLabels:!0,showCurrentValue:!0,rangeSeparator:" - "}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,l.__)("Exact range values","burst-statistics")}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(y.A,{type:"number",value:u[0],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=p&&r<=h){var n=[r||0,u[1]];d(n),x(n)}},placeholder:(0,l.__)("Min value…","burst-statistics"),min:p,max:h,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,l.__)("Minimum value","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(y.A,{type:"number",value:u[1],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=p&&r<=h){var n=[u[0],r||h];d(n),x(n)}},placeholder:(0,l.__)("Max value…","burst-statistics"),min:p,max:h,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,l.__)("Maximum value","burst-statistics")})]}),(0,n.jsx)("button",{type:"button",onClick:function(){d([p,h]),a("")},className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:(0,l.__)("Clear","burst-statistics")})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,l.__)("Clear to remove this filter","burst-statistics")})]})]})})};var z=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const F=function(e){var t=e.initialValue,r=void 0===t?"":t,i=e.onChange,a=(0,j.A)().getFilterOptions,o=(0,s.useState)([]),c=o[0],f=o[1];(0,s.useEffect)(function(){var e,t,r,n;e=void 0,t=void 0,n=function(){var e;return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return[4,a("devices")];case 1:return e=t.sent()||[],f(e),[2]}})},new((r=void 0)||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},[]);var p,b=(0,s.useState)((p=r)&&""!==p.trim()?p.split(",").map(function(e){return e.trim().toLowerCase()}).filter(Boolean):[]),m=b[0],h=b[1];(0,s.useEffect)(function(){var e=0<m.length?m.join(","):"";i(e)},[m,i]);var g=function(e){h(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):z(z([],t,!0),[e],!1)})},x=function(e){return m.includes(e)},v=function(e){var t="".concat(e.title," device filter"),r=x(e.id)?(0,l.__)("selected","burst-statistics"):(0,l.__)("not selected","burst-statistics");return"".concat(t,", ").concat(r)};return c&&0!==c.length?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center",role:"group","aria-label":(0,l.__)("Device selection options","burst-statistics"),children:c.map(function(e){var t=x(e.id);return(0,n.jsxs)("button",{onClick:function(){return g(e.id)},onKeyDown:function(t){return function(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g(t))}(t,e.id)},className:(0,u.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:shadow-md",{"border-primary bg-primary-light":t,"border-gray-300 hover:border-gray-400":!t}),"aria-label":v(e),"aria-pressed":t,type:"button",children:[t&&(0,n.jsx)("div",{className:"absolute top-2 right-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,n.jsx)("div",{className:(0,u.A)("flex h-12 w-12 items-center justify-center rounded-lg transition-colors",{"bg-primary-light":t,"bg-gray-100 group-hover:bg-gray-200":!t}),"aria-hidden":"true",children:(0,n.jsx)(d.A,{name:e.key,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("h3",{className:(0,u.A)("text-sm font-medium transition-colors",{"text-gray-900":t,"text-gray-700":!t}),children:e.title})})]}),(0,n.jsx)("div",{className:"absolute bottom-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:(0,u.A)("h-4 w-4 rounded border-2 transition-all duration-200 flex items-center justify-center",{"bg-primary border-primary":t,"bg-white border-gray-300 group-hover:border-gray-400":!t}),children:t&&(0,n.jsx)(d.A,{name:"check",size:12,color:"white","aria-hidden":"true"})})})]},e.id)})})}):null};var D=function(){return D=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},D.apply(this,arguments)};const L=function(e){var t=e.filterKey,r=e.config,s=e.tempValue,i=e.onTempValueChange;return(0,n.jsx)("div",{className:"h-full",children:function(){var e={filterKey:t,config:r,initialValue:s,onChange:i};if("device_id"===t)return(0,n.jsx)(F,D({},e));switch(r.type){case"string":default:return(0,n.jsx)(O,D({},e));case"boolean":return(0,n.jsx)(A,D({},e));case"int":return(0,n.jsx)(E,D({},e))}}()})};var T=r(6987);const M=function(e){var t=e.isOpen,r=e.setIsOpen,a=e.initialFilter,o=e.reportBlockIndex,u=(0,p.R7)(o),f=u.setFilters,b=u.deleteFilter,m=u.clearAllFilters,h=u.getActiveFilters,g=(0,s.useState)("selection"),v=g[0],y=g[1],j=(0,s.useState)(null),w=j[0],_=j[1],N=(0,s.useState)(null),k=N[0],O=N[1],S=(0,s.useState)(""),A=S[0],C=S[1];i().useEffect(function(){t&&(a?(y("setup"),_(a.key),O(a.config),C(a.value)):(y("selection"),_(null),O(null),C("")))},[t,a]);var P=function(){y("selection"),_(null),O(null),C("")};return(0,n.jsx)(c.A,{isOpen:t,onClose:function(){return r(!1)},title:"selection"===v?(0,l.__)("Select a filter","burst-statistics"):(0,l.__)("Setup Filter","burst-statistics"),subtitle:"selection"===v?"selection"===v?(0,l.__)("Choose a filter to apply to your analytics data","burst-statistics"):(0,l.__)("Setup filter","burst-statistics"):void 0,customHeader:"setup"===v&&"setup"===v&&k?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-3 mb-4",children:(0,n.jsxs)("button",{onClick:P,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded transition-all duration-200","aria-label":(0,l.__)("Back to filters","burst-statistics"),type:"button",children:[(0,n.jsx)(d.A,{name:"chevron-left",size:16,"aria-hidden":"true"}),(0,n.jsx)("span",{children:(0,l.__)("Back to filters","burst-statistics")})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary-light",children:(0,n.jsx)(d.A,{name:k.icon,color:"gray",size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:k.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"setup"===v&&k?"string"===k.type?k.options?(0,l.__)("Start typing to search or select from available options","burst-statistics"):(0,l.__)("Enter the value you want to filter by","burst-statistics"):"int"===k.type?(0,l.__)("Set the range for this filter","burst-statistics"):"boolean"===k.type?(0,l.__)("Select the option you want to filter by","burst-statistics"):"":""})]})]})]}):null,content:"selection"===v?(0,n.jsx)(x,{onSelectFilter:function(e,t){_(e),O(t),y("setup");var r=h();C(r[e]||"")},reportBlockIndex:o}):w&&k?(0,n.jsx)(L,{filterKey:w,config:k,onBack:P,tempValue:A,onTempValueChange:function(e){C(e)}}):null,footer:"selection"===v?(0,n.jsx)(T.A,{onClick:function(){m(),r(!1)},btnVariant:"tertiary",size:"sm",className:"w-full",ariaLabel:(0,l.__)("Reset all active filters to default settings","burst-statistics"),children:(0,l.__)("Reset all filters","burst-statistics")}):"setup"===v?(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(T.A,{onClick:function(){var e,t;w&&(e=w,""===(t=A)||null==t?b(e):f(e,t),r(!1))},btnVariant:"primary",size:"sm",className:"flex-1",ariaLabel:k?(0,l.__)("Apply %s filter","burst-statistics").replace("%s",k.label):(0,l.__)("Apply filter","burst-statistics"),children:(0,l.__)("Apply Filter","burst-statistics")}),(0,n.jsx)(T.A,{onClick:function(){var e,t;w&&(e=w,""===(t=A)||null==t?b(e):f(e,t),P())},btnVariant:"secondary",size:"sm",className:"flex-1",ariaLabel:k?(0,l.__)("Apply %s filter and continue adding more filters","burst-statistics").replace("%s",k.label):(0,l.__)("Apply filter and add more","burst-statistics"),children:(0,l.__)("Apply & Add More","burst-statistics")})]}):null,triggerClassName:""})};var V=r(63557),B=function(e){var t,r,i,l=null!==(t=e.smallLabels)&&void 0!==t&&t,c=null!==(r=e.reportBlockIndex)&&void 0!==r?r:void 0,u=null!==(i=e.isReport)&&void 0!==i&&i,d=(0,V.A)(function(e){return e.userCanFilter}),f=(0,s.useState)(!1),p=f[0],b=f[1],m=(0,s.useState)(null),h=m[0],g=m[1],x=(0,a.A)(c),v=x.activeFilters,y=x.removeFilter;return(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(o.B,{isReport:u,filters:v,onRemove:y,onClick:function(e){g({key:e.key,config:e.config,value:e.value}),b(!0)},smallLabels:l,className:"flex flex-wrap gap-2"}),d&&!u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.wk,{smallLabels:l,onClick:function(){g(null),b(!0)}}),(0,n.jsx)(M,{isOpen:p,setIsOpen:function(){b(!1),g(null)},initialFilter:h,reportBlockIndex:c})]})]})}},75111(e,t,r){r.d(t,{A:()=>d});var n=r(10790),s=r(51609),i=r(2573),a=r(92745),o=r(27723),l=r(717),c=r(88511),u=(0,s.forwardRef)(function(e,t){var r=e.inputId,s=e.options,u=e.value,d=e.columns,f=void 0===d?2:d,p=e.disabled,b=void 0!==p&&p,m=e.goalId,h=e.onChange,g=e.className,x=void 0===g?"":g,v=(0,c.A)().isTrial,y=m?"".concat(m,"-").concat(r):r;return(0,n.jsx)("div",{className:(0,i.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(f),x),ref:t,children:Object.keys(s).map(function(e){var t=s[e],r="".concat(y,"-").concat(t.type),c=t.type===u;return(0,n.jsxs)("div",{className:"w-full bg-gray-200 rounded-lg",children:[(0,n.jsx)("input",{type:"radio",checked:c,name:y,id:r,value:t.type,disabled:b||t.disabled,onChange:function(e){h(e.target.value)},className:"sr-only opacity-0 absolute"}),(0,n.jsxs)("label",{htmlFor:r,className:(0,i.A)("flex gap-2.5 m-[1px] items-start p-3 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 items-center",{"border-primary bg-primary-light":c,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!c,"opacity-50 cursor-not-allowed":b||t.disabled}),children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:(0,i.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":c,"border-gray-300 bg-white":!c}),children:c&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,n.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[t.icon&&(0,n.jsx)(a.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,n.jsx)("h5",{className:(0,i.A)("text-base font-medium transition-colors text-gray-900"),children:t.label}),t.pro&&(0,n.jsxs)(n.Fragment,{children:["Pro",(0,n.jsx)(l.A,{label:(0,o.__)("Pro","burst-statistics"),id:"reporting",type:v?"icon":"badge"})]})]}),t.description&&1<t.description.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,n.jsx)("p",{className:(0,i.A)("text-sm transition-colors truncate",{"text-gray-600":c,"text-gray-500":!c}),children:t.description})]})]})]})]},r)})})});u.displayName="RadioButtonsInput";const d=u},3316(e,t,r){r.d(t,{A:()=>o});var n=r(10790),s=r(51609),i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)},a=(0,s.forwardRef)(function(e,t){var r=e.type,s=void 0===r?"text":r,a=e.className,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["type","className"]);return(0,n.jsx)("input",i({ref:t,type:s,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(a||"")},o))});a.displayName="TextInput";const o=a},45989(e,t,r){r.d(t,{H:()=>c});var n=r(10790),s=r(51609),i=r(27723),a=r(47515),o=r(3316),l=r(92745),c=function(e){var t=e.reportBlockIndex,r=e.isEditingMode,c=void 0!==r&&r,u=(0,a.c)(function(e){return e.updateCommentTitle}),d=(0,a.c)(function(e){return e.updateCommentText}),f=(0,a.c)(function(e){var r,n;return null!==(n=null===(r=e.wizard.content[t])||void 0===r?void 0:r.comment_title)&&void 0!==n?n:""}),p=(0,a.c)(function(e){var r,n;return null!==(n=null===(r=e.wizard.content[t])||void 0===r?void 0:r.comment_text)&&void 0!==n?n:""}),b=f||p,m=(0,s.useRef)(null),h=(0,s.useState)(!!b),g=h[0],x=h[1];return c||p||f?c?g||b?(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-white shadow-sm relative border border-gray-300 w-full",children:[(0,n.jsx)("div",{className:"mb-3",children:(0,n.jsx)(o.A,{value:f||"",onChange:function(e){return u(t,e.target.value)},placeholder:(0,i.__)("Comment title (optional)","burst-statistics"),className:"text-sm font-semibold"})}),(0,n.jsx)("div",{children:(0,n.jsx)("textarea",{value:p||"",ref:m,onChange:function(e){return d(t,e.target.value)},placeholder:(0,i.__)("Add your insights or comments about this data...","burst-statistics"),className:"w-full min-h-[100px] p-2 text-sm text-gray-600 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-y",rows:4})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 mt-2",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,i.__)("This comment will appear next to the block in the report. If there is not enough space, the comment will be shown below the block.","burst-statistics")}),(0,n.jsxs)("button",{onClick:function(){return x(!1),u(t,""),void d(t,"")},className:"ml-auto text-xs text-gray-600 hover:text-gray-700 bg-gray-50 border border-gray-300 rounded-md p-1 hover:bg-gray-100 hover:border-gray-400 transition-colors duration-200 whitespace-nowrap flex items-center gap-1",children:[(0,n.jsx)(l.A,{name:"trash",size:13,className:"opacity-50"}),(0,i.__)("Remove comment","burst-statistics")]})]})]}):(0,n.jsxs)("button",{onClick:function(){return x(!0)},className:"w-full p-4 rounded-xl bg-wp-gray shadow-sm border border-gray-300 hover:border-gray-400 hover:bg-white transition-colors duration-200 flex items-center justify-center gap-2 text-gray-600 hover:text-gray-800",children:[(0,n.jsx)(l.A,{name:"plus",size:16}),(0,n.jsx)("span",{className:"text-sm font-medium",children:(0,i.__)("Add comment","burst-statistics")})]}):(0,n.jsxs)("div",{className:"p-4 rounded-xl bg-white shadow-sm relative border border-gray-300 w-full",children:[f&&(0,n.jsx)("p",{className:"text-gray-700 text-sm font-semibold mb-2",children:f}),p&&(0,n.jsx)("p",{className:"text-gray-600 text-sm whitespace-pre-wrap",children:p})]}):null}},79453(e,t,r){r.d(t,{A:()=>d});var n=r(10790),s=r(51609),i=function(){var e=(0,s.useState)(0),t=e[0],r=e[1],i=(0,s.useState)(!1),a=i[0],o=i[1],l=(0,s.useCallback)(function(){var e=document.documentElement.scrollHeight-window.innerHeight;0<e?(r(Math.round(window.scrollY/e*100)),o(!0)):o(!1)},[]);return(0,s.useEffect)(function(){l();var e=["scroll","resize","load"];e.forEach(function(e){return window.addEventListener(e,l)});var t=new MutationObserver(l);return t.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),function(){e.forEach(function(e){return window.removeEventListener(e,l)}),t.disconnect()}},[l]),a?(0,n.jsx)("div",{className:"h-1 w-full bg-gray-400",children:(0,n.jsx)("div",{className:"h-full bg-blue transition-all duration-300 ease-out",style:{width:"".concat(10+Math.min(t,90),"%")}})}):null};i.displayName="FormScrollProgressLine";const a=i;var o=r(6987),l=r(27723),c=r(21632);function u(e){var t=e.onSubmit,r=e.control,s=(0,c.lN)({control:r}),i=s.isDirty,u=s.isSubmitting,d=s.isValidating,f=[{condition:u,message:(0,l.__)("Saving…","burst-statistics"),color:"black"},{condition:d,message:(0,l.__)("Validating…","burst-statistics"),color:"black"},{condition:i,message:(0,l.__)("You have unsaved changes","burst-statistics"),color:"black"}].find(function(e){return e.condition});return(0,n.jsxs)("div",{className:"sticky bottom-0 start-0 z-10 rounded-b-md border-b border-r border-l border-gray-300 bg-gray-100 shadow-[0_-8px_15px_-3px_rgba(0,0,0,0.05),0_4px_6px_-2px_rgba(0,0,0,0.05)]",children:[(0,n.jsx)(a,{}),(0,n.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 p-5",children:[(null==f?void 0:f.message)&&(0,n.jsx)("div",{className:"flex gap-2 items-center py-1 px-2 rounded-md transition-opacity duration-150"+((null==f?void 0:f.message)?" opacity-100":" opacity-0")+("red"===(null==f?void 0:f.color)?" bg-red-light border border-red":""),children:(0,n.jsx)("span",{className:"text-sm"+("red"===(null==f?void 0:f.color)?" font-semibold text-red":" italic text-gray-900"),children:null==f?void 0:f.message})}),(0,n.jsx)(o.A,{className:"burst-save",onClick:t,children:(0,l.__)("Save","burst-statistics")})]})]})}u.displayName="FormFooter";const d=u},17701(e,t,r){r.d(t,{A:()=>Vr});var n=r(10790),s=r(51609),i=r.n(s),a=r(40565),o=r(31647),l=r(69938),c=r(13521),u=r(21632),d=r(3316),f=r(76448),p=function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},p.apply(this,arguments)},b=(0,s.forwardRef)(function(e){var t,r,s=e.field,i=e.fieldState,a=e.label,o=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),b=u.id||s.name;return(0,n.jsx)(f.A,p({label:a,help:o,error:null===(t=null==i?void 0:i.error)||void 0===t?void 0:t.message,context:l,className:c,inputId:b,required:u.required,recommended:u.recommended,disabled:u.disabled},u,{children:(0,n.jsx)(d.A,p({id:b,type:"text","aria-invalid":!!(null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message)},s,u))}))});b.displayName="TextField";const m=b;var h=function(){return h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},h.apply(this,arguments)},g=(0,s.forwardRef)(function(e,t){var r=e.type,s=void 0===r?"hidden":r,i=e.className,a=void 0===i?"":i,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["type","className"]);return(0,n.jsx)("input",h({className:a,ref:t,type:s},o))});g.displayName="HiddenInput";const x=g;var v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},v.apply(this,arguments)},y=(0,s.forwardRef)(function(e){var t,r=e.field,s=e.fieldState,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState"]),a=i.id||r.name;return(0,n.jsx)(x,v({},r,{id:a,type:"hidden","aria-invalid":!!(null===(t=null==s?void 0:s.error)||void 0===t?void 0:t.message)},i))});y.displayName="HiddenField";const j=y;var w=r(27723),_=function(){return _=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},_.apply(this,arguments)},N=(0,s.forwardRef)(function(e,t){var r=e.className,s=e.rows,i=void 0===s?4:s,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["className","rows"]);return(0,n.jsx)("textarea",_({ref:t,rows:i,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(r||"")},a))});N.displayName="TextAreaInput";const k=N;var O=function(){return O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},O.apply(this,arguments)},S=(0,s.forwardRef)(function(e){var t,r,s=e.field,i=e.fieldState,a=e.label,o=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),d=u.id||s.name;return(0,n.jsx)(f.A,O({label:a,help:o,error:null===(t=null==i?void 0:i.error)||void 0===t?void 0:t.message,context:l,className:c,inputId:d,required:u.required,recommended:u.recommended,disabled:u.disabled},u,{children:(0,n.jsx)(k,O({id:d,"aria-invalid":!!(null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message)},s,u))}))});S.displayName="TextAreaField";const A=S;var C=r(6987),P=function(){return P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},P.apply(this,arguments)},R=(0,s.forwardRef)(function(e,t){var r,s,i=e.field,a=e.fieldState,o=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),p=d.id||i.name,b=burst_settings.current_ip,m=i.value||"";return(0,n.jsx)(f.A,P({label:o,help:l,error:null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:p,required:d.required,recommended:d.recommended,disabled:d.disabled},d,{children:(0,n.jsxs)("div",{className:"space-y-2 w-full",children:[(0,n.jsx)(k,P({ref:t,id:p,placeholder:"127.0.0.1\n192.168.0.1","aria-invalid":!!(null===(s=null==a?void 0:a.error)||void 0===s?void 0:s.message),onChange:function(e){var t=e.target.value;i.onChange(t)},value:m,rows:4},d)),(0,n.jsx)(C.A,{onClick:function(){if(b){var e,t=(m||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");e=0===t.split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e}).length||""===t.trim()?b:t.endsWith("\n")?t+b:t+"\n"+b,i.onChange(e)}},disabled:!b||!b||m.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e}).includes(b),btnVariant:"tertiary",size:"md",children:(0,w.__)("Add current IP address","burst-statistics")})]})}))});R.displayName="IpBlockField";const I=R;var E=r(58206),z=function(){return z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},z.apply(this,arguments)},F=(0,s.forwardRef)(function(e,t){var r,s,i=e.field,a=e.fieldState,o=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),p=d.id||i.name;return(0,n.jsx)(f.A,z({label:o,help:l,error:null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.message,context:c,className:u+" flex-row",inputId:p,required:d.required,alignWithLabel:!0,recommended:d.recommended,disabled:d.disabled},d,{children:(0,n.jsx)(E.A,z({},i,{id:p,"aria-invalid":!!(null===(s=null==a?void 0:a.error)||void 0===s?void 0:s.message),ref:t},d))}))});F.displayName="SwitchField";const D=F;var L=r(80076),T=r(21587),M=r(28811),V=function(){return V=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},V.apply(this,arguments)},B=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},W=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const q=function(e){var t=e.label,r=e.action,i=e.buttonText,a=e.warnTitle,o=e.warnContent,l=e.warnType,c=e.url,u=e.disabled,d=e.onClick,f=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["label","action","buttonText","warnTitle","warnContent","warnType","url","disabled","onClick"]),p=(0,s.useState)(!1),b=p[0],m=p[1],h=(0,s.useState)(!1),g=h[0],x=h[1],v=i||t,y=function(){return B(void 0,void 0,void 0,function(){var e,t;return W(this,function(n){switch(n.label){case 0:if(!r)return[2];x(!0),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,M.Eo(r,{})];case 2:return(e=n.sent()).success?T.oR.success(e.message||(0,w.__)("Action completed successfully","burst-statistics")):T.oR.error(e.message||(0,w.__)("Action failed","burst-statistics")),[3,5];case 3:return t=n.sent(),T.oR.error((0,w.__)("An error occurred while executing the action","burst-statistics")),console.error("Action execution error:",t),[3,5];case 4:return x(!1),[7];case 5:return[2]}})})},j=function(){m(!1)};return r?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,V({onClick:function(e){return function(e){return B(void 0,void 0,void 0,function(){return W(this,function(t){switch(t.label){case 0:return a?(m(!0),[3,4]):[3,1];case 1:return r?[4,y()]:[3,3];case 2:t.sent(),t.label=3;case 3:d&&d(e),t.label=4;case 4:return[2]}})})}(e)},disabled:u||g,btnVariant:"danger"===l?"danger":"secondary"},f,{children:g?(0,w.__)("Processing…","burst-statistics"):v})),a&&(0,n.jsx)(L.A,{title:a,content:o||"",isOpen:b,onClose:j,triggerClassName:"",footer:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,{onClick:j,btnVariant:"tertiary",children:(0,w.__)("Cancel","burst-statistics")}),(0,n.jsx)(C.A,{onClick:function(){return B(void 0,void 0,void 0,function(){return W(this,function(e){switch(e.label){case 0:return m(!1),r?[4,y()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},btnVariant:"danger"===l?"danger":"secondary",disabled:g,children:g?(0,w.__)("Processing…","burst-statistics"):(0,w.__)("Confirm","burst-statistics")})]})})]}):c?(0,n.jsx)(C.A,V({link:{to:c,from:"/"},disabled:u},f,{btnVariant:"tertiary",children:v})):(0,n.jsx)(C.A,V({onClick:d,disabled:u},f,{btnVariant:"tertiary",children:v}))};var U=function(){return U=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},U.apply(this,arguments)},G=(0,s.forwardRef)(function(e,t){var r,s,i,a,o,l,c,u,d=e.field,p=e.fieldState,b=e.label,m=e.help,h=e.context,g=e.className,x=e.setting,v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className","setting"]),y=v.id||d.name;return(0,n.jsx)(f.A,U({label:b,help:m,error:null===(r=null==p?void 0:p.error)||void 0===r?void 0:r.message,context:h,inputId:y,className:g,alignWithLabel:!0,recommended:v.recommended,disabled:v.disabled},v,{children:(0,n.jsx)(q,U({},d,{id:y,"aria-invalid":!!(null===(s=null==p?void 0:p.error)||void 0===s?void 0:s.message),ref:t,buttonText:null!==(i=x.button_text)&&void 0!==i?i:"",action:null!==(a=x.action)&&void 0!==a?a:"",url:null!==(o=x.url)&&void 0!==o?o:"",warnTitle:null!==(l=x.warnTitle)&&void 0!==l?l:"",warnContent:null!==(c=x.warnContent)&&void 0!==c?c:"",warnType:null!==(u=x.warnType)&&void 0!==u?u:""},v))}))});G.displayName="ButtonControlField";const K=G;var $=r(99696),H=r(92745),Y=r(85944),Q=r(50863),J=r(47515),X=r(15672),Z=r(51367),ee=r(2573),te=function(){var e=(0,X.z)(function(e){return e.steps}),t=(0,J.c)(function(e){return e.wizard.currentStep}),r=(0,J.c)(function(e){return e.setCurrentStep}),s=(0,J.c)().wizard.id;return(0,n.jsx)("div",{className:"flex items-center justify-between",children:e.map(function(a,o){var l=null!==s;return(0,n.jsxs)(i().Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 rounded-md p-2 transition-all duration-300 ease-in-out group ".concat(l?"cursor-pointer hover:bg-gray-200":"cursor-not-allowed"),onClick:function(){l&&r(a.number)},children:[(0,n.jsx)("div",{className:"flex items-center justify-center w-6 h-6 rounded-full border-2 transition-all duration-300 ease-in-out ".concat(a.number<=t?"bg-brand-lightest border-brand":"border-gray-400 bg-gray-200"),children:a.number<t&&(0,n.jsx)(Z.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:120,damping:14},children:(0,n.jsx)(H.A,{strokeWidth:2,name:"check",size:18,className:"w-4 h-4",color:"green"})})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-xs text-gray-600 uppercase tracking-[0.05em] whitespace-nowrap",children:(0,w.sprintf)((0,w.__)("Step %d","burst-statistics"),a.number)}),(0,n.jsx)("p",{className:(0,ee.A)("text-md font-medium whitespace-nowrap transition-all duration-300 ease-in-out group-hover:text-gray-700",a.number===t?"text-gray-700":"text-gray-500"),children:a.label})]})]}),o<e.length-1&&(0,n.jsx)("div",{className:"md:block h-0.5 w-full mx-5 bg-gray-300 rounded-xs"})]},a.number)})})},re=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},ne=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},se=function(){var e=(0,J.c)(),t=e.nextStep,r=e.prevStep,i=e.resetWizard,a=e.closeWizard,o=e.wizard,l=o.currentStep,c=o.id,d=o.scheduled,f=(0,Q._)(function(e){return e.saveReportFromWizard}),p=(0,X.z)(),b=p.steps,m=p.stepCount,h=(0,u.xW)().trigger,g=1===l,x=l===m,v=null!==c,y=(0,s.useCallback)(function(){i(),a()},[i,a]);(0,s.useEffect)(function(){var e=function(e){"Escape"===e.key&&g&&y()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[g,y]);var j=(0,s.useCallback)(function(){return re(void 0,void 0,void 0,function(){var e,t,r;return ne(this,function(n){switch(n.label){case 0:return e=b.find(function(e){return e.number===l}),t=null!==(r=null==e?void 0:e.fields)&&void 0!==r?r:[],[4,h(t)];case 1:return n.sent()?[2,f()]:[2,null]}})})},[h,b,l,f]);return(0,n.jsxs)("div",{className:"relative z-[100] flex justify-center bg-gray-50 px-10 pt-5 pb-4 gap-4 w-full shadow-layered-high-t",children:[(0,n.jsx)("span",{className:"block h-6 w-px bg-gray-400 mt-1"}),(0,n.jsxs)("div",{className:"flex gap-2 max-w-4xl w-full",children:[(0,n.jsx)("div",{className:"flex gap-2 flex-1",children:g&&!v?(0,n.jsx)(C.A,{btnVariant:"tertiary",onClick:y,children:(0,w.__)("Cancel create report","burst-statistics")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,{btnVariant:"tertiary",onClick:r,disabled:g,children:(0,w.__)("Previous","burst-statistics")}),(0,n.jsx)(C.A,{btnVariant:"tertiary",onClick:t,disabled:x,children:(0,w.__)("Next","burst-statistics")})]})}),(0,n.jsxs)("div",{className:"flex gap-2 flex-1 justify-end",children:[(0,n.jsx)(C.A,{btnVariant:"tertiary",onClick:function(){return re(void 0,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,j()];case 1:return null!==e.sent()?T.oR.success((0,w.__)("Report saved successfully","burst-statistics")):T.oR.error((0,w.__)("Failed to save report","burst-statistics")),[2]}})})},children:(0,w.__)("Save","burst-statistics")}),(0,n.jsx)(C.A,{onClick:x?function(){return re(void 0,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,j()];case 1:return e.sent()?(T.oR.success((0,w.__)("Report saved successfully","burst-statistics")),y(),[2]):(T.oR.error((0,w.__)("Failed to save report","burst-statistics")),[2])}})})}:function(){return re(void 0,void 0,void 0,function(){return ne(this,function(e){switch(e.label){case 0:return[4,j()];case 1:return null!==e.sent()&&t(),[2]}})})},children:g&&!v?(0,w.__)("Create report","burst-statistics"):x?d?(0,w.__)("Schedule and save","burst-statistics"):(0,w.__)("Save and close","burst-statistics"):(0,w.__)("Save and continue","burst-statistics")})]})]}),(0,n.jsx)("span",{className:"block h-6 w-px bg-gray-400 mt-1"})]})},ie=r(61626),ae=function(e){var t=e.html,r=(0,s.useRef)(null);return(0,s.useEffect)(function(){if(r.current){var e=r.current.shadowRoot;e||(e=r.current.attachShadow({mode:"open"})),e.innerHTML=t}},[t]),(0,n.jsx)("div",{ref:r,className:"w-full burst-classic-html-container border rounded bg-white"})},oe=function(e){var t=e.className,r=(0,J.c)(function(e){return e.wizard.frequency}),s=(0,J.c)(function(e){return e.wizard.content}),i=0<s.length,a=(0,ie.I)({queryKey:["report-preview",r,s],queryFn:function(){return(0,M.Nd)(s,r)},enabled:i}),o=a.data,l=a.isFetching,c=a.isError;return(0,n.jsxs)("div",{className:t,children:[!i&&(0,n.jsx)("p",{className:"text-gray-500 text-center",children:(0,w.__)("No content selected for preview.","burst-statistics")}),i&&l&&(0,n.jsx)("p",{className:"text-gray-500 text-center",children:(0,w.__)("Loading preview…","burst-statistics")}),i&&!l&&c&&(0,n.jsx)("p",{className:"text-red-500 text-center",children:(0,w.__)("Failed to load preview.","burst-statistics")}),i&&!l&&(null==o?void 0:o.preview_html)&&(0,n.jsx)(ae,{html:o.preview_html})]})},le=r(30533),ce=r(45989),ue=function(e){var t=e.reportBlockIndex,r=e.isEditingMode,s=void 0!==r&&r,i=e.isSelected,a=void 0!==i&&i,o=e.children,l=(0,J.c)(function(e){return e.setSelectedBlockIndex}),c=function(e){s&&(e.stopPropagation(),l(t))};if(!s)return(0,n.jsxs)("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-12 gap-2 mx-auto",children:[(0,n.jsx)("div",{className:"md:col-span-7",children:(0,n.jsx)("div",{className:"group relative p-2 border border-transparent",children:o})}),(0,n.jsx)("div",{className:"md:col-span-5 flex flex-row items-end gap-2 p-2",children:(0,n.jsx)(ce.H,{reportBlockIndex:t,isEditingMode:!1})})]});var u=a?"border-gray-400":"border-transparent hover:border-gray-300 hover:bg-gray-50/50";return(0,n.jsx)("div",{className:"p-1 mb-4 rounded-xl border-2 transition-all duration-200 cursor-pointer  ".concat(u),onClick:c,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c(e))},"aria-pressed":a,"aria-label":(0,w.__)("Select block to edit settings","burst-statistics"),children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 mx-auto",children:[(0,n.jsx)("div",{className:"md:col-span-7",children:(0,n.jsx)("div",{className:"group relative p-1 border border-transparent",children:o})}),(0,n.jsx)("div",{className:"md:col-span-5 flex flex-row items-end gap-2 p-1",children:(0,n.jsx)(ce.H,{reportBlockIndex:t,isEditingMode:!1})})]})})},de=function(){return de=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},de.apply(this,arguments)},fe=i().memo(function(e){var t=e.block,r=e.reportBlockIndex,i=e.blockConfig,a=e.startDate,o=e.endDate,l=e.filters,c=e.isEditingMode,u=e.isSelected,d=void 0!==u&&u,f=i.component,p=(0,s.useMemo)(function(){return de(de({isStory:!0,isReport:!0,customFilters:l,reportBlockIndex:r,startDate:a,endDate:o},(null==i?void 0:i.blockProps)||{}),{allowBlockFilters:!1})},[r,a,o,l,i]);return(0,n.jsx)(ue,{reportBlockIndex:r,blockId:t.id,isEditingMode:c,isSelected:d,children:(0,n.jsx)(f,de({},p))},"".concat(t.id,"-").concat(r))},function(e,t){return e.reportBlockIndex===t.reportBlockIndex&&e.block.id===t.block.id&&e.startDate===t.startDate&&e.endDate===t.endDate&&e.isEditingMode===t.isEditingMode&&e.isSelected===t.isSelected&&JSON.stringify(e.filters)===JSON.stringify(t.filters)&&e.blockConfig===t.blockConfig});fe.displayName="MemoizedBlock";const pe=fe;var be=r(33597),me=r(89717),he=r(20467),ge=r(86870),xe=r(65162),ve="yyyy-MM-dd",ye=new Date(2022,0,1),je=function(e){var t,r=e.range,s=e.display,i=e.isOpen,a=e.setIsOpen,o=e.disabled,l=e.smallLabels,c=void 0!==l&&l,u=c?14:18,d=c?14:16;return(0,n.jsxs)(xe.l9,{className:(0,ee.$)("burst-date-button flex min-w-[200px] items-center gap-2 rounded-md border shadow-sm transition-all duration-200",{"px-2 py-1 text-sm":c,"px-3 py-2 text-base":!c},{"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-800 opacity-60":o,"border-gray-300 bg-white hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]":!o}),onClick:function(){return!o&&a(!i)},disabled:o,children:[(0,n.jsx)(H.A,{name:"calendar",size:u}),(0,n.jsx)("span",{className:"w-full",children:"custom"===r?"".concat(s.startDate," - ").concat(s.endDate):(null===(t=ge.cA[r])||void 0===t?void 0:t.label)||r}),(0,n.jsx)(H.A,{name:"chevron-down",size:d})]})},we=function(e){var t=e.value,r=e.onChange,i=e.availableRangeKeys,a=e.disabled,o=void 0!==a&&a,l=e.className,c=void 0===l?"":l,u=e.align,d=void 0===u?"end":u,f=e.smallLabels,p=void 0!==f&&f,b=(0,s.useState)(!1),m=b[0],h=b[1],g=(null==t?void 0:t.range)||"last-7-days",x=(null==t?void 0:t.startDate)||(0,me.default)(new Date,ve),v=(null==t?void 0:t.endDate)||(0,me.default)(new Date,ve),y=(0,s.useState)({startDate:(0,he.A)(x),endDate:(0,he.A)(v),key:"selection"}),j=y[0],w=y[1],_=(0,s.useRef)(0),N=i||Object.keys(ge.cA),k=(0,s.useMemo)(function(){return(0,ge.cf)(N)},[N]),O=(0,s.useMemo)(function(){return(0,ge.YP)(x,v)},[x,v]),S=(0,s.useCallback)(function(e){if(!o)try{_.current++;var t=e.selection;if(!t)return;var n=t.startDate,s=t.endDate,i=(0,me.default)(n,ve),a=(0,me.default)(s,ve);w({startDate:(0,he.A)(i),endDate:(0,he.A)(a),key:"selection"});var l=ge.cA,c=Object.keys(l).find(function(e){var r,n;return null===(n=(r=l[e]).isSelected)||void 0===n?void 0:n.call(r,t)}),u=c||"custom";(2===_.current||"custom"!==u||i!==a)&&(_.current=0,r&&r(u,i,a),h(!1))}catch(e){console.error("Error updating date range:",e)}},[o,r]);return(0,n.jsx)("div",{className:"ml-auto w-auto ".concat(c),children:(0,n.jsxs)(xe.bL,{open:m&&!o,onOpenChange:function(e){return!o&&h(e)},children:[(0,n.jsx)(je,{range:g,display:O,isOpen:m,setIsOpen:h,disabled:o,smallLabels:p}),(0,n.jsx)("div",{className:"burst-date-range-popover-container relative z-[2]",children:(0,n.jsx)(xe.ZL,{container:document.querySelector(".burst-date-range-popover-container"),children:(0,n.jsxs)(xe.UC,{align:d,sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(be.Ur,{ranges:[j],rangeColors:["#2b8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:S,inputRanges:[],months:2,direction:"horizontal",minDate:ye,maxDate:(0,ge.ii)(),staticRanges:k})})]})})})]})})},_e=r(95955),Ne=function(e){var t,r,i=e.reportBlockIndex,a=e.className,o=(0,J.c)(function(e){return e.wizard.content}),l=o[i],c=(0,X.z)(function(e){return e.availableContent}).find(function(e){return e.id===(null==l?void 0:l.id)}),u=(0,J.c)(function(e){return e.removeContent}),f=(0,J.c)(function(e){return e.moveContentUp}),p=(0,J.c)(function(e){return e.moveContentDown}),b=(0,J.c)(function(e){return e.setSelectedBlockIndex}),m=(0,J.c)(function(e){return e.blockDateRangeEnabled}),h=(0,J.c)(function(e){return e.toggleBlockDateRangeEnabled}),g=(0,J.c)(function(e){return e.setDateRange}),x=(0,J.c)(function(e){return e.getParsedDateRangeValue}),v=(0,J.c)(function(e){return e.getDateRange(i)}),y=(0,J.c)(function(e){return e.updateCommentTitle}),j=(0,J.c)(function(e){return e.updateCommentText}),_=null!==(t=null==l?void 0:l.comment_title)&&void 0!==t?t:"",N=null!==(r=null==l?void 0:l.comment_text)&&void 0!==r?r:"",k=(0,s.useMemo)(function(){return x(v)},[v,x]),O=o.length,S=i+1,A=(null==c?void 0:c.label)||(null==l?void 0:l.id)||(0,w.__)("Block","burst-statistics");return l?(0,n.jsxs)(Z.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2,ease:"easeOut"},className:(0,ee.A)("w-[35%] min-w-[280px] max-w-[360px] h-full border-l border-gray-300 bg-white flex flex-col overflow-hidden",a),onClick:function(e){return e.stopPropagation()},children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(null==c?void 0:c.icon)&&(0,n.jsx)(H.A,{name:c.icon,size:16,className:"text-gray-600"}),(0,n.jsx)("span",{className:"font-semibold text-sm text-gray-800",children:A})]}),(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:[(0,w.__)("Block","burst-statistics")," ",S," ",(0,w.__)("of","burst-statistics")," ",O]})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:(0,w.__)("Date Range","burst-statistics")}),(0,n.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[(0,n.jsx)("label",{className:"text-sm text-gray-700",children:(0,w.__)("Custom date range","burst-statistics")}),(0,n.jsx)(E.A,{onChange:function(){return h(i)},value:m(i)})]}),m(i)&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(we,{value:k,align:"start",onChange:function(e,t,r){var n="custom"===e?"custom:".concat(t,":").concat(r):e;g(n,i)},smallLabels:!0})}),!m(i)&&(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,w.__)("Using report default date range.","burst-statistics")})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:(0,w.__)("Filters","burst-statistics")}),(0,n.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:(0,n.jsx)(_e.y,{reportBlockIndex:i,smallLabels:!0})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("h4",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:(0,w.__)("Comment","burst-statistics")}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(d.A,{value:_,onChange:function(e){return y(i,e.target.value)},placeholder:(0,w.__)("Comment title (optional)","burst-statistics"),className:"text-sm"}),(0,n.jsx)("textarea",{value:N,onChange:function(e){return j(i,e.target.value)},placeholder:(0,w.__)("Add your insights or comments about this data...","burst-statistics"),className:"w-full min-h-[80px] p-2 text-sm text-gray-600 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-y",rows:3}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,w.__)("This comment will appear next to the block in the report.","burst-statistics")})]})]})]}),(0,n.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{type:"button",onClick:function(){return f(i)},className:"p-2 rounded-md hover:bg-gray-200 text-gray-600 hover:text-gray-900 transition-all focus:ring-2 focus:ring-gray-400 focus:ring-inset","aria-label":(0,w.__)("Move block up","burst-statistics"),title:(0,w.__)("Move block up","burst-statistics"),children:(0,n.jsx)(H.A,{name:"chevron-up",size:16})}),(0,n.jsx)("button",{type:"button",onClick:function(){return p(i)},className:"p-2 rounded-md hover:bg-gray-200 text-gray-600 hover:text-gray-900 transition-all focus:ring-2 focus:ring-gray-400 focus:ring-inset","aria-label":(0,w.__)("Move block down","burst-statistics"),title:(0,w.__)("Move block down","burst-statistics"),children:(0,n.jsx)(H.A,{name:"chevron-down",size:16})})]}),(0,n.jsxs)("button",{type:"button",onClick:function(){u(i),b(null)},className:"flex items-center gap-1.5 px-3 py-2 rounded-md text-sm text-red-600 hover:bg-red-50 hover:text-red-700 transition-all focus:ring-2 focus:ring-red-500 focus:ring-inset","aria-label":(0,w.__)("Delete block","burst-statistics"),children:[(0,n.jsx)(H.A,{name:"trash",size:14}),(0,n.jsx)("span",{children:(0,w.__)("Delete","burst-statistics")})]})]})})]}):null},ke=function(e){var t=e.className,r=(0,J.c)(function(e){return e.wizard.content}),i=(0,J.c)(function(e){return e}),a=i.getStartDate,o=i.getEndDate,l=i.getFilters,c=i.isEditingMode,u=(0,J.c)(function(e){return e.selectedBlockIndex}),d=(0,J.c)(function(e){return e.setSelectedBlockIndex}),f=(0,X.z)(function(e){return e.availableContent}),p=(0,s.useRef)(null),b=(0,s.useRef)(null),m=(0,s.useRef)(r.length),h=c&&null!==u;return(0,s.useEffect)(function(){r.length>m.current&&b.current&&b.current.scrollTo({top:b.current.scrollHeight,behavior:"smooth"}),m.current=r.length},[r.length]),(0,n.jsxs)("div",{ref:p,className:"flex h-full ".concat(t||""),children:[(0,n.jsxs)("div",{ref:b,"data-preview-container":!0,className:"flex-1 overflow-y-auto burst-scroll py-4 px-6 transition-all duration-300",onClick:function(e){e.target!==e.currentTarget&&e.target.closest("[data-preview-container]")!==e.currentTarget||d(null)},children:[r.map(function(e,t){var r=f.find(function(t){return t.id===e.id});return(null==r?void 0:r.component)?(0,n.jsx)(pe,{isEditingMode:c,block:e,reportBlockIndex:t,blockConfig:r,startDate:a(t),endDate:o(t),filters:l(t),isSelected:u===t},"".concat(e.id,"-").concat(t)):null}),0===r.length&&(0,n.jsx)("p",{className:"text-gray-500 text-center",children:(0,w.__)("Select content to see preview","burst-statistics")})]}),(0,n.jsx)(le.N,{children:h&&(0,n.jsx)(Ne,{reportBlockIndex:u})})]})},Oe=function(){var e=(0,J.c)(function(e){return e.wizard.format}),t=(0,J.c)(function(e){return e.isEditingMode});return(0,n.jsxs)("div",{className:"relative max-xl:hidden flex flex-col items-stretch justify-stretch bg-wp-gray rounded-t-2xl flex-auto border border-b-0 border-gray-500 mr-8 overflow-hidden group/root shadow-layered-low-b",children:[(0,n.jsx)("div",{className:"py-4 px-6 z-[1] w-full flex items-center justify-between shadow-layered-low-b bg-gray-50",children:(0,n.jsx)("p",{className:"text-gray-600 text-sm font-semibold uppercase tracking-[0.05em]",children:t?(0,w.__)("Editor","burst-statistics"):(0,w.__)("Live preview","burst-statistics")})}),"classic"===e?(0,n.jsx)(oe,{className:"relative flex-1 min-h-0 py-4 px-6 h-full overflow-y-auto burst-scroll"}):(0,n.jsx)(ke,{className:"relative flex-1 min-h-0 h-full"})]})},Se=r(75111),Ae=r(88511),Ce=function(){var e=(0,X.z)(function(e){return e.formats}),t=(0,J.c)(function(e){return e.wizard.format}),r=(0,J.c)(function(e){return e.setFormat}),s={},i=(0,(0,Ae.A)().isLicenseValidFor)("reporting");return e.forEach(function(e){s[e.key]={type:e.key,label:e.label,disabled:e.disabled&&!i,pro:e.pro&&!i}}),(0,n.jsx)(f.A,{label:(0,w.__)("Choose the report format","burst-statistics"),inputId:"report-format",help:(0,w.__)("The classic format will be sent as an email. This does not allow much customization and is best suited for a quick regular update on your websites performance. The story format will create an shareable page on this website. This allows for more customization and allows you to create a fully custom report that can be shared with your team or clients. This report can also be downloaded as a PDF file.","burst-statistics"),context:(0,w.__)("A classic report will be sent by the email. A story report will create a report on this website, which you can choose to share with your team or clients.","burst-statistics"),children:(0,n.jsx)(Se.A,{inputId:"report-format",options:s,value:t,onChange:function(e){var n;(n=e)!==t&&r(n)}})})},Pe=r(56823),Re=function(){var e=(0,J.c)(function(e){return e.wizard.scheduled}),t=(0,J.c)(function(e){return e.setScheduled}),r=(0,J.c)(function(e){return e.wizard.frequency}),i=(0,J.c)(function(e){return e.setFrequency}),a=(0,J.c)(function(e){return e.wizard.dayOfWeek}),o=(0,J.c)(function(e){return e.setDayOfWeek}),l=(0,J.c)(function(e){return e.wizard.weekOfMonth}),c=(0,J.c)(function(e){return e.setWeekOfMonth}),u=(0,J.c)(function(e){return e.wizard.sendTime}),d=(0,J.c)(function(e){return e.setSendTime}),p=(0,J.c)(function(e){return e.wizard.reportDateRange}),b=(0,J.c)(function(e){return e.setDateRange}),m=(0,J.c)(function(e){return e.getParsedDateRangeValue}),h=(0,X.z)(function(e){return e.frequencyOptions}),g=(0,X.z)(function(e){return e.dayOptions}),x=(0,X.z)(function(e){return e.getTimeOptions}),v=(0,X.z)(function(e){return e.getMonthlyWeekdayOptions}),y=x(),j=v().map(function(e){return{value:""+e.value,label:e.label}}),_={};_.yes={type:"yes",label:(0,w.__)("Yes","burst-statistics")},_.no={type:"no",label:(0,w.__)("No","burst-statistics")};var N=(0,s.useMemo)(function(){return m(p)},[p,m]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.A,{label:(0,w.__)("Create a recurring scheduled report?","burst-statistics"),inputId:"report-scheduled",context:"",children:(0,n.jsx)(Se.A,{value:e?"yes":"no",inputId:"report-schedule",options:_,onChange:function(e){return t("yes"===e)}})}),!e&&(0,n.jsx)(f.A,{label:(0,w.__)("What date range do you want to report on?","burst-statistics"),inputId:"report-date-range",context:"",children:(0,n.jsx)(we,{value:N,align:"start",onChange:function(e,t,r){var n="custom"===e?"custom:".concat(t,":").concat(r):e;b(n,-1)}})}),e&&(0,n.jsx)(f.A,{label:(0,w.__)("Frequency","burst-statistics"),inputId:"report-schedule",context:"",children:(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm",children:[(0,n.jsx)("span",{className:"text-base font-semibold",children:(0,w.__)("Deliver","burst-statistics")}),(0,n.jsx)(Pe.A,{value:r,onChange:function(e){"daily"===e?(o(void 0),c(void 0)):"weekly"===e?(c(void 0),o("monday")):"monthly"===e&&(c(1),o("monday")),i(e)},options:h}),("monthly"===r||"weekly"===r)&&(0,n.jsx)("span",{className:"text-base font-semibold",children:(0,w.__)("on every","burst-statistics")}),"monthly"===r&&(0,n.jsx)(Pe.A,{value:""+l,onChange:function(e){return c(parseInt(e))},options:j}),"daily"!==r&&(0,n.jsx)(Pe.A,{value:a,onChange:function(e){return o(e)},options:g}),(0,n.jsx)("span",{className:"text-base font-semibold",children:(0,w.__)("at","burst-statistics")}),(0,n.jsx)(Pe.A,{value:u,onChange:function(e){return d(e)},options:y})]})})]})},Ie=r(717);const Ee=(0,s.memo)(function(){var e,t,r=(0,X.z)(function(e){return e.availableContent}),i=(0,J.c)(function(e){return e.wizard.content}),a=(0,J.c)(function(e){return e.addContent}),o=(0,J.c)(function(e){return e.removeContent}),l=(null===(e=window.burst_settings)||void 0===e?void 0:e.shouldLoadEcommerce)||!1,c=(0,Ae.A)(),d=c.isPro,p=c.isLicenseValid,b=(0,s.useRef)(!0),m=(0,u.xW)(),h=m.register,g=m.setValue,x=m.formState.errors;(0,s.useEffect)(function(){h("content",{value:i,validate:function(e){return 0<e.length||(0,w.__)("Please select at least one content item","burst-statistics")}})},[h,i]),(0,s.useEffect)(function(){b.current?b.current=!1:g("content",i,{shouldValidate:!!x.content})},[i,g]);var v=function(e){if(!e.pro||p&&d){var t=i.findIndex(function(t){return t.id===e.id});-1===t?a(e.id):o(t)}};return(0,n.jsx)(f.A,{error:null===(t=x.content)||void 0===t?void 0:t.message,label:"",inputId:"content_selection",fullWidthContent:!0,className:"!pt-0 !px-0",children:(0,n.jsx)("div",{className:"flex flex-col gap-3 py-4",children:r.filter(function(e){return!e.ecommerce||l}).filter(function(e){return!e.component}).map(function(e,t){var r,s=(r=e.id,i.some(function(e){return e.id===r})),a=e.pro&&(!p||!d);return(0,n.jsxs)("div",{onClick:function(){return v(e)},className:"\n\t\t\t\t\t\t\t\t\t\tflex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all\n\t\t\t\t\t\t\t\t\t\t".concat(s?"border-brand bg-brand/5":"border-gray-200 hover:border-gray-300 bg-white","\n\t\t\t\t\t\t\t\t\t\t").concat(a?"opacity-50 cursor-not-allowed":"hover:bg-gray-50","\n\t\t\t\t\t\t\t\t\t"),children:[e.icon&&(0,n.jsx)("div",{className:"flex-shrink-0 ".concat(s?"text-brand":"text-gray-600"),children:(0,n.jsx)(H.A,{name:e.icon,size:18})}),(0,n.jsx)("label",{htmlFor:e.id,className:"flex-1 text-sm text-gray-700 cursor-pointer",children:e.label}),e.pro&&!p&&(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(Ie.A,{label:"Pro"})}),(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("input",{type:"checkbox",id:e.id,checked:s,onChange:function(){v(e)},onClick:function(e){e.stopPropagation()},className:"h-4 w-4 text-brand border-gray-300 rounded focus:ring-2 focus:ring-blue-500",disabled:a})})]},t)})})})});var ze=function(){return(0,n.jsx)("div",{className:"px-6 py-2",children:(0,n.jsx)(Ee,{})})};const Fe=(0,s.memo)(function(){var e,t,r=(0,X.z)(function(e){return e.availableContent}),i=(0,J.c)(function(e){return e.wizard.content}),a=(0,J.c)(function(e){return e.addContent}),o=(null===(e=window.burst_settings)||void 0===e?void 0:e.shouldLoadEcommerce)||!1,l=(0,Ae.A)().isLicenseValid,c=(0,s.useRef)(!0),d=(0,s.useState)(null),p=d[0],b=d[1],m=(0,s.useRef)(null),h=(0,u.xW)(),g=h.register,x=h.setValue,v=h.formState.errors;return(0,s.useEffect)(function(){g("content",{value:i,validate:function(e){return 0<e.length||(0,w.__)("Please select at least one content item","burst-statistics")}})},[g,i]),(0,s.useEffect)(function(){c.current?c.current=!1:x("content",i,{shouldValidate:!!v.content})},[i,x]),(0,n.jsx)(f.A,{error:null===(t=v.content)||void 0===t?void 0:t.message,label:"",inputId:"content_selection",fullWidthContent:!0,className:"!pt-0 !px-0",children:(0,n.jsxs)("div",{ref:m,className:"relative grid grid-cols-2 gap-3 py-4",children:[r.filter(function(e){return!e.ecommerce||o}).filter(function(e){return e.component}).map(function(e,t){var s=e.pro&&!l;return(0,n.jsxs)("button",{type:"button",onClick:function(t){s||function(e,t){var n,s=r.find(function(t){return t.id===e});if(s&&(!s.pro||l)){var i=t.currentTarget.getBoundingClientRect(),o=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect();o&&(b({block:s,startX:i.left-o.left,startY:i.top-o.top}),setTimeout(function(){b(null)},600)),a(e)}}(e.id,t)},className:"\n\t\t\t\t\t\t\t\t\t\tflex flex-col items-center gap-3 p-4 bg-white rounded-lg ring-1 ring-gray-400 cursor-pointer transition-all shadow-layered-low-b\n\t\t\t\t\t\t\t\t\t\t".concat(s?"opacity-50 cursor-not-allowed":"hover:ring-gray-500 hover:scale-105 hover:shadow-layered-mid-b","\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t"),children:[e.icon&&(0,n.jsx)("div",{className:"flex-shrink-0 text-gray-600",children:(0,n.jsx)(H.A,{name:e.icon,size:18})}),(0,n.jsx)("p",{className:"flex-1 text-sm text-gray-700 cursor-pointer",children:e.label}),e.pro&&!l&&(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)(Ie.A,{label:"Pro"})})]},t)}),(0,n.jsx)(le.N,{children:p&&(0,n.jsxs)(Z.P.div,{initial:{position:"absolute",left:p.startX,top:p.startY,opacity:1,scale:1,zIndex:150},animate:{left:"200%",top:"100%",opacity:0,scale:.5},exit:{opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"flex flex-col items-center gap-3 p-4 bg-white rounded-lg ring-1 ring-gray-400 shadow-layered-mid-b pointer-events-none z-10",style:{width:"calc(50% - 6px)"},children:[p.block.icon&&(0,n.jsx)("div",{className:"flex-shrink-0 text-gray-600",children:(0,n.jsx)(H.A,{name:p.block.icon,size:18})}),(0,n.jsx)("p",{className:"flex-1 text-sm text-gray-700",children:p.block.label})]})})]})})});var De=r(96169),Le=r(33454),Te=function(){var e=(0,J.c)(function(e){return e.wizard.content}),t=(0,J.c)(function(e){return e.removeContent}),r=(0,J.c)(function(e){return e.reorderContent}),s=(0,J.c)(function(e){return e.selectedBlockIndex}),i=(0,J.c)(function(e){return e.setSelectedBlockIndex}),a=(0,X.z)(function(e){return e.availableContent}),o=function(e){i(e)};return 0===e.length?(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 px-6",children:[(0,n.jsx)("div",{className:"w-16 h-16 mb-4 flex items-center justify-center rounded-full bg-gray-100",children:(0,n.jsx)(H.A,{name:"file-alt",size:24,className:"text-gray-400"})}),(0,n.jsx)("p",{className:"text-gray-500 text-center text-sm",children:(0,w.__)("No content selected yet. Add content blocks to get started.","burst-statistics")})]}):(0,n.jsxs)("div",{className:"py-4",children:[(0,n.jsx)(De.x,{axis:"y",values:e,onReorder:r,className:"space-y-2",children:e.map(function(e,r){var i,l=(i=e.id,a.find(function(e){return e.id===i})),c=s===r,u=c?"border-gray-400":"border-gray-200 group-hover:border-gray-300";return(0,n.jsx)(Le.N,{value:e,className:"group relative",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{type:"spring",stiffness:500,damping:35},whileDrag:{scale:1.03,rotate:1,zIndex:10,boxShadow:"0 10px 30px -10px rgba(0, 0, 0, 0.2)",cursor:"grabbing"},dragTransition:{bounceStiffness:600,bounceDamping:20},style:{cursor:"grab"},children:(0,n.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-white rounded-lg border-2 transition-colors cursor-pointer ".concat(u),onClick:function(){return o(r)},role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o(r))},"aria-pressed":c,"aria-label":(0,w.__)("Select block","burst-statistics"),children:[(0,n.jsx)("div",{className:"flex items-center gap-1 opacity-30 group-hover:opacity-60 transition-colors touch-none",children:(0,n.jsx)(H.A,{name:"grip-vertical",size:16,color:"black"})}),(null==l?void 0:l.icon)&&(0,n.jsx)("div",{className:"flex-shrink-0 text-gray-600",children:(0,n.jsx)(H.A,{name:l.icon,size:18})}),(0,n.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-700",children:(null==l?void 0:l.label)||e.id}),(e.comment_title||e.comment_text)&&(0,n.jsx)("span",{className:"text-xs text-gray-400 italic",title:e.comment_text,children:(0,w.__)("(has comment)","burst-statistics")})]}),(0,n.jsx)("button",{type:"button",onClick:function(e){e.stopPropagation(),t(r)},className:"p-2 rounded-md hover:bg-red-50 text-gray-600 hover:text-red-600 transition-all opacity-0 group-hover:opacity-100 focus:ring-2 focus:ring-red-500 focus:ring-inset focus:opacity-100","aria-label":(0,w.__)("Remove","burst-statistics"),title:(0,w.__)("Remove","burst-statistics"),children:(0,n.jsx)(H.A,{name:"trash",size:14})})]})},e.id)})}),(0,n.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,n.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[e.length," ",1===e.length?(0,w.__)("content block","burst-statistics"):(0,w.__)("content blocks","burst-statistics")]})})]})},Me=r(91995),Ve=function(){return(0,n.jsxs)("div",{className:"px-6 py-2",children:[(0,n.jsx)(Me.j7,{className:"sticky top-0 z-10",tabConfig:[{id:"add-content",title:(0,w.__)("Add content","burst-statistics")},{id:"list-view",title:(0,w.__)("List view","burst-statistics")}],tabGroup:"report-wizard-content"}),(0,n.jsx)(Me.av,{group:"report-wizard-content",id:"add-content",children:(0,n.jsx)(Fe,{})}),(0,n.jsx)(Me.av,{group:"report-wizard-content",id:"list-view",children:(0,n.jsx)(Te,{})})]})},Be=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},We=(0,s.forwardRef)(function(e,t){var r=e.value,i=e.onChange,a=e.name,o=e.disabled,l=void 0!==o&&o,c=e.placeholder,u=void 0===c?(0,w.__)("Add email...","burst-statistics"):c,d=e.maxSelections,f=void 0===d?10:d,p=e.showRemoveButton,b=void 0===p||p,m=(0,s.useState)(""),h=m[0],g=m[1],x=function(e){var t=e.trim();t&&(i(Be(Be([],r,!0),[t],!1)),g(""))};return(0,n.jsxs)("div",{className:"flex min-h-[2.5rem] w-full rounded-md border border-gray-400 bg-white focus-within:border-primary-dark focus-within:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-wrap items-center gap-1 p-1",children:[r.map(function(e,t){return(0,n.jsxs)("span",{className:"flex items-center gap-1 rounded bg-primary-light px-2 py-1 text-base text-primary-dark",children:[e,b&&(0,n.jsx)("button",{type:"button",onClick:function(){return function(e){i(r.filter(function(t){return t!==e}))}(e)},className:"ml-1 rounded-full hover:bg-primary hover:text-white",children:"✕"})]},"".concat(e,"-").concat(t))}),(!f||r.length<f)&&(0,n.jsx)("input",{ref:t,name:a,value:h,disabled:l,placeholder:0===r.length?u:"",onChange:function(e){g(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),x(h)),"Backspace"===e.key&&0===h.length&&0<r.length&&(e.preventDefault(),i(r.slice(0,-1)))},onBlur:function(){h.trim()&&x(h)},className:"flex-1 min-w-[120px] bg-transparent p-1 text-base outline-none disabled:cursor-not-allowed"})]}),f&&(0,n.jsx)("div",{className:"flex items-center border-l border-gray-300",children:(0,n.jsxs)("span",{className:"px-2 text-xs text-gray-500 border-r border-gray-200",children:[r.length,"/",f]})})]})});We.displayName="EmailSelectInput";var qe=function(e){var t=e.trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)},Ue=function(){var e,t=(0,J.c)(function(e){return e.wizard.recipients}),r=(0,J.c)(function(e){return e.setRecipients}),i=(0,s.useRef)(!0),a=(0,u.xW)(),o=a.register,l=a.setValue,c=a.formState.errors;return(0,s.useEffect)(function(){o("recipients",{value:t,validate:{required:function(e){return 0<e.length||(0,w.__)("Please add at least one recipient","burst-statistics")},max:function(e){return e.length<=100||(0,w.sprintf)((0,w.__)("Maximum %d recipients allowed","burst-statistics"),100)},format:function(e){return e.every(qe)||(0,w.__)("One or more email addresses are invalid","burst-statistics")},unique:function(e){return new Set(e).size===e.length||(0,w.__)("Duplicate email addresses are not allowed","burst-statistics")}}})},[o]),(0,s.useEffect)(function(){i.current?i.current=!1:l("recipients",t,{shouldValidate:!0})},[t,l]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"burst-reporting-wizard-gutter",children:(0,n.jsx)("p",{className:"text-lg font-semibold",children:(0,w.__)("Recipients","burst-statistics")})}),(0,n.jsxs)(f.A,{label:"",inputId:"recipients",error:null===(e=c.recipients)||void 0===e?void 0:e.message,fullWidthContent:!0,className:"burst-reporting-wizard-gutter !pt-0 mt-5",children:[(0,n.jsx)("p",{className:"text-black text-md font-semibold",children:(0,w.__)("Recipients","burst-statistics")}),(0,n.jsx)("div",{className:"mt-3",children:(0,n.jsx)(We,{value:t,name:"recipients",maxSelections:100,onChange:function(e){r(e)}})})]})]})},Ge=r(80762),Ke=function(e){var t=e.reportId,r=(0,Q._)(function(e){return e.openPreview}),s=(0,Q._)(function(e){return e.generateStoryUrl}),i=(0,Q._)(function(e){return e.isGenerating}),a=(0,Ae.A)().isLicenseValidFor;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(C.A,{disabled:!a("share-link-advanced"),onClick:function(){return e=void 0,r=void 0,i=function(){var e;return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(r){switch(r.label){case 0:return[4,s(t)];case 1:return(e=r.sent())&&0<e.length?[4,(0,Ge.l)(e)]:[3,3];case 2:r.sent(),T.oR.success((0,w.__)("Link created and copied to clipboard!","burst-statistics")),r.label=3;case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(t,s){function a(e){try{l(i.next(e))}catch(e){s(e)}}function o(e){try{l(i.throw(e))}catch(e){s(e)}}function l(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(a,o)}l((i=i.apply(e,r||[])).next())});var e,r,n,i},btnVariant:"tertiary",className:"flex items-center gap-2 !px-3 py-1.5 h-fit text-sm leading-none text-gray bg-gray-100 border border-gray-400 rounded-md hover:bg-gray-50 transition-colors",children:[i&&(0,n.jsx)(H.A,{name:"loading",size:14,color:"gray"}),(0,w.__)("Copy URL","burst-statistics")]}),(0,n.jsxs)(C.A,{disabled:!a("share-link-advanced"),onClick:function(){return r(t,!0)},btnVariant:"tertiary",className:"flex items-center gap-2 !px-3 py-1.5 h-fit text-sm leading-none text-gray bg-gray-100 border border-gray-400 rounded-md hover:bg-gray-50 transition-colors",children:[i&&(0,n.jsx)(H.A,{name:"loading",size:14,color:"gray"}),(0,w.__)("Download PDF","burst-statistics")]})]})},$e=function(){var e=(0,J.c)(function(e){return e.wizard.id}),t=(0,J.c)(function(e){return e.wizard.scheduled}),r=(0,J.c)(function(e){return e.wizard.format}),s=(0,J.c)(function(e){return e.wizard.frequency}),i=(0,J.c)(function(e){return e.wizard.dayOfWeek}),a=(0,J.c)(function(e){return e.wizard.weekOfMonth}),o=(0,J.c)(function(e){return e.wizard.sendTime}),l=(0,J.c)(function(e){return e.wizard.recipients}),c=(0,J.c)(function(e){return e.wizard.content}),u=(0,X.z)(function(e){return e.getScheduleLabel}),d=(0,X.z)(function(e){return e.availableContent}),f=function(e){var t=d.find(function(t){return t.id===e});if(t)return t.label};return(0,n.jsxs)("div",{className:"mt-8 grid grid-cols-[auto_1fr] gap-4 text-md burst-reporting-wizard-gutter",children:[t&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-gray-600 font-medium",children:(0,w.__)("Delivers:","burst-statistics")}),(0,n.jsx)("div",{className:"text-black font-medium",children:t?(0,w.__)("Scheduled email, sent automatically","burst-statistics"):(0,w.__)("Manual download","burst-statistics")}),(0,n.jsx)("div",{className:"text-gray-600 font-medium",children:(0,w.__)("Scheduled:","burst-statistics")}),(0,n.jsx)("div",{className:"text-black font-medium",children:u(t,s,i,a,o)})]}),(0,n.jsx)("div",{className:"text-gray-600 font-medium",children:(0,w.__)("Recipients:","burst-statistics")}),(0,n.jsx)("div",{className:"text-black font-medium",children:0<l.length?(0,n.jsx)("ul",{className:"list-disc list-inside",children:l.map(function(e,t){return(0,n.jsx)("li",{className:"text-md m-0",children:e},t)})}):(0,n.jsx)("span",{className:"text-md",children:(0,w.__)("No recipients added","burst-statistics")})}),(0,n.jsx)("div",{className:"text-gray-600 font-medium",children:(0,w.__)("Content:","burst-statistics")}),(0,n.jsx)("div",{className:"text-black font-medium",children:0<c.length?(0,n.jsx)("ul",{className:"list-disc list-inside",children:c.map(function(e,t){return(0,n.jsx)("li",{className:"text-md m-0",children:f(e.id)},t)})}):(0,n.jsx)("span",{className:"text-md",children:(0,w.__)("No content selected","burst-statistics")})}),e?(0,n.jsx)(n.Fragment,{children:"story"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"text-gray-600 font-medium",children:(0,w.__)("Story URL:","burst-statistics")}),(0,n.jsx)("div",{className:"flex gap-2.5",children:(0,n.jsx)(Ke,{reportId:e})})]})}):null]})},He=(0,w.__)("Untitled report","burst-statistics"),Ye=function(){var e,t,r=(0,J.c)(function(e){return e.wizard.name}),i=(0,J.c)(function(e){return e.setReportName}),a=(0,s.useState)(!1),o=a[0],l=a[1],c=(0,s.useRef)(null),d=(0,s.useRef)(!0),f=(0,u.xW)(),p=f.register,b=f.setValue,m=f.formState.errors,h=r||He,g=!r||r===He;return(0,s.useEffect)(function(){p("reportName",{required:(0,w.__)("Report name is required","burst-statistics"),value:r,minLength:{value:3,message:(0,w.__)("Report name must be at least 3 characters","burst-statistics")}})},[p]),(0,s.useEffect)(function(){d.current?d.current=!1:b("reportName",r,{shouldValidate:!!m.reportName})},[r,b]),(0,s.useEffect)(function(){o&&c.current&&(c.current.focus(),c.current.select())},[o]),o?(0,n.jsxs)("div",{className:"flex flex-col min-w-[150px]",children:[(0,n.jsx)("input",{ref:c,type:"text",value:r,onChange:function(e){i(e.target.value)},onBlur:function(){l(!1),r.trim()||i("")},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),l(!1),r.trim()||i("")),"Escape"===e.key&&l(!1)},className:"w-full text-lg font-semibold rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",placeholder:(0,w.__)("Untitled report","burst-statistics")}),(null===(e=m.reportName)||void 0===e?void 0:e.message)&&(0,n.jsx)("span",{className:"text-red text-sm mt-1",children:m.reportName.message})]}):(0,n.jsxs)("div",{className:"flex flex-col min-w-[150px] truncate",children:[(0,n.jsxs)("button",{type:"button",onClick:function(){l(!0)},className:(0,ee.$)("flex items-center gap-2 text-lg font-semibold text-left transition-colors group p-2 border border-transparent rounded-md hover:border-gray-400",g?"text-gray-500 italic":"text-black"),children:[(0,n.jsx)("span",{className:"truncate",children:h}),(0,n.jsx)(H.A,{name:"pencil",size:14,color:g?"gray":"black",className:"opacity-60 group-hover:opacity-100 transition-opacity"})]}),(null===(t=m.reportName)||void 0===t?void 0:t.message)&&(0,n.jsx)("span",{className:"text-red text-sm mt-1",children:m.reportName.message})]})},Qe=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},Je=function(e){var t=e.row,r=(0,s.useState)(!1),a=r[0],o=r[1],l=(0,J.c)(function(e){return e.wizard}),c=(0,J.c)(function(e){return e.setCurrentStep}),u=(0,Q._)(function(e){return e.loadReportIntoWizard}),d=(0,Q._)(function(e){return e.deleteReport}),f=(0,Q._)(function(e){return e.duplicateReport}),p=(0,Q._)(function(e){return e.duplicateAndLoadReportIntoWizard}),b=(0,Q._)(function(e){return e.sendTestEmail}),m=(0,Q._)(function(e){return e.sendEmailNow}),h=(0,Q._)(function(e){return e.openPreview}),g=(0,(0,Ae.A)().isLicenseValidFor)("reporting"),x=Qe(Qe(Qe([{label:(0,w.__)("Edit","burst-statistics"),action:function(){u(t.id,!0),c(4)},hidden:null!==l.id},{label:(0,w.__)("Duplicate","burst-statistics"),action:function(){f(t.id).then(function(e){e?T.oR.success((0,w.__)("Report duplicated successfully","burst-statistics")):T.oR.error((0,w.__)("Failed to duplicate report","burst-statistics"))})}},{label:(0,w.__)("Duplicate and edit","burst-statistics"),action:function(){p(t.id).then(function(e){e?c(4):T.oR.error((0,w.__)("Failed to duplicate report","burst-statistics"))})},divider:!0}],t&&t.format&&"story"===t.format?[{label:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,w.__)("Open story in a new tab","burst-statistics"),!g&&(0,n.jsx)(Ie.A,{id:"reporting",label:(0,w.__)("Pro","burst-statistics")})]}),action:function(){return h(t.id,!1)},divider:!1,disabled:!g}]:[],!0),t&&t.format&&"story"===t.format?[{label:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,w.__)("Download PDF","burst-statistics"),!g&&(0,n.jsx)(Ie.A,{id:"reporting",label:(0,w.__)("Pro","burst-statistics")})]}),action:function(){return h(t.id,!0)},divider:!0,disabled:!g}]:[],!0),[{label:(0,w.__)("Send now","burst-statistics"),action:function(){m(t.id).then(function(e){e?T.oR.success((0,w.__)("Email sending has been started.","burst-statistics")):T.oR.error((0,w.__)("Failed to start email sending.","burst-statistics"))})}},{label:(0,w.__)("Send test email","burst-statistics"),action:function(){b(t.id).then(function(e){e?T.oR.success((0,w.__)("Test email sending has been started.","burst-statistics")):T.oR.error((0,w.__)("Failed to start test email sending.","burst-statistics"))})},divider:!0},{label:(0,w.__)("Delete","burst-statistics"),action:function(){d(t.id).then(function(e){J.c.getState().isOpen&&J.c.getState().closeWizard(),e?T.oR.success((0,w.__)("Report deleted successfully","burst-statistics")):T.oR.error((0,w.__)("Failed to delete report","burst-statistics"))})},danger:!0}],!1);return(0,n.jsxs)(xe.bL,{open:a,onOpenChange:o,children:[(0,n.jsx)(xe.l9,{asChild:!0,children:(0,n.jsx)("button",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",children:(0,n.jsx)(H.A,{name:"ellipsis"})})}),(0,n.jsx)(xe.UC,{className:"z-[200] min-w-[200px] rounded-lg border border-gray-200 bg-white shadow-xl",align:"end",sideOffset:8,children:(0,n.jsx)("div",{className:"flex flex-col",children:x.filter(function(e){return!e.hidden}).map(function(e,t){var r=0===t,s=t===x.length-1,a=r?"rounded-t-lg":s?"rounded-b-lg":"";return(0,n.jsxs)(i().Fragment,{children:[(0,n.jsx)("button",{onClick:function(t){t.preventDefault(),function(e){e.disabled||(e.action(),o(!1))}(e)},disabled:e.disabled,className:"w-full text-left pl-6 pr-8 py-3 text-base transition-colors ".concat(a," ").concat(e.disabled?"text-gray-400 cursor-not-allowed opacity-50":e.danger?"text-red-600 hover:bg-red-50":"text-gray-900 hover:bg-gray-50"),children:e.label}),e.divider&&!s&&(0,n.jsx)("div",{className:"border-t border-gray-200 my-1 ml-6 mr-8"})]},t)})})})]})},Xe=function(){return Xe=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Xe.apply(this,arguments)},Ze={1:function(){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ce,{}),(0,n.jsx)(Re,{})]})},2:function(){return"story"===(0,J.c)(function(e){return e.wizard.format})?(0,n.jsx)(Ve,{}):(0,n.jsx)(ze,{})},3:function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Ue,{})})},4:function(){return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)($e,{})})}};const et=function(){var e=(0,J.c)(function(e){return e.wizard.currentStep}),t=(0,J.c)(function(e){return e.wizard.id}),r=(0,J.c)(function(e){return e.closeWizard}),i=(0,J.c)(function(e){return e.isEditingMode}),a=(0,X.z)(function(e){return e.steps}),o=(0,Q._)(function(e){return e.reports}).find(function(e){return e.id===t}),l=(0,s.useRef)(e),c=e>l.current?1:-1;l.current=e;var d={enter:function(e){return{opacity:0,x:0<e?40:-40}},center:{opacity:1,x:0},exit:function(e){return{opacity:0,x:0<e?-40:40}}},f=(0,u.mN)({mode:"onSubmit",reValidateMode:"onChange",shouldUnregister:!0,shouldFocusError:!0});return(0,n.jsx)(u.Op,Xe({},f,{children:(0,n.jsx)(Z.P.div,{id:"report-wizard-modal",className:"fixed inset-0 left-[160px] max-[960px]:left-9 max-[782px]:left-0 z-50 bg-gray-800 bg-opacity-90 flex items-end justify-center px-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},children:(0,n.jsx)(Z.P.div,{initial:{opacity:0,y:500,scale:.7},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:500,scale:.7},transition:{delay:.1,y:{type:"spring",stiffness:135,damping:18,mass:.45},opacity:{duration:.18,ease:"easeOut"}},className:"w-full h-[96vh] max-h-[96vh] max-w-screen-2xl",children:(0,n.jsxs)("div",{className:"h-full bg-gray-100 rounded-t-2xl shadow-2xl overflow-hidden flex flex-col",children:[(0,n.jsxs)("div",{className:"grid grid-cols-12 items-center justify-between gap-4 px-6 py-4",children:[(0,n.jsx)("div",{className:"col-span-3",children:(0,n.jsx)(Ye,{})}),(0,n.jsx)("div",{className:"col-span-6",children:(0,n.jsx)(te,{})}),(0,n.jsxs)("div",{className:"col-span-3 flex items-center justify-end gap-3",children:[!o||null!==o.id&&(0,n.jsx)(Je,{row:o}),(0,n.jsx)("button",{type:"button",className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2",onClick:function(){r()},"aria-label":(0,w.__)("Close","burst-statistics"),children:(0,n.jsx)(H.A,{name:"times"})})]})]}),(0,n.jsxs)("div",{className:"flex flex-1 min-h-0 overflow-x-hidden",children:[(0,n.jsx)("div",{className:"".concat(i?"basis-1/5":"basis-2/5"," flex flex-col gap-8 max-xl:basis-full min-h-0 transition-all duration-300 ease-in-out"),children:(0,n.jsx)("div",{className:"flex flex-col flex-1 min-h-0 overflow-y-auto overflow-x-hidden burst-scroll",children:(0,n.jsx)(le.N,{mode:"wait",custom:c,children:a.map(function(t){var r=Ze[t.number];return r&&e===t.number?(0,n.jsx)(Z.P.div,{custom:c,variants:d,initial:"enter",animate:"center",exit:"exit",transition:{duration:.35,ease:[.16,1,.3,1]},children:(0,n.jsx)(r,{})},"step".concat(t.number,"-content")):null})})})}),(0,n.jsx)("div",{className:"".concat(i?"basis-4/5":"basis-3/5"," flex flex-col min-h-0 pt-4 overflow-hidden transition-all duration-300 ease-in-out"),children:(0,n.jsx)(Oe,{})})]}),(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(se,{})})]})})})}))};var tt=r(84696);function rt(){return e=this,t=void 0,n=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,M.Q4)()];case 1:return[2,e.sent().data.reports.map(function(e){var t=Array.isArray(e.content)?e.content:[],r=e.frequency,n="string"==typeof e.dayOfWeek&&0<e.dayOfWeek.length,s=null!==e.weekOfMonth&&void 0!==e.weekOfMonth;return{id:Number(e.id),reportDateRange:e.reportDateRange,name:String(e.name),format:e.format,enabled:Boolean(e.enabled),lastEdit:Number(e.lastEdit),content:t,recipients:e.recipients,scheduled:Boolean(e.scheduled),frequency:r,fixedEndDate:String(e.fixedEndDate),lastSendStatus:e.lastSendStatus,lastSendMessage:e.lastSendMessage,dayOfWeek:n&&"daily"!==r?e.dayOfWeek:void 0,weekOfMonth:"monthly"===r&&s?e.weekOfMonth:void 0,sendTime:e.sendTime}})]}})},new((r=void 0)||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())});var e,t,r,n}var nt=r(81698),st=function(){return st=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},st.apply(this,arguments)},it=(0,s.forwardRef)(function(e){var t,r=e.field,i=e.fieldState,a=e.help,o=e.context,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","help","context"]),c=l.id||r.name,u=(0,ie.I)({queryKey:["reports"],queryFn:function(){return e=void 0,t=void 0,n=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,rt()];case 1:return[2,e.sent()]}})},new((r=void 0)||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())});var e,t,r,n},refetchOnMount:"always"}),d=u.data,p=u.isFetching,b=(0,Q._)(function(e){return e.reports}),m=(0,Q._)(function(e){return e.setReports}),h=(0,Q._)(function(e){return e.toggleReportActive}),g=(0,Q._)(function(e){return e.loadReportIntoWizard}),x=(0,J.c)(function(e){return e.setCurrentStep}),v=(0,J.c)(function(e){return e.isOpen}),y=(0,X.z)(function(e){return e.formats}),j=(0,X.z)(function(e){return e.getScheduleLabel}),_=(0,X.z)(function(e){return e.reportLogStatusConfig}),N=(0,X.z)(function(e){return e.statusSeverityClasses});(0,s.useEffect)(function(){d&&m(d)},[d,m]);var k=[{name:(0,w.__)("Report name","burst-statistics"),selector:function(e){return e.name},cell:function(e){return(0,n.jsx)("button",{type:"button",onClick:function(){return t=e.id,g(t,!0),void x(4);var t},className:"",children:(0,n.jsx)(tt.M,{className:"text-left text-blue hover:text-blue-dark hover:underline font-semibold transition-colors cursor-pointer",children:e.name})})},sortable:!0,minWidth:"150px",maxWidth:"200px",grow:0},{name:(0,w.__)("Last status","burst-statistics"),cell:function(e){var t,r=(t=e.lastSendStatus)?_&&_[t]?_[t].severity?_[t].severity:(console.warn("Severity not found for status: ".concat(t)),"info"):(console.warn("Unknown status: ".concat(t)),"info"):(console.warn("No lastSendStatus found"),"info");return(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(N[r]),children:e.lastSendMessage})},sortable:!0,minWidth:"60px",maxWidth:"200px"},{name:(0,w.__)("Format","burst-statistics"),cell:function(e){var t,r=y.find(function(t){return t.key===e.format});return(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-light text-blue",children:null!==(t=null==r?void 0:r.label)&&void 0!==t?t:e.format})},sortable:!0,minWidth:"60px",maxWidth:"70px"},{name:(0,w.__)("Schedule","burst-statistics"),sortable:!0,grow:2,cell:function(e){return(0,n.jsx)(tt.M,{children:j(e.scheduled,e.frequency,e.dayOfWeek,e.weekOfMonth)})}},{name:(0,w.__)("Last edit","burst-statistics"),grow:2,cell:function(e){return(0,n.jsx)(tt.M,{children:e.lastEdit?(0,ge.ki)(new Date(1e3*e.lastEdit)):(0,w.__)("N/A","burst-statistics")})}},{name:"",right:!0,grow:0,width:"52px",cell:function(e){var t=e.scheduled,r=e.recipients&&0<e.recipients.length;return t&&r?(0,n.jsx)(Y.A,{content:e.enabled?(0,w.__)("This report is active and will be sent on schedule. Toggle to pause.","burst-statistics"):(0,w.__)("This report is paused. Toggle to activate and resume scheduled sending.","burst-statistics"),children:(0,n.jsx)("div",{children:(0,n.jsx)(E.A,{onChange:function(){return h(e.id)},checked:e.enabled})})}):null}},{name:"",right:!0,grow:0,width:"52px",cell:function(e){return(0,n.jsx)(Je,{row:e})}}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(f.A,st({help:a,error:null===(t=null==i?void 0:i.error)||void 0===t?void 0:t.message,context:o,inputId:c,fullWidthContent:!0,recommended:l.recommended,disabled:l.disabled},l,{label:"",children:[(0,n.jsx)("div",{className:"w-full lg:w-4/6 space-y-4",children:(0,n.jsx)("p",{className:"px-6 text-base text-black",children:(0,w.__)("Share Burst Insights with your team on a schedule that works for them. All reports are generated locally on your site and sent directly to your chosen emails.","burst-statistics")})}),(0,n.jsxs)("div",{className:"px-6 w-full space-y-4 flex flex-col mt-4",children:[(0,n.jsx)(C.A,{onClick:function(){return J.c.getState().resetWizard(),void J.c.getState().openWizard()},className:"mt-2 w-fit self-end",type:"button",children:(0,w.__)("New report","burst-statistics")}),p?(0,n.jsx)("p",{className:"text-center text-gray",children:(0,w.__)("Loading reports...","burst-statistics")}):(0,n.jsx)($.Ay,{noDataComponent:(0,n.jsx)(nt.A,{noData:0===b.length,data:[],isLoading:p,emptyStateMessage:(0,w.__)("There are no reports available.","burst-statistics")}),className:"burst-data-table no-custom-burst-style",pagination:!0,columns:k,data:b,sortIcon:(0,n.jsx)(H.A,{size:14,strokeWidth:1,className:"ml-1 h-3.5 w-3.5",name:"arrow-down-up"}),progressComponent:(0,n.jsx)(nt.A,{noData:0===b.length,data:[],isLoading:p}),customStyles:{headCells:{style:{fontWeight:"600",fontSize:"12px",color:"#1c252c",padding:0}},cells:{style:{padding:0}},headRow:{style:{paddingLeft:"0 !important",paddingRight:"0 !important",gap:"18px",fontSize:"12px"}},rows:{style:{paddingLeft:"0 !important",paddingRight:"0 !important",gap:"18px",fontSize:"12px"}}}})]})]})),(0,n.jsx)(le.N,{children:v&&(0,n.jsx)(et,{})})]})});it.displayName="ReportingField";const at=it;var ot=r(89668),lt=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const ct=(0,s.memo)(function(e){var t=e.indeterminate,r=e.label,i=e.value,a=e.id,o=e.onChange,l=e.required,c=e.disabled,u=e.options,d=void 0===u?{}:u,f=(0,s.useState)(!1),p=f[0],b=f[1],m=i;Array.isArray(m)||(m=""===m?[]:[m]);var h=1===Object.keys(d).length&&"true"===Object.keys(d)[0],g=!!t||i,x=Array.isArray(m)?m:[],v=Object.keys(d).length>10,y=function(){b(!p)},j=!(!c||Array.isArray(c))&&c;return 0===Object.keys(d).length?(0,n.jsx)(n.Fragment,{children:(0,w.__)("No options found","burst-statistics")}):(0,n.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object.entries(d).map(function(e,s){var i,u=e[0],d=e[1];return(0,n.jsxs)("div",{className:"".concat(!p&&s>9?"hidden":""," flex items-center"),children:[(0,n.jsx)(ot.bL,{className:"w-4 h-4 border border-gray-400 rounded flex-shrink-0 disabled:opacity-50",id:"".concat(a,"_").concat(u),checked:(i=u,h?g:x.includes(""+i)||x.includes(parseInt(i))),"aria-label":r,disabled:j||Array.isArray(c)&&c.includes(u),required:l,onCheckedChange:function(e){return function(e,t){if(h)o(!g);else{var r=x.includes(""+t)||x.includes(parseInt(t))?x.filter(function(e){return e!==""+t&&e!==parseInt(t)}):lt(lt([],x,!0),[t],!1);o(r)}}(0,u)},children:(0,n.jsx)(ot.C1,{className:"flex items-center justify-center",children:(0,n.jsx)(H.A,{name:t?"indeterminate":"check",size:14,color:"blue"})})}),(0,n.jsx)("label",{className:"ml-2",htmlFor:"".concat(a,"_").concat(u),children:d})]},u)}),v&&!p&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("button",{onClick:y,className:"underline w-fit",children:(0,w.__)("Show more","burst-statistics")})}),v&&p&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("button",{onClick:y,className:"underline w-fit",children:(0,w.__)("Show less","burst-statistics")})})]})});var ut=function(){return ut=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ut.apply(this,arguments)},dt=(0,s.forwardRef)(function(e,t){var r,s=e.field,i=e.fieldState,a=e.label,o=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),d=u.id||s.name;return(0,n.jsx)(f.A,ut({label:a,help:o,error:null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message,context:l,className:c,inputId:d,required:u.required,recommended:u.recommended,disabled:u.disabled},u,{children:(0,n.jsx)(ct,ut({},s,{id:d,label:a,ref:t},u))}))});dt.displayName="CheckboxGroupField";const ft=dt;var pt=r(42782),bt=r(22686),mt=function(){return mt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},mt.apply(this,arguments)},ht=(0,s.forwardRef)(function(e){var t,r=e.field,s=e.fieldState,i=e.label,a=e.help,o=e.context,l=e.className,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),u=c.id||r.name;return(0,n.jsx)(f.A,mt({label:i,help:a,error:null===(t=null==s?void 0:s.error)||void 0===t?void 0:t.message,context:o,className:l,inputId:u,required:c.required,recommended:c.recommended,disabled:c.disabled},c,{children:(0,n.jsx)(Se.A,mt({id:u,options:r.options,value:r.value,disabled:c.settingsIsUpdating||r.disabled,goalId:r.goal_id},c))}))});ht.displayName="RadioButtonsField";const gt=ht;var xt=r(53576),vt=r.n(xt),yt=r(93832),jt=r(47143),wt=r(70802),_t=(r(3582),function(){return _t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},_t.apply(this,arguments)}),Nt=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},kt=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};var Ot=r(44101),St=function(){return St=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},St.apply(this,arguments)},At=(0,s.forwardRef)(function(e,t){var r=e.field,i=e.label,a=e.context,o=e.className,l=e.goal,c=e.onChange,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","label","context","className","goal","onChange"]),p=u.id||r.name,b=function(e){var t=(void 0===e?{}:e).fields,r=(0,wt.jE)(),n=(0,jt.useSelect)(function(e){return e("core").getEntityRecord("root","site")},[]),i=(0,jt.useSelect)(function(e){return e("core/data").isResolving("core","getEntityRecord",["root","site"])},[]),a=(0,jt.useDispatch)("core/data").invalidateResolution,o=(0,s.useCallback)(function(){return Nt(void 0,void 0,void 0,function(){return kt(this,function(e){return n?[2,n]:[2,new Promise(function(e){var t=wp.data.subscribe(function(){var r=wp.data.select("core").getEntityRecord("root","site");r&&(t(),e(r))})})]})})},[n]),l=(0,ie.I)({queryKey:["wordpressData","siteInfo"],queryFn:o,staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,initialData:n}),c=l.data,u=l.isLoading,d=l.refetch,f=(0,s.useCallback)(function(){return Nt(void 0,void 0,void 0,function(){return kt(this,function(e){switch(e.label){case 0:return a("core","getEntityRecord",["root","site"]),[4,d()];case 1:return e.sent(),r.invalidateQueries(["wordpressData","siteInfo"]),[2]}})})},[a,d,r]),p=c||n,b=u||i;if(t&&p){var m=(Array.isArray(t)?t:[t]).reduce(function(e,t){return t in p&&(e[t]=p[t]),e},{});return _t({siteInfo:p,isLoading:b,refreshSiteInfo:f},m)}return{siteInfo:p,isLoading:b,refreshSiteInfo:f}}().siteInfo,m=(0,s.useState)(!0),h=m[0],g=m[1],x=null==b?void 0:b.url,v="page"===l.page_or_website?x+l.specific_page:x,y=(0,yt.addQueryArgs)(v,{burst_preview:"1",burst_force_logged_out:h?"1":"0"}),j=(0,yt.addQueryArgs)(v,{}),_=(0,s.useState)(r.value||""),N=_[0],k=_[1],O=(0,s.useState)(""),S=O[0],A=O[1],C=(0,s.useState)(!1),P=C[0],R=C[1],I=(0,s.useState)({count:null,previews:[],currentIndex:0}),E=I[0],z=I[1],F=(0,s.useState)(""),D=F[0],L=F[1],T=(0,s.useRef)(null),M=(0,s.useRef)(null),V=(0,s.useCallback)(function(e){if(!e)return"";try{return document.querySelectorAll(e),""}catch(e){return"Invalid selector: ".concat(e.message)}},[]),B=(0,s.useCallback)(function(e){if(e){var t=V(e);if(t)return A(t),void z({count:null,previews:[],currentIndex:0});var r=T.current;if(r)try{var n=r.contentDocument||r.contentWindow.document,s=Array.from(n.querySelectorAll(e)),i=s.length;if(0===i)return z({count:0,previews:[],currentIndex:0}),void L("");var a="<head>"+Array.from(n.head.children).map(function(e){return e.outerHTML}).join("")+"</head>",o=s.map(function(e){var t='<body style="display: flex; justify-content: center; align-items: center; height: 100vh;">'.concat(e.outerHTML,"</body>");return"<!DOCTYPE html>\n<html>\n  ".concat(a,"\n  ").concat(t,"\n</html>")});if(z({count:i,previews:o,currentIndex:0}),A(""),0<s.length){var l=getComputedStyle(s[0]);"none"===l.display||"hidden"===l.visibility?L((0,w.__)("Warning: The current element is hidden via CSS.","burst-statistics")):L("")}}catch(e){A("Error testing selector: ".concat(e.message)),z({count:null,previews:[],currentIndex:0})}}else z({count:null,previews:[],currentIndex:0})},[V]),W=(0,s.useRef)(null);(0,s.useEffect)(function(){var e=vt()(function(e){B(e),R(!1)},300);return W.current=e,function(){return e.cancel()}},[B]);var q=(0,s.useCallback)(function(e){var t;null===(t=W.current)||void 0===t||t.call(W,e)},[]);(0,s.useEffect)(function(){R(!0),q(N)},[N,q]);var U=function(e){z(function(t){var r=t.previews,n=t.currentIndex;if(!r.length)return t;var s="next"===e?(n+1)%r.length:(n-1+r.length)%r.length,i=St(St({},t),{currentIndex:s}),a=T.current;if(a)try{var o=a.contentDocument||a.contentWindow.document,l=Array.from(o.querySelectorAll(N))[s];if(l){var c=getComputedStyle(l);"none"===c.display||"hidden"===c.visibility?L((0,w.__)("Warning: this element might be hidden via CSS.","burst-statistics")):L("")}}catch(e){}return i})},G=S?a:null!=E.count?(0,w.sprintf)(
/* translators:
  1: number of elements found
  2: the URL of the preview
  3: logged in/out status */
/* translators:
  1: number of elements found
  2: the URL of the preview
  3: logged in/out status */
(0,w._n)("Found %1$d element on %2$s %3$s","Found %1$d elements on %2$s %3$s",E.count,"burst-statistics"),E.count,j,h?(0,w.__)("(Logged out)","burst-statistics"):(0,w.__)("(Logged in)","burst-statistics")):a,K=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"text-base font-bold mb-2",children:(0,w.__)("Selector Examples:","burst-statistics")}),(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:".class-name"})," –"," ",(0,w.__)('Selects all elements with class "class-name".',"burst-statistics")]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:"#element-id"})," –"," ",(0,w.__)('Selects the element with ID "element-id".',"burst-statistics")]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:"button"})," –"," ",(0,w.__)("Selects all <button> elements.","burst-statistics")]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:'a[href^="https"]'})," –"," ",(0,w.__)('Selects links whose href starts with "https".',"burst-statistics")]}),(0,n.jsxs)("li",{children:[(0,n.jsx)("code",{children:".nav-item:not(.active)"})," –"," ",(0,w.__)('Selects .nav-item elements that do not have the "active" class.',"burst-statistics")]})]})]});return(0,n.jsxs)(f.A,{label:i,help:K,error:S,warning:D,className:o,inputId:p,required:u.required,children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(d.A,St({id:p,type:"text",ref:t,value:N},r,u,{"aria-invalid":!!S,"aria-describedby":S?"".concat(p,"-error"):void 0,onChange:function(e){var t=e.target.value;k(t),c(t),A(V(t))},className:"w-full"})),P&&(0,n.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-600",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})})]}),(0,n.jsxs)("div",{className:"mt-4 border rounded overflow-hidden",ref:M,tabIndex:0,"aria-label":(0,w.__)("Preview panel, use arrow keys to navigate","burst-statistics"),children:[(0,n.jsxs)("div",{className:"bg-gray-100 p-2 grid grid-cols-3 items-center justify-between border-b",children:[(0,n.jsx)("div",{className:"font-medium text-sm",children:G}),1<E.previews.length&&(0,n.jsx)("div",{className:"col-start-2 flex items-center justify-center",children:(0,n.jsxs)("div",{role:"group","aria-label":(0,w.__)("Step through matches","burst-statistics"),className:"flex items-center justify-center rounded overflow-hidden shadow-sm",children:[(0,n.jsx)("button",{type:"button",onClick:function(){return U("prev")},className:"bg-white text-gray-600 hover:bg-gray-100 px-3 py-1 border-r","aria-label":(0,w.__)("Previous match","burst-statistics"),children:"←"}),(0,n.jsxs)("span",{className:"px-2 py-1 bg-white text-sm",children:[E.currentIndex+1,"/",E.previews.length]}),(0,n.jsx)("button",{type:"button",onClick:function(){return U("next")},className:"bg-white text-gray-600 hover:bg-gray-100 px-3 py-1 border-l","aria-label":(0,w.__)("Next match","burst-statistics"),children:"→"})]})}),(0,n.jsx)("div",{className:"flex items-center justify-end col-start-3 gap-2",children:(0,n.jsx)(Ot.A,{content:h?(0,w.__)("Set logged in mode","burst-statistics"):(0,w.__)("Set logged out mode","burst-statistics"),children:(0,n.jsx)("button",{type:"button",onClick:function(){return g(!h)},className:"bg-white text-gray-600 hover:bg-gray-100 border-gray-400 px-2 py-2 border rounded-md",children:h?(0,n.jsx)(H.A,{name:"log-out"}):(0,n.jsx)(H.A,{name:"log-in"})})})})]}),0<E.previews.length&&!S&&(0,n.jsx)("iframe",{srcDoc:E.previews[E.currentIndex],sandbox:"allow-scripts allow-same-origin",title:"".concat(p,"-preview"),className:"w-full h-48 border-none","aria-live":"polite"})]}),0<E.previews.length&&(0,n.jsx)("span",{className:"sr-only","aria-live":"polite",children:(0,w.__)("%s elements match your selector. Use arrow keys to cycle through matches.","burst-statistics").replace("%s",E.count)}),y&&(0,n.jsx)("iframe",{ref:T,sandbox:"allow-scripts allow-same-origin",src:y,onLoad:function(){return B(N)},referrerPolicy:"no-referrer",style:{display:"none"},title:"".concat(p,"-hidden-tester")})]})});At.displayName="SelectorField";const Ct=At,Pt=function(e){var t=e.field,r=void 0===t?{}:t,i=e.goal,a=e.value,o=e.setGoalValue,l=(0,s.useState)(!1),c=l[0],u=l[1];(0,s.useEffect)(function(){f(r,a)});var d=function(e){f(r,e),"type"===r.id&&"visits"===e&&o(i.id,"page_or_website","page"),o(i.id,r.id,e)},f=function(e,t){var r=!0;e.required&&(r=0!==t.length),r&&"url"===e.type&&(r=!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)),r&&"css-selector"===e.type&&(r=!!t.length),u(r)},p="burst-"+r.type,b=r.disabled;return"hidden"===r.type||r.conditionallyDisabled?null:"text"===r.type||"url"===r.type?(0,n.jsxs)("div",{className:p,children:[r.parent_label&&(0,n.jsx)("div",{children:(0,n.jsx)("label",{children:r.parent_label})}),c&&(0,n.jsx)(H.A,{name:"success",color:"green"}),!c&&(0,n.jsx)(H.A,{name:"times"}),(0,n.jsx)(m,{help:r.comment,placeholder:r.placeholder,label:r.label,onChange:function(e){return d(e.target.value)},value:a,disabled:b})]}):"radio-buttons"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(gt,{disabled:b,field:r,goalId:i.id,inputId:r.id,id:r.id,label:r.label,help:r.comment,value:i[r.id],onChange:function(e){return d(e)},className:"radio-buttons"})}):"hook"===r.type?(0,n.jsx)("div",{className:"flex flex-wrap align-content-stretch gap-8 [&>*]: w-full [&>input[type='text']]:w-full [&>input[type='text']]:box-border",children:(0,n.jsx)(m,{disabled:b,field:r,goal:i,label:r.label,help:r.comment,value:i.hook,onChange:function(e){return d(e.target.value)}})}):"select-page"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(bt.A,{disabled:b,field:r,goal_id:i.id,label:r.label,help:r.comment,value:!1===i.url||"*"===i.url?"":i.url,onChange:function(e){return d(e)}})}):"selector"===r.type?(0,n.jsx)("div",{className:p,children:(0,n.jsx)(Ct,{disabled:b,field:r,goal:i,goal_id:i.id,label:r.label,help:r.comment,value:i.selector,onChange:function(e){return d(e)}})}):void 0};function Rt(e){var t=e.value,r=e.onChange,i=(0,s.useState)(t),a=i[0],o=i[1],l=(0,s.useState)(!1),c=l[0],u=l[1],d=(0,s.useRef)(null);return(0,s.useEffect)(function(){c&&d.current&&d.current.focus()},[c]),(0,n.jsx)("div",{children:c?(0,n.jsx)("input",{type:"text",value:a,onChange:function(e){e.preventDefault(),o(e.target.value)},onBlur:function(){return e=this,t=void 0,s=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return u(!1),[4,r(a)];case 1:return e.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())});var e,t,n,s},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),o(e.target.value+" ")),"Enter"===e.key&&(e.preventDefault(),u(!1),r(a))},ref:d}):(0,n.jsx)(Y.A,{content:(0,w.__)("Click to edit","burst-statistics"),children:(0,n.jsx)("h5",{className:"min-w-[150px] font-semibold inline-block burst-tooltip-clicktoedit",tabIndex:"0",onClick:function(e){e.preventDefault(),u(!0)},onFocus:function(){u(!0)},children:""!==a?a:(0,n.jsx)("i",{children:(0,w.__)("Untitled goal","burst-statistics")})})})})}var It=r(85373),Et=function(e){var t=e.goal;return(0,n.jsxs)(n.Fragment,{children:[(0,w.__)("Are you sure you want to delete this goal?","burst-statistics")+" "+(0,w.__)("This action cannot be undone.","burst-statistics"),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("strong",{children:[(0,w.__)("Goal name","burst-statistics"),":"]})," ",t.name,(0,n.jsx)("br",{}),(0,n.jsxs)("strong",{children:[(0,w.__)("Status","burst-statistics"),":"]})," ",t.status,(0,n.jsx)("br",{}),(0,n.jsxs)("strong",{children:[(0,w.__)("Date created","burst-statistics"),":"]})," ",(0,ge.BM)(t.dateCreated)]})},zt=function(e){var t=e.deleteGoal,r=e.onClose,s=e.isDisabled;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(It.bm,{asChild:!0,"aria-label":"Close",children:(0,n.jsx)("button",{className:"burst-button burst-button--secondary",onClick:r,children:(0,w.__)("Cancel","burst-statistics")})}),(0,n.jsx)("button",{disabled:s,className:"burst-button burst-button--tertiary",onClick:function(){return t()},children:(0,w.__)("Delete goal","burst-statistics")})]})};const Ft=function(e){var t=e.goal,r=e.deleteGoal,i=(0,s.useState)(!1),a=i[0],o=i[1],l=(0,s.useState)(!1),c=l[0],u=l[1],d=function(){o(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.A,{isOpen:a,onClose:d,title:(0,w.__)("Delete goal","burst-statistics"),content:(0,n.jsx)(Et,{goal:t}),footer:(0,n.jsx)(zt,{deleteGoal:function(){return e=void 0,t=void 0,s=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return u(!0),[4,r()];case 1:return e.sent(),u(!1),o(!1),[2]}})},new((n=void 0)||(n=Promise))(function(r,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())});var e,t,n,s},onClose:d,isDisabled:c})}),(0,n.jsx)("button",{className:"burst-button-icon burst-button-icon--delete",onClick:function(e){return function(e){e.preventDefault(),o(!0)}(e)},children:(0,n.jsx)(H.A,{name:"trash",size:18})})]})};var Dt=function(){return Dt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Dt.apply(this,arguments)};const Lt=function(e){var t=e.goal,r=e.goalFields,i=e.setGoalValue,a=e.deleteGoal,o=e.saveGoalTitle,l=(0,s.useState)("active"===t.status),c=l[0],u=l[1],d=(0,s.useMemo)(function(){if(!r||0===r.length)return[];var e=r.map(function(e){var r=Dt({},e);return r.value=t[r.id],r});return(0,pt.l)(e)},[r,t]);return r?(0,n.jsx)("div",{className:"w-full bg-gray-100 rounded-m",children:(0,n.jsxs)("details",{className:"rounded-md border border-gray-200",children:[(0,n.jsxs)("summary",{className:"burst-no-marker py-1.5 px-2.5 grid gap-1.5 items-center list-none [grid-template-columns:26px_1fr_auto_auto_auto] md:gap-3",children:[(0,n.jsx)(H.A,{name:t.type&&d[1]&&d[1].options&&d[1].options[t.type]?d[1].options[t.type].icon:"eye",size:20}),(0,n.jsx)("span",{children:(0,n.jsx)(Rt,{value:t.title&&0<t.title.length?t.title:" ",id:t.id,defaultValue:(0,w.__)("New goal","burst-statistics"),onChange:function(e){i(t.id,"title",e),o(t.id,e)}})}),(0,n.jsx)(Ft,{goal:{name:t.title&&0<t.title.length?t.title:" ",status:c?(0,w.__)("Active","burst-statistics"):(0,w.__)("Inactive","burst-statistics"),dateCreated:t&&void 0!==t.date_created&&1<t.date_created?t.date_created:1},deleteGoal:function(){a(t.id)}}),(0,n.jsx)(Y.A,{content:c?(0,w.__)("Click to de-activate","burst-statistics"):(0,w.__)("Click to activate","burst-statistics"),children:(0,n.jsx)("span",{className:"burst-click-to-filter burst-goal-toggle",children:(0,n.jsx)(E.A,{size:"small",value:c,onChange:function(e){u(e),i(t.id,"status",e?"active":"inactive")}})})}),(0,n.jsx)(H.A,{name:"chevron-down",size:18})]}),0<d.length&&d.map(function(e,r){return(0,n.jsx)(Pt,{field:e,goal:t,value:e.value,setGoalValue:i},r)})]})}):null};var Tt=r(82529);const Mt=function(){var e=(0,pt.A)(),t=e.goals,r=e.goalFields,i=e.predefinedGoals,a=e.addGoal,o=e.deleteGoal,l=e.updateGoal,c=e.addPredefinedGoal,u=e.setGoalValue,d=e.saveGoalTitle,f=(0,Ae.A)().isLicenseValid,p=(0,s.useState)(!1),b=p[0],m=p[1],h=function(e){switch(e){case"hook":return"Hook";case"clicks":return(0,w.__)("Click","burst-statistics");case"views":return(0,w.__)("View","burst-statistics");default:return e}},g=i&&0!==i.length?"":"burst-inactive";return(0,n.jsxs)("div",{className:"box-border w-full p-3 md:p-6",children:[(0,n.jsxs)("p",{className:"text-base",children:[(0,w.__)("Goals are a great way to track your progress and keep you motivated.","burst-statistics"),!f&&" "+(0,w.__)("While free users can create one goal, Burst Pro lets you set unlimited goals to plan, measure, and achieve more.","burst-statistics")]}),(0,n.jsxs)("div",{className:"flex flex-wrap flex-col gap-4 mt-4",children:[0<t.length&&t.map(function(e,t){return(0,n.jsx)(Lt,{goal:e,goalFields:r,setGoalValue:u,deleteGoal:o,onUpdate:l,saveGoalTitle:d},t)}),(f||0===t.length)&&(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{className:"burst-button burst-button--secondary",type:"button",onClick:a,children:(0,w.__)("Add goal","burst-statistics")}),i&&(0,n.jsxs)(xe.bL,{open:b,onOpenChange:function(){m(!b)},children:[(0,n.jsxs)(xe.l9,{type:"button",className:g+" burst-button burst-button--secondary burst-add-predefined-goal",onClick:function(){m(!b)},children:[(0,w.__)("Add predefined goal","burst-statistics")," ",(0,n.jsx)(H.A,{name:b?"chevron-up":"chevron-down",color:"gray"})]}),(0,n.jsxs)(xe.UC,{sideOffset:5,align:"end",className:"burst-predefined-goals-list z-50 flex flex-col gap-2 rounded-lg border border-gray-400 bg-white p-2",children:[i.map(function(e,t){return(0,n.jsxs)("div",{className:"relative z-50 flex cursor-pointer flex-row gap-1 rounded-lg border border-gray-400 bg-gray-100 p-2",onClick:function(){return function(e){return t=void 0,r=void 0,s=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return m(!1),[4,c(e.id)];case 1:return t.sent(),[2]}})},new((n=void 0)||(n=Promise))(function(e,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(a,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s}(e)},children:[(0,n.jsx)(H.A,{name:"plus",size:18,color:"gray"}),e.title+" ("+h(e.type)+")"]},t)}),(0,w.__)("Plug-in you're looking for not listed?","burst-statistics")+" ",(0,n.jsx)("a",{className:"underline",href:(0,Tt.U)("/request-goal-integration/",{utm_source:"goals-integration-request"}),children:(0,w.__)("Request it here!","burst-statistics")})]})]}),(0,n.jsx)("div",{className:"ml-auto text-right",children:(0,n.jsx)("p",{className:"rounded-lg bg-gray-300 p-1 px-3 text-sm text-gray",children:f?(0,n.jsxs)(n.Fragment,{children:[" ",t.length," / ∞ "]}):(0,n.jsxs)(n.Fragment,{children:[t.length," / 1"]})})})]}),!f&&(0,n.jsxs)("div",{className:"flex gap-4 p-4 bg-gray-200 rounded-md mt-4 justify-start items-center border-2 border-gray-300",children:[(0,n.jsx)(H.A,{name:"goals",size:24,color:"gray"}),(0,n.jsx)("h4",{children:(0,w.__)("Want more goals?","burst-statistics")}),(0,n.jsx)("div",{className:"burst-divider"}),(0,n.jsx)("p",{className:"text-sm text-gray",children:(0,w.__)("Upgrade to Burst Pro","burst-statistics")}),(0,n.jsx)("a",{href:(0,Tt.U)("/pricing/",{utm_source:"goals-setting",utm_content:"more-goals"}),target:"_blank",className:"ml-auto burst-button burst-button--pro",children:(0,w.__)("Upgrade to Pro","burst-statistics")})]})]})]})},Vt=function(e){var t=e.className,r=e.text,s=e.target,i=e.url,a=e.rel,o="",l="",c="";if(-1!==r.indexOf("%s")){var u=r.split(/%s/);o=u[0],c=u[1],l=u[2]}else c=r;return t=t||"burst-link",(0,n.jsxs)(n.Fragment,{children:[o,(0,n.jsx)("a",{className:t,target:s,rel:a,href:i,children:c}),l]})};var Bt={creator:"Creator",business:"Business",agency:"Agency"},Wt={urgent:{container:"bg-red-light",button:"primary"},warning:{container:"bg-yellow-50 border-t-2 border-yellow-500",button:"primary"},default:{container:"bg-gray-50 border-t border-gray-200",button:"secondary"}},qt=function(e){var t=e.licenseKey,r=e.onLicenseKeyChange,s=e.onActivate,i=e.isLicenseMutationPending,a=e.fieldName,o=e.errorMessage;return(0,n.jsxs)("div",{className:"w-full p-6 border-b border-gray-300",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-black mb-4",children:(0,w.__)("Activate Burst Pro","burst-statistics")}),(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)(d.A,{id:a,type:"password",placeholder:(0,w.__)("Enter your license key here","burst-statistics"),value:t,onChange:function(e){return r(e.target.value)},disabled:i,className:"w-full"}),o&&(0,n.jsx)("p",{className:"text-sm text-red",children:o}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(C.A,{btnVariant:"primary",onClick:s,disabled:i||!t,children:(0,w.__)("Activate license","burst-statistics")}),i&&(0,n.jsx)(H.A,{name:"loading",size:20})]}),(0,n.jsxs)("p",{className:"text-sm text-gray",children:[(0,w.__)("Activating your license gives you automatic updates and support.","burst-statistics")," ",(0,n.jsx)(Vt,{className:"underline text-sm text-gray",url:(0,Tt.U)("account",{utm_source:"license-activation",utm_content:"find-license-key"}),target:"_blank",rel:"noopener noreferrer",text:(0,w.__)("Find your license key in %syour account%s.","burst-statistics")})," ",(0,n.jsx)(Vt,{className:"underline text-sm text-gray",url:(0,Tt.U)("how-to-install-burst-pro",{utm_source:"license-activation",utm_content:"installation-guide"}),target:"_blank",rel:"noopener noreferrer",text:(0,w.__)("Having trouble? %sCheck our installation guide%s.","burst-statistics")})," ",(0,n.jsx)(Vt,{className:"underline text-sm text-gray",url:(0,Tt.U)("support",{utm_source:"license-activation",utm_content:"support-ticket"}),target:"_blank",rel:"noopener noreferrer",text:(0,w.__)("If that does not help, please %sopen a support ticket%s so we can help you out!","burst-statistics")})]})]})]})},Ut=function(e){var t=e.tier,r=e.activationLimit,s=e.activationsLeft,i=e.expiresDate,a=e.isLifetime,o=e.isLicenseMutationPending,l=e.onDeactivate,c=e.upgrades,u=e.subscriptionStatus,d=e.hasSubscriptionInfo,f=e.isTrial,p=e.trialRemainingDays,b=e.licenseStatus,m=e.encryptedLicenseKey,h="valid"===b,g=function(e,t,r){return void 0===r&&(r=!1),"unlimited"===e.sites||"number"==typeof e.sites&&(r?e.sites>=t:e.sites>t)},x=function(e,t){return e.find(function(e){return e.tier.toLowerCase()===t.toLowerCase()})},v=!d||"cancelled"!==u&&"failing"!==u?null:{headline:(0,w.__)("Keep your Pro insights & lock in your price","burst-statistics"),body:(0,w.sprintf)((0,w.__)("Your subscription is set to expire on %s.","burst-statistics"),i)+" "+(0,w.__)("Renew your plan now to lock in your current rate. As long as your subscription stays active, your price won't increase and you'll keep access to all Pro data and features.","burst-statistics"),buttonText:(0,w.__)("Renew subscription","burst-statistics"),buttonUrl:(0,Tt.U)("checkout",{edd_license_key:m,download_id:889,utm_source:"license-settings",utm_content:"resume-subscription"}),variant:"urgent",icon:"warning-triangle"},y=function(){var e;if(0===s&&0<r){var n=c.find(function(e){return g(e,r)});return(null==n?void 0:n.url)||null}var i=t.toLowerCase();if("creator"===i){if(1===r){var a=c.find(function(e){return"creator"===e.tier.toLowerCase()&&5===e.sites});if(a)return a.url}var o=c.filter(function(e){return g(e,r,!0)}),l=x(o,"business")||x(o,"agency");return(null==l?void 0:l.url)||null}return"business"===i&&(null===(e=x(c,"agency"))||void 0===e?void 0:e.url)||null}(),j=function(){var e=new Date(i)<new Date;if(a)return{text:(0,w.__)("Never","burst-statistics"),color:"text-black"};if(f&&0<p&&(!d||"active"!==u))return{text:(0,w.sprintf)(/* translators: %d: number of days remaining */ /* translators: %d: number of days remaining */
(0,w.__)("Trial - %d days remaining","burst-statistics"),p),color:"text-green-dark"};if(!d)return{text:(0,w.sprintf)(e?(0,w.__)("Expired on %s","burst-statistics"):(0,w.__)("Expires on %s","burst-statistics"),i),color:"text-black"};switch(u){case"active":return{text:(0,w.sprintf)(/* translators: %s: renewal date */ /* translators: %s: renewal date */
(0,w.__)("Auto-renews on %s","burst-statistics"),i),color:"text-black"};case"cancelled":return{text:(0,w.sprintf)(e?(0,w.__)("Cancelled - Expired on %s","burst-statistics"):(0,w.__)("Cancelled - Expires on %s","burst-statistics"),i),color:"text-red font-semibold"};case"failing":return{text:(0,w.__)("Payment failed - Axtion required","burst-statistics"),color:"text-red"};default:return{text:(0,w.sprintf)(e?(0,w.__)("Expired on %s","burst-statistics"):(0,w.__)("Expires on %s","burst-statistics"),i),color:"text-black"}}}();return(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"w-full p-6 border-b border-gray-300",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-black",children:t?"Burst Pro — ".concat(function(e){return Bt[e.toLowerCase()]||e}(t)):"Burst Pro"}),(0,n.jsx)("span",{className:(0,ee.$)("inline-flex items-center px-3 py-1 text-sm font-medium rounded-full",h?"text-green-dark bg-green-light":"text-red bg-red-light"),children:h?(0,w.__)("Active","burst-statistics"):(0,w.__)("Inactive","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-3 text-sm mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium text-gray",children:(0,w.__)("License status","burst-statistics")}),(0,n.jsx)("span",{className:"text-black",children:"valid"===b?(0,w.__)("Active on this site","burst-statistics"):(0,w.__)("Inactive on this site","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium text-gray",children:(0,w.__)("Site activations","burst-statistics")}),(0,n.jsx)("span",{className:"text-black",children:function(){if(0===r)return(0,w.__)("Unlimited sites available","burst-statistics");var e=r-s;return 0>e&&(e=r),(0,w.sprintf)(/* translators: 1: number of sites used, 2: total number of sites allowed */ /* translators: 1: number of sites used, 2: total number of sites allowed */
(0,w.__)("%1$d of %2$d sites used","burst-statistics"),e,r)}()})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("span",{className:"font-medium text-gray",children:(0,w.__)("Subscription status","burst-statistics")}),(0,n.jsx)("span",{className:j.color,children:j.text})]})]}),h&&(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(C.A,{btnVariant:"tertiary",onClick:function(){return window.open((0,Tt.U)("account",{utm_source:"license-settings",utm_content:"manage-subscription"}),"_blank")},children:(0,w.__)("Manage subscription","burst-statistics")}),(0,n.jsx)("button",{type:"button",onClick:l,disabled:o,className:"text-sm text-gray hover:text-red underline focus:outline-none focus:ring-2 focus:ring-red focus:ring-offset-2 rounded transition-colors",children:(0,w.__)("Deactivate license on this site","burst-statistics")}),o&&(0,n.jsx)(H.A,{name:"loading",size:20})]})]}),h&&v&&(0,n.jsx)("div",{className:(0,ee.$)("p-6 my-4 mx-6 rounded-lg",Wt[v.variant].container),children:(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,n.jsx)("h3",{className:"text-md font-semibold",children:v.headline}),(0,n.jsx)("p",{className:"text-sm",children:v.body}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(C.A,{btnVariant:Wt[v.variant].button,onClick:function(){return window.open(v.buttonUrl,"_blank")},children:v.buttonText})})]})}),h&&0<c.length&&!v&&(0,n.jsxs)("div",{className:"w-full p-6 bg-gray-50 border-t border-gray-200",children:[(0,n.jsx)("h3",{className:"text-md font-semibold text-gray-900 mb-4",children:(0,w.__)("Available upgrades","burst-statistics")}),(0,n.jsx)("div",{className:"flex flex-col gap-3",children:c.map(function(e,t){var r=e.url.includes("burst-statistics.com")?(0,yt.addQueryArgs)(e.url,{utm_source:"license-settings",utm_content:"upgrade-to-".concat(e.tier.toLowerCase())}):e.url,s=e.url===y;return(0,n.jsxs)("div",{className:(0,ee.$)("flex items-center justify-between p-4 bg-white border rounded-lg transition-colors",s?"border-green-light hover:border-green":"border-gray-200 hover:border-gray-300"),children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("h4",{className:"font-medium text-black",children:e.tier}),s&&(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 text-xs font-medium text-green-dark bg-green-light rounded-full",children:(0,w.__)("Recommended for you","burst-statistics")})]}),(0,n.jsx)("p",{className:"text-sm text-gray",children:"unlimited"===e.sites?(0,w.__)("Unlimited sites","burst-statistics"):(0,w.sprintf)(/* translators: %s: number of sites */ /* translators: %s: number of sites */
(0,w._n)("%s site","%s sites",e.sites,"burst-statistics"),e.sites)})]}),(0,n.jsx)(C.A,{btnVariant:s?"primary":"secondary",size:"sm",onClick:function(){return window.open(r,"_blank")},children:(0,w.__)("Upgrade","burst-statistics")})]},t)})})]})]})},Gt=(0,s.forwardRef)(function(e,t){var r,s=e.field,i=e.className,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","className"]),o=(0,Ae.A)(),l=o.licenseNotices,c=o.licenseStatus,u=o.isFetching,d=o.isLicenseMutationPending,f=o.activateLicense,p=o.deactivateLicense,b=o.upgrades,m=o.tier,h=o.activationLimit,g=o.activationsLeft,x=o.licenseExpiresDate,v=o.licenseIsLifetime,y=o.subscriptionStatus,j=o.hasSubscriptionInfo,w=o.isTrial,_=o.trialRemainingDays,N=o.encryptedLicenseKey,k=a.id||s.name,O="valid"===c,S=!O&&!(""===c||"empty"===c),A=null===(r=l.find(function(e){return"warning"===e.icon}))||void 0===r?void 0:r.msg;return(0,n.jsxs)("div",{className:(0,ee.$)("w-full",i),ref:t,children:[!O&&(0,n.jsx)(qt,{licenseKey:s.value,onLicenseKeyChange:s.onChange,onActivate:function(){s.value&&f(s.name,s.value)},isLicenseMutationPending:d,fieldName:k,errorMessage:u?void 0:A}),(O||S)&&(0,n.jsx)(Ut,{tier:m,activationLimit:h,activationsLeft:g,expiresDate:x,isLifetime:v,isLicenseMutationPending:d,onDeactivate:function(){p()},upgrades:b,subscriptionStatus:y,hasSubscriptionInfo:j,isTrial:w,trialRemainingDays:_,licenseStatus:c,encryptedLicenseKey:N})]})});Gt.displayName="LicenseField";const Kt=Gt;var $t=function(){return $t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},$t.apply(this,arguments)},Ht=(0,s.forwardRef)(function(e,t){var r,s,i=e.field,a=e.fieldState,o=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),p=d.id||i.name;return(0,n.jsx)(f.A,$t({label:o,help:l,error:null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.message,context:c,className:u,inputId:p,required:d.required,alignWithLabel:!0,recommended:d.recommended,disabled:d.disabled},d,{children:(0,n.jsx)(Pe.A,$t({},i,{id:p,"aria-invalid":!!(null===(s=null==a?void 0:a.error)||void 0===s?void 0:s.message),ref:t,value:i.value||"",onChange:function(e){return i.onChange(e)},options:d.options||[],disabled:d.disabled}))}))});Ht.displayName="SelectField";const Yt=Ht;var Qt=function(){return Qt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Qt.apply(this,arguments)},Jt=(0,s.forwardRef)(function(e,t){var r,s,i,a=e.field,o=e.fieldState,l=e.label,c=e.help,u=e.setting,p=e.context,b=e.className,m=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","setting","context","className"]),h=m.id||a.name,g=null!==(r=String(a.value))&&void 0!==r?r:"";return(0,n.jsx)(f.A,Qt({label:l,help:c,error:null===(s=null==o?void 0:o.error)||void 0===s?void 0:s.message,context:p,className:b,inputId:h,required:m.required,recommended:m.recommended,disabled:m.disabled},m,{children:(0,n.jsx)(d.A,Qt({},a,{value:g,id:h,type:"number","aria-invalid":!!(null===(i=null==o?void 0:o.error)||void 0===i?void 0:i.message),ref:t,min:null==u?void 0:u.min,max:null==u?void 0:u.max,step:m.step,placeholder:m.placeholder,disabled:m.disabled,onChange:function(e){return a.onChange(e.target.value)}}))}))});Jt.displayName="NumberField";const Xt=Jt;var Zt=r(21290),er=function(){return er=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},er.apply(this,arguments)},tr=(0,s.forwardRef)(function(e){var t=e.field,r=e.fieldState,i=e.label,a=e.help,o=e.className,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","className"]),c=(0,Zt.S)(t.value),u=c.data,d=c.isLoading,p=null==u?void 0:u.attachmentUrl,b=(0,s.useRef)(null);return(0,n.jsxs)(f.A,er({label:i,help:a,className:o,error:r.error,pro:l.setting.pro,context:l.setting.context,recommended:l.recommended,disabled:l.disabled},l,{children:[(0,n.jsx)("div",{className:"flex items-center justify-center bg-gray-100 rounded-md p-4 border-dashed border-2 border-gray-500 cursor-pointer max-w-72 max-h-24 ".concat(l.disabled?"opacity-50 disabled pointer-events-none":""),onClick:function(){if(!l.disabled)if(b.current)b.current.open();else{var e=wp.media({title:(0,w.__)("Select a logo","burst-statistics"),button:{text:(0,w.__)("Set logo","burst-statistics")},multiple:!1});e.on("select",function(){var r=e.state().get("selection").first(),n=r.id;(r.attributes.sizes.medium||r.attributes.sizes.thumbnail||r.attributes.sizes.full)&&t.onChange(n)}),b.current=e,e.open()}},children:p&&!d?(0,n.jsx)("img",{src:p,alt:"Logo",className:"max-w-64 max-h-20"}):(0,n.jsx)(H.A,{name:"loading",size:18})}),(0,n.jsx)(C.A,{btnVariant:"tertiary",size:"sm",className:"mt-2",onClick:function(){t.onChange(0)},disabled:l.disabled||0===t.value||"0"===t.value,children:(0,w.__)("Reset to Default","burst-statistics")})]}))});tr.displayName="LogoEditorField";const rr=tr;var nr=r(30346),sr=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},ir=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const ar=(0,nr.v)(function(e,t){return{fetching:!1,restoring:!1,progress:!1,archives:[],downloadUrl:"",fields:[],noData:!1,deleteArchives:function(r){return sr(void 0,void 0,void 0,function(){var n,s;return ir(this,function(i){switch(i.label){case 0:return n=t().archives.filter(function(e){return r.includes(e.id)}),e(function(e){return{archives:e.archives.filter(function(e){return!r.includes(e.id)})}}),(s={}).archives=n,[4,T.oR.promise((0,M.Eo)("delete_archives",s),{pending:(0,w.__)("Deleting…","burst-statistics"),success:(0,w.__)("Archives deleted successfully!","burst-statistics"),error:(0,w.__)("Failed to delete archive","burst-statistics")})];case 1:return i.sent(),[2]}})})},fetchData:function(r){return sr(void 0,void 0,void 0,function(){var n,s,i,a;return ir(this,function(o){switch(o.label){case 0:return r?t().fetching?[2]:(e({fetching:!0}),n={},[4,(0,M.Eo)("get_archives",n).then(function(e){return e}).catch(function(e){console.error(e)})]):[2];case 1:return s=o.sent(),i=s.archives,a=s.downloadUrl,e(function(){return{archives:i,downloadUrl:a,fetching:!1,restoring:i.some(function(e){return!0===e.restoring})}}),[2]}})})},startRestoreArchives:function(t){return sr(void 0,void 0,void 0,function(){return ir(this,function(r){switch(r.label){case 0:return e({restoring:!0,progress:0}),e(function(e){return{archives:e.archives.map(function(e){return t.includes(e.id)&&(e.restoring=!0),e})}}),[4,T.oR.promise((0,M.Eo)("start_restore_archives",{archives:t}),{pending:(0,w.__)("Starting restore…","burst-statistics"),success:(0,w.__)("Restore successfully started!","burst-statistics"),error:(0,w.__)("Failed to start restore process.","burst-statistics")})];case 1:return r.sent(),[2]}})})},fetchRestoreArchivesProgress:function(){return sr(void 0,void 0,void 0,function(){var r,n,s,i,a;return ir(this,function(o){switch(o.label){case 0:return e({restoring:!0}),[4,(0,M.Eo)("get_restore_progress",{}).then(function(e){return e}).catch(function(e){console.error(e)})];case 1:return r=o.sent(),n=r.progress,s=r.noData,i=!1,100>n&&(i=!0),e({progress:n,restoring:i,noData:s}),100===n&&(a=t().archives.filter(function(e){return!e.restoring}),e({archives:a})),[2,{progress:n,noData:s,restoring:i}]}})})}}});var or=r(67691),lr=function(){return lr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},lr.apply(this,arguments)},cr=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},ur=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},dr=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},fr=(0,s.forwardRef)(function(){var e=(0,s.useState)(""),t=e[0],r=e[1],i=(0,s.useState)([]),a=i[0],o=i[1],l=(0,s.useState)(!1),c=l[0],u=l[1],d=(0,s.useState)({}),f=d[0],p=d[1],b=(0,s.useState)(!1),m=b[0],h=b[1],g=(0,s.useState)(!1),x=g[0],v=g[1],y=(0,s.useState)("title"),j=y[0],_=y[1],N=(0,s.useState)("asc"),k=N[0],O=N[1],S=(0,s.useState)(0),A=S[0],C=S[1],P=ar(function(e){return e.archives}),R=ar(function(e){return e.fetching}),I=ar(function(e){return e.fetchData}),E=ar(function(e){return e.deleteArchives}),z=ar(function(e){return e.downloadUrl}),F=ar(function(e){return e.startRestoreArchives}),D=ar(function(e){return e.fetchRestoreArchivesProgress}),L=ar(function(e){return e.restoring}),T=ar(function(e){return e.progress}),M=(0,or.A)().addNotice,V=(0,Ae.A)().isPro,B=(0,ie.I)({queryFn:function(){return D()},queryKey:["restore-archives-progress"],refetchInterval:!!L&&5e3}).isFetching;(0,s.useEffect)(function(){B||void 0===T||C(T)},[B,T]),(0,s.useEffect)(function(){B||void 0===T||C(T)},[B,T]),(0,s.useEffect)(function(){if(L&&!(100<=A)){var e=setInterval(function(){C(function(e){return!B&&100>e?Math.min(e+1,99):e})},2e3);return function(){return clearInterval(e)}}},[L,B,A]),(0,s.useEffect)(function(){L||C(0)},[L]),(0,s.useEffect)(function(){var e=!0;return cr(void 0,void 0,void 0,function(){return ur(this,function(t){switch(t.label){case 0:return e?[4,I(V)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})}),function(){e=!1}},[V,I]);var W=function(e){try{0===e.length&&(v(!1),h(!1)),o(e)}catch(e){console.log("Component unmounted, ignoring state update")}},q=function(e){var r=dr([],e,!0);return(r=U(r,j,k)).filter(function(e){return e.title.toLowerCase().includes(t.toLowerCase())})},U=function(e,t,r){if(0===e.length)return e;var n="asc"===r?1:-1;r!==k&&O(r);var s=function(e){var t=e.split(" "),r=t[0],n=t[1];return parseFloat(r)*{B:1,KB:1024,MB:1048576}[n]};return-1!==t.toString().indexOf("title")&&"title"!==j?_("title"):-1!==t.toString().indexOf("size")&&"size"!==j&&_("size"),"title"===j?e.sort(function(e,t){var r=e.id.replace(".zip","").split("-").map(Number),s=r[0],i=r[1],a=t.id.replace(".zip","").split("-").map(Number),o=a[0],l=a[1];return s!==o?n*(s-o):n*(i-l)}):"size"===j&&e.sort(function(e,t){var r=s(e.size),i=s(t.size);return n*(r-i)}),e},G=[{name:(0,n.jsx)("input",{type:"checkbox",className:m?"burst-indeterminate":"",checked:x,disabled:R||0===P.length||L,onChange:function(e){return function(e){if(e){v(!0);var t=f.currentPage?f.currentPage:1,r=q(P).slice(10*(t-1),10*t);o(r.map(function(e){return e.id}))}else v(!1),o([]);h(!1)}(e.target.checked)}}),selector:function(e){return e.selectControl},width:"60px"},{name:(0,w.__)("Archive","burst-statistics"),selector:function(e){return e.title},sortable:!0},{name:(0,w.__)("Size","burst-statistics"),selector:function(e){return e.size},sortable:!0,width:"120px",style:{justifyContent:"flex-end"}}],K=q(P),Y=[];K.forEach(function(e){var t=lr({},e);t.selectControl=(0,n.jsx)("input",{type:"checkbox",className:"m-0",disabled:t.restoring||L,checked:a.includes(t.id),onChange:function(e){return function(e,t){var r=dr([],a,!0);e?r.includes(t)||(r.push(t),o(r)):(r=dr([],a.filter(function(e){return e!==t}),!0),o(r));var n=f.currentPage?f.currentPage:1,s=q(P).slice(10*(n-1),10*n),i=!0,l=!1;s.forEach(function(e){r.includes(e.id)?l=!0:i=!1}),i?(v(!0),h(!1)):l?(v(!1),h(!0)):h(!1)}(e.target.checked,t.id)}}),Y.push(t)});var Q=1<a.length;if(!Q&&1===a.length){var J=P.filter(function(e){return a.includes(e.id)});Q=Object.prototype.hasOwnProperty.call(J,0)&&""!==J[0].download_url}var X=L?A:0;return(0,n.jsxs)("div",{className:"w-full p-6",children:[(0,n.jsxs)("div",{className:"flex py-2.5 px-6 justify-between",children:[(0,n.jsx)("input",{type:"text",placeholder:(0,w.__)("Search","burst-statistics"),value:t,onChange:function(e){return r(e.target.value)}}),L&&(0,n.jsxs)("div",{className:"flex items-center justify-end text-gray-400 w-full gap-1 restore-processing",children:[X," %",(0,n.jsx)(H.A,{name:"loading",color:"gray"})]})]}),0<a.length&&(0,n.jsx)("div",{className:"mt-[10px] mb-[10px] items-center bg-blue-light py-2.5 px-6 flex space-y-2",children:(0,n.jsxs)("div",{className:"flex mb-4 mt-4 justify-between items-center w-full",children:[(0,n.jsx)("div",{children:0<a.length&&(0,w.sprintf)((0,w._n)("%s item selected","%s items selected",a.length,"burst-statistics"),a.length)}),(0,n.jsxs)("div",{className:"flex gap-2.5",children:[Q&&(0,n.jsxs)("button",{disabled:c||T&&100>T,className:"burst-button burst-button--secondary",onClick:function(e){return function(e){return cr(void 0,void 0,void 0,function(){var t,r;return ur(this,function(n){switch(n.label){case 0:return e.preventDefault(),t=P.filter(function(e){return a.includes(e.id)}),u(!0),r=function(){return cr(void 0,void 0,void 0,function(){var e,n,s,i;return ur(this,function(a){switch(a.label){case 0:if(!(0<t.length))return[3,5];e=t.shift(),n=z+e.id,a.label=1;case 1:return a.trys.push([1,3,,4]),(s=new XMLHttpRequest).responseType="blob",s.open("get",n,!0),s.send(),s.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var r=window.URL.createObjectURL(this.response),n=window.document.createElement("a");n.href=r,n.download=e.title,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),W(t.map(function(e){return e.id})),u(!1),setTimeout(function(){window.URL.revokeObjectURL(r)},6e4)}},[4,r()];case 2:return a.sent(),[3,4];case 3:return i=a.sent(),console.error(i),u(!1),[3,4];case 4:return[3,6];case 5:u(!1),a.label=6;case 6:return[2]}})})},[4,r()];case 1:return n.sent(),[2]}})})}(e)},children:[(0,w.__)("Download","burst-statistics"),c&&(0,n.jsx)(H.A,{name:"loading",color:"gray"})]}),(0,n.jsxs)("button",{disabled:T&&100>T,className:"burst-button burst-button--primary",onClick:function(e){return function(e,t){return cr(void 0,void 0,void 0,function(){return ur(this,function(r){switch(r.label){case 0:return e.preventDefault(),W([]),[4,F(t)];case 1:return r.sent(),M("archive_data","warning",(0,w.__)("Because restoring files can conflict with the archiving functionality, archiving has been disabled.","burst-statistics"),(0,w.__)("Archiving disabled","burst-statistics")),[2]}})})}(e,a)},children:[(0,w.__)("Restore","burst-statistics"),100>T&&(0,n.jsx)(H.A,{name:"loading",color:"gray"})]}),(0,n.jsx)("button",{disabled:T&&100>T,className:"burst-button burst-button--tertiary",onClick:function(e){return function(e,t){return cr(void 0,void 0,void 0,function(){return ur(this,function(r){switch(r.label){case 0:return e.preventDefault(),W([]),[4,E(t)];case 1:return r.sent(),[2]}})})}(e,a)},children:(0,w.__)("Delete","burst-statistics")})]})]})}),$.Ay&&(0,n.jsx)($.Ay,{columns:G,data:Y,dense:!0,paginationPerPage:10,onChangePage:function(e){p(lr(lr({},f),{currentPage:e}))},paginationState:f,persistTableHead:!0,defaultSortFieldId:2,pagination:!0,paginationRowsPerPageOptions:[10,25,50],paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,w.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,w.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)("div",{className:"p-8",children:(0,w.__)("No archives","burst-statistics")}),sortFunction:U})]})});fr.displayName="RestoreArchivesField";const pr=fr;var br=r(54232),mr=r(56622),hr=function(){return hr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},hr.apply(this,arguments)},gr=(0,s.forwardRef)(function(e){var t,r=e.field,s=e.fieldState,i=e.label,a=e.help,o=e.context,l=e.className,c=e.recommended,u=e.disabled,d=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className","recommended","disabled"]),p=d.id||r.name,b=d.options||{};return(0,n.jsx)(f.A,hr({label:i,help:a,error:null===(t=null==s?void 0:s.error)||void 0===t?void 0:t.message,context:o,className:l,inputId:p,required:d.required,recommended:c,disabled:u},d,{children:(0,n.jsx)("div",{className:"space-y-4",children:Object.entries(b).map(function(e){var t=e[0],s=e[1],i="string"==typeof s?s:s.label,a="object"==typeof s&&s.context?s.context:null,o="object"==typeof s&&!0===s.recommended;return(0,n.jsx)("div",{className:"space-y-1",children:(0,n.jsx)("div",{className:"flex items-start gap-2 rounded-md border border-gray-400 bg-gray-100 px-3 py-2",children:(0,n.jsxs)(br.A,{id:"".concat(p,"-").concat(t),name:r.name,value:t,label:i,checked:r.value===t,disabled:u,onChange:function(e){return r.onChange(e)},className:l,children:[o&&(0,n.jsx)(mr.A,{}),a&&(0,n.jsx)("div",{className:"text-sm font-light text-gray",children:a})]})})},"".concat(p,"-").concat(t))})})}))});gr.displayName="RadioField";const xr=gr;var vr=function(){return vr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},vr.apply(this,arguments)},yr=["email_reports_mailinglist","burst_tour_shown_once","license","review_notice_shown","burst_update_to_city_geo_database_time","filtering_by_domain","goals","import_settings","export_settings"],jr=(0,s.forwardRef)(function(e){var t,r=e.field,i=e.fieldState,a=e.label,o=e.help,l=e.context,c=e.className,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className"]),d=(0,or.A)(),p=d.settings,b=d.saveSettings,m=d.isSavingSettings,h=(0,s.useState)(!1),g=h[0],x=h[1],v=(0,s.useState)(!0),y=v[0],j=v[1],_=(0,s.useState)(!1),N=_[0],k=_[1],O=(0,s.useState)(null),S=O[0],A=O[1],P=(0,s.useState)(""),R=P[0],I=P[1],E=(0,s.useRef)(null);(0,s.useEffect)(function(){if(!g)return j(!0),A(null),void I("");A(null),I(""),"application/json"===g.type||g.name.endsWith(".json")?j(!1):(j(!0),A("error"),I((0,w.__)("You can only upload .json files!","burst-statistics")),T.oR.error((0,w.__)("You can only upload .json files!","burst-statistics")))},[g]);var z=u.id||r.name,F="error"===S?R:null===(t=null==i?void 0:i.error)||void 0===t?void 0:t.message,D=N||m;return(0,n.jsx)(f.A,vr({label:a,help:o,error:F,warning:"success"===S?null:void 0,context:l,className:c,inputId:z,required:u.required,recommended:u.recommended,disabled:u.disabled},u,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-3 w-full",children:[g&&(0,n.jsxs)("div",{className:(0,ee.$)("flex items-center gap-2 px-3 py-2 rounded border","success"===S&&"bg-green-50 border-green-200","error"===S&&"bg-red-50 border-red-200",!S&&"bg-gray-50 border-gray-200"),children:[(0,n.jsx)(H.A,{name:"file",color:"success"===S?"green":"error"===S?"red":"gray"}),(0,n.jsx)("span",{className:(0,ee.$)("flex-1 text-sm font-medium","success"===S&&"text-green-700","error"===S&&"text-red-700",!S&&"text-gray-700"),children:g.name}),!D&&(0,n.jsx)("button",{type:"button",onClick:function(){x(!1),A(null),I(""),E.current&&(E.current.value="")},className:"p-1 rounded hover:bg-gray-200 transition-colors","aria-label":(0,w.__)("Clear file selection","burst-statistics"),title:(0,w.__)("Clear file selection","burst-statistics"),children:(0,n.jsx)(H.A,{name:"times",size:16,color:"gray"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,n.jsx)("input",{ref:E,type:"file",accept:".json,application/json",onChange:function(e){var t=e.target.files[0];t&&x(t)},className:"hidden",id:"".concat(z,"-file-input"),"aria-label":(0,w.__)("Upload settings file (.json)","burst-statistics")}),(0,n.jsx)(C.A,{btnVariant:"tertiary",onClick:function(){var e;null===(e=E.current)||void 0===e||e.click()},disabled:u.disabled||D,ariaLabel:(0,w.__)("Upload settings file (.json)","burst-statistics"),children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(H.A,{name:"upload",color:"black"}),(0,w.__)("Upload settings file (.json)","burst-statistics")]})}),(0,n.jsx)(C.A,{btnVariant:"secondary",disabled:y||D||!g,onClick:function(){return e=void 0,t=void 0,n=function(){var e,t,r,n,s;return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(i){switch(i.label){case 0:if(!g)return[2];j(!0),k(!0),A(null),I(""),i.label=1;case 1:return i.trys.push([1,4,5,6]),[4,(a=g,new Promise(function(e,t){var r=new FileReader;r.onload=function(t){return e(t.target.result)},r.onerror=function(){return t(new Error((0,w.__)("Failed to read the file.","burst-statistics")))},r.readAsText(a)}))];case 2:return e=i.sent(),t=function(e){var t;try{t=JSON.parse(e)}catch(e){throw new Error((0,w.__)("The JSON file is malformed or invalid.","burst-statistics"))}if(!t||!t.settings||"object"!=typeof t.settings)throw new Error((0,w.__)("The file does not contain valid settings data.","burst-statistics"));return t}(e),r=function(e){if(!p)throw new Error((0,w.__)("Settings not loaded. Please refresh the page.","burst-statistics"));var t={};p.forEach(function(e){yr.includes(e.id)||(t[e.id]=e.default)});var r=p.map(function(e){return e.id});return Object.entries(e).forEach(function(e){var n=e[0],s=e[1];yr.includes(n)||r.includes(n)&&(t[n]=s)}),t}(t.settings),[4,b(r)];case 3:return i.sent(),A("success"),I((0,w.__)("Settings imported successfully!","burst-statistics")),x(!1),E.current&&(E.current.value=""),[3,6];case 4:return n=i.sent(),s=n.message||(0,w.__)("An unexpected error occurred while importing settings.","burst-statistics"),A("error"),I(s),T.oR.error(s),[3,6];case 5:return k(!1),j(!1),[7];case 6:return[2]}var a})},new((r=void 0)||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())});var e,t,r,n},children:D?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(H.A,{name:"loading",color:"white"}),(0,w.__)("Importing...","burst-statistics")]}):(0,w.__)("Import","burst-statistics")})]})]})}))});jr.displayName="UploadField";const wr=jr;var _r=function(){return _r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},_r.apply(this,arguments)},Nr=["email_reports_mailinglist","burst_tour_shown_once","license","review_notice_shown","burst_update_to_city_geo_database_time","filtering_by_domain","goals","import_settings","export_settings"],kr=(0,s.forwardRef)(function(e,t){var r,i=e.field,a=e.fieldState,o=e.label,l=e.help,c=e.context,u=e.className,d=e.setting,p=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","label","help","context","className","setting"]),b=(0,or.A)().settings,m=(0,s.useState)(!1),h=m[0],g=m[1],x=p.id||i.name;return(0,n.jsx)(f.A,_r({label:o,help:l,error:null===(r=null==a?void 0:a.error)||void 0===r?void 0:r.message,context:c,inputId:x,className:u,alignWithLabel:!1,recommended:p.recommended,disabled:p.disabled},p,{children:(0,n.jsx)(C.A,{ref:t,onClick:function(){if(b&&0!==b.length){g(!0);try{var e={};b.forEach(function(t){Nr.includes(t.id)||void 0!==t.value&&(e[t.id]=t.value)});var t={settings:e},r=JSON.stringify(t,null,2),n=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download="burst-settings.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s),T.oR.success((0,w.__)("Settings exported successfully!","burst-statistics"))}catch(e){console.error("Export error:",e),T.oR.error((0,w.__)("Failed to export settings.","burst-statistics"))}finally{g(!1)}}else T.oR.error((0,w.__)("No settings available to export.","burst-statistics"))},disabled:p.disabled||h||!b,btnVariant:"tertiary",ariaLabel:(null==d?void 0:d.button_text)||(0,w.__)("Download settings file","burst-statistics"),children:(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)(H.A,{name:h?"loading":"download",color:"black"}),h?(0,w.__)("Exporting...","burst-statistics"):(null==d?void 0:d.button_text)||(0,w.__)("Download settings file","burst-statistics")]})})}))});kr.displayName="ExportSettingsField";const Or=kr;var Sr=function(){return Sr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Sr.apply(this,arguments)},Ar=(0,s.forwardRef)(function(e,t){var r,s=e.field,i=e.fieldState,a=e.help,o=e.context,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","help","context"]),c=l.id||s.name,u=Boolean(s.value);return(0,n.jsx)(f.A,Sr({label:"",help:a,error:null===(r=null==i?void 0:i.error)||void 0===r?void 0:r.message,context:o,inputId:c,fullWidthContent:!0,recommended:l.recommended,disabled:l.disabled},l,{children:(0,n.jsxs)("div",{className:"w-full space-y-5 px-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("span",{className:"text-md font-medium text-black",children:(0,w.__)("Share anonymous usage data","burst-statistics")}),(0,n.jsx)("span",{className:"text-sm ".concat(u?"text-primary":"text-gray"),children:u?(0,w.__)("Enabled — thank you for helping us improve!","burst-statistics"):(0,w.__)("Disabled","burst-statistics")})]}),(0,n.jsx)(E.A,{id:c,value:u,onChange:function(e){return s.onChange(e)},disabled:l.disabled,ref:t})]}),(0,n.jsx)("p",{className:"text-sm leading-relaxed text-gray",children:(0,w.__)("Help us build better features, prioritize integrations, and improve recommendations by sharing anonymous usage data. We never collect personal information, your site URL, or IP addresses. Everything stays completely anonymous.","burst-statistics")}),(0,n.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,n.jsxs)("div",{className:"space-y-2 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[(0,n.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-semibold text-black",children:[(0,n.jsx)(H.A,{name:"circle-check",color:"green",size:16}),(0,w.__)("What we collect","burst-statistics")]}),(0,n.jsxs)("ul",{className:"space-y-1.5 text-sm text-gray",children:[(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-gray-400"}),(0,w.__)("General site metrics (e.g., monthly visitors, bounce rate)","burst-statistics")]}),(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-gray-400"}),(0,w.__)("Active plugins & WordPress/PHP versions","burst-statistics")]}),(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-gray-400"}),(0,w.__)("Burst settings you use","burst-statistics")]})]})]}),(0,n.jsxs)("div",{className:"space-y-2 rounded-lg border border-gray-200 bg-gray-50 p-4",children:[(0,n.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-semibold text-black",children:[(0,n.jsx)(H.A,{name:"ban",color:"red",size:16}),(0,w.__)("What we never collect","burst-statistics")]}),(0,n.jsxs)("ul",{className:"space-y-1.5 text-sm text-gray",children:[(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-gray-400"}),(0,w.__)("Your site URL, admin emails, or user data","burst-statistics")]}),(0,n.jsxs)("li",{className:"flex items-start gap-2",children:[(0,n.jsx)("span",{className:"mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-gray-400"}),(0,w.__)("Visitor IP addresses or specific page URLs","burst-statistics")]})]})]})]}),(0,n.jsx)("a",{href:(0,Tt.U)("how-we-handle-anonymous-usage-data"),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-wp-blue hover:underline",children:(0,w.__)("Learn more about how we handle data","burst-statistics")})]})}))});Ar.displayName="AnonymousUsageDataField";const Cr=Ar;function Pr(){return e=this,t=void 0,n=function(){var e,t;return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(r){switch(r.label){case 0:return[4,(0,M.uR)()];case 1:return e=r.sent(),(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.logs)?[2,e.data.logs]:[2,[]]}})},new((r=void 0)||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())});var e,t,r,n}var Rr=function(){return Rr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Rr.apply(this,arguments)},Ir=(0,s.forwardRef)(function(e){var t,r=e.field,i=e.fieldState,a=e.help,o=e.context,l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["field","fieldState","help","context"]),c=l.id||r.name,u=(0,X.z)(function(e){return e.reportLogStatusConfig}),d=(0,X.z)(function(e){return e.statusSeverityClasses}),p=(0,ie.I)({queryKey:["report-logs"],queryFn:function(){return e=void 0,t=void 0,n=function(){return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,Pr()];case 1:return[2,e.sent()]}})},new((r=void 0)||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())});var e,t,r,n},refetchOnMount:"always"}),b=p.data,m=void 0===b?[]:b,h=p.isFetching,g=(0,s.useMemo)(function(){return[{name:(0,w.__)("Status","burst-statistics"),cell:function(e){var t,r,s=null!==(r=null===(t=null==u?void 0:u[e.status])||void 0===t?void 0:t.severity)&&void 0!==r?r:"info";return(0,n.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(d[s]),children:e.message})},grow:0},{name:(0,w.__)("Report","burst-statistics"),cell:function(e){return(0,n.jsx)(tt.M,{children:e.report_name})},grow:1},{name:(0,w.__)("Date","burst-statistics"),cell:function(e){return(0,ge.ki)(new Date(1e3*e.time))},sortable:!0,grow:2},{name:(0,w.__)("Queue","burst-statistics"),cell:function(e){return(0,n.jsx)(tt.M,{className:"text-right",children:e.queue_id})},right:!0,grow:1},{name:(0,w.__)("Message","burst-statistics"),cell:function(e){return e.message?(0,n.jsx)(tt.M,{className:"text-right",children:e.message}):(0,n.jsx)("span",{className:"text-gray text-right",children:"—"})},right:!0,grow:1}]},[u,d]);return(0,n.jsx)(f.A,Rr({inputId:c,help:a,error:null===(t=null==i?void 0:i.error)||void 0===t?void 0:t.message,context:o,label:""},l,{children:(0,n.jsx)($.Ay,{noDataComponent:(0,n.jsx)(nt.A,{noData:0===m.length,isLoading:h,error:null,emptyStateMessage:(0,w.__)("No report logs available.","burst-statistics")}),className:"burst-data-table no-custom-burst-style",pagination:!0,columns:g,data:m,sortIcon:(0,n.jsx)(H.A,{size:14,strokeWidth:1,className:"ml-1 h-3.5 w-3.5",name:"arrow-down-up"}),progressComponent:(0,n.jsx)(nt.A,{noData:0===m.length,isLoading:h,error:null,emptyStateMessage:""}),expandableRows:!0,expandableRowsComponent:Er,customStyles:{headCells:{style:{fontWeight:"600",fontSize:"12px",color:"#1c252c",padding:0}},cells:{style:{padding:0}},headRow:{style:{paddingLeft:"0 !important",paddingRight:"0 !important",gap:"12px",fontSize:"12px"}},rows:{style:{paddingLeft:"0 !important",paddingRight:"0 !important",gap:"12px",fontSize:"12px"}}}})}))}),Er=function(e){var t=e.data,r=(0,X.z)(function(e){return e.reportLogStatusConfig}),s=(0,X.z)(function(e){return e.statusSeverityClasses});return(0,n.jsxs)("div",{className:"px-6 py-4 bg-gray-50 space-y-2",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold",children:(0,w.__)("Batch details","burst-statistics")}),(0,n.jsx)("ul",{className:"space-y-1",children:t.batches.map(function(e){var t=r[e.status].severity;return(0,n.jsxs)("li",{className:"flex items-start gap-3 text-sm",children:[(0,n.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(s[t]),children:["#",e.batch_id]}),(0,n.jsx)("span",{className:"flex-1",children:e.message}),(0,n.jsx)("span",{className:"text-gray whitespace-nowrap",children:(0,ge._u)(e.time)})]},e.batch_id)})})]})};Er.displayName="ExpandedComponent",Ir.displayName="ReportLogsField";var zr=function(){return zr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},zr.apply(this,arguments)},Fr={text:m,number:Xt,api:j,hidden:j,checkbox:D,textarea:A,ip_blocklist:I,button:K,email_reports:at,checkbox_group:ft,goals:Mt,license:Kt,select:Yt,logo_editor:rr,restore_archives:pr,radio:xr,upload:wr,export_settings:Or,report_logs:Ir,anonymous_usage_data:Cr},Dr=(0,s.memo)(function(e){var t,r=e.setting,s=e.control,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["setting","control"]),a=(0,Ae.A)().isLicenseValid;if("goals"===r.type)return(0,n.jsx)(c.A,{children:(0,n.jsx)(Mt,{})});var o=Fr[r.type];if(!o)return(0,n.jsxs)("div",{className:"w-full",children:["Unknown field type: ",r.type," ",r.id]});var l=zr(zr(zr(zr(zr(zr(zr({},r.required&&{required:{value:!0,message:r.requiredMessage||(0,w.__)("This field is required","burst-statistics")}}),(null===(t=r.validation)||void 0===t?void 0:t.regex)&&{pattern:{value:new RegExp(r.validation.regex),message:r.validation.message||(0,w.__)("Invalid format","burst-statistics")}}),function(){var e;if("ip_blocklist"===r.type){var t=/^((25[0-5]|2[0-4]\d|1?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|1?\d{1,2})$/,n=/^((?:[0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4}|(?:[0-9A-Fa-f]{1,4}:){1,7}:|:(?::[0-9A-Fa-f]{1,4}){1,7}|(?:[0-9A-Fa-f]{1,4}:){1,6}:[0-9A-Fa-f]{1,4}|(?:[0-9A-Fa-f]{1,4}:){1,5}(?::[0-9A-Fa-f]{1,4}){1,2}|(?:[0-9A-Fa-f]{1,4}:){1,4}(?::[0-9A-Fa-f]{1,4}){1,3}|(?:[0-9A-Fa-f]{1,4}:){1,3}(?::[0-9A-Fa-f]{1,4}){1,4}|(?:[0-9A-Fa-f]{1,4}:){1,2}(?::[0-9A-Fa-f]{1,4}){1,5}|[0-9A-Fa-f]{1,4}:(?:(?::[0-9A-Fa-f]{1,4}){1,6})|::(?:ffff(?::0{1,4})?:)?(?:(25[0-5]|2[0-4]\d|1?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|1?\d{1,2}))$/,s=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e})};return{validate:{validIps:function(e){if(!e)return!0;var r=s(e);if(0===r.length)return!0;var i=r.filter(function(e){return!function(e){return t.test(e)||n.test(e)}(e)});return 0===i.length||(0,w.__)("Invalid IP address format:","burst-statistics")+i.join(", ")},noDuplicates:function(e){if(!e)return!0;var t=s(e);if(0===t.length)return!0;var r={};t.forEach(function(e){var t=function(e){return e.toLowerCase()}(e);r[t]=(r[t]||0)+1});var n=Object.entries(r).filter(function(e){return 1<e[1]}).map(function(e){return e[0]});return 0===n.length||(0,w.__)("Duplicate IP addresses found:","burst-statistics")+n.join(", ")}}}}return(null===(e=r.validation)||void 0===e?void 0:e.validate)?{validate:r.validation.validate}:{}}()),"number"===r.type&&void 0!==r.min&&{min:{value:r.min,message:(0,w.sprintf)((0,w.__)("Value must be at least %s","burst-statistics"),r.min)}}),"number"===r.type&&void 0!==r.max&&{max:{value:r.max,message:(0,w.sprintf)((0,w.__)("Value must be at most %s","burst-statistics"),r.max)}}),r.minLength&&{minLength:r.minLength}),r.maxLength&&{maxLength:r.maxLength}),d=r.disabled||r.pro&&!a||i.settingsIsUpdating;return(0,n.jsx)(c.A,{children:(0,n.jsx)(u.xI,{name:r.id,control:s,rules:l,defaultValue:r.value||r.default,render:function(e){var t=e.field,a=e.fieldState;return(0,n.jsx)(o,zr({field:t,fieldState:a,control:s,required:r.required,label:r.label||r.id,disabled:d,context:r.context,help:r.help,options:r.options,setting:r,recommended:r.recommended,pro:r.pro},i))}})})});Dr.displayName="Field";const Lr=Dr;var Tr=r(65087),Mr=(0,s.memo)(function(e){var t=e.group,r=e.fields,s=e.control,i=e.isLastGroup,u=e.isShowingFooter,d=void 0===u||u,f=(0,Ae.A)().isLicenseValid,p=(0,ee.A)("p-0",i&&d?"rounded-b-none":"mb-5","license"===t.id?"":"pb-4");return 0===r.length?null:(0,n.jsxs)(a.e,{className:p,children:[t.pro&&!f&&(0,n.jsx)(Tr.A,{className:"backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsx)("h4",{children:(0,w.__)("Unlock Advanced Features with Burst Pro","burst-statistics")}),(0,n.jsxs)("p",{children:[(0,w.__)("This setting is exclusive to Pro users.","burst-statistics"),t.pro&&t.pro.text&&" "+t.pro.text]}),t.pro.url&&(0,n.jsx)(C.A,{className:"text-center",target:"_blank",link:{to:t.pro.url},btnVariant:"primary",btnSize:"small",children:(0,w.__)("Upgrade to Pro","burst-statistics")})]})}),(0,n.jsx)(o.q,{title:t.title,className:"burst-settings-group-block"}),(0,n.jsxs)(l.t,{className:"p-0",children:[t.description&&(0,n.jsx)("h3",{className:"mb-5 text-sm",children:t.description}),(0,n.jsx)("div",{className:"flex flex-wrap",children:r.map(function(e){return(0,n.jsx)(c.A,{fallback:"Could not load field",children:(0,n.jsx)(Lr,{setting:e,control:s})},e.id)})})]})]},t.id)});Mr.displayName="SettingsGroupBlock";const Vr=Mr},50863(e,t,r){r.d(t,{_:()=>p});var n=r(30346),s=r(47515),i=r(28811),a=r(27723),o=r(21587),l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},l.apply(this,arguments)},c=function(e,t,r,n){return new(r||(r=Promise))(function(s,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function o(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})},u=function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},d=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},f={can_change_date:!1,can_filter:!1},p=(0,n.v)(function(e,t){return{reports:[],expiration:"7d",permissions:f,isGenerating:!1,setIsGenerating:function(t){return e({isGenerating:t})},setReports:function(t){return e({reports:t})},openPreview:function(e,r){return c(void 0,void 0,void 0,function(){var n,s,i;return u(this,function(a){switch(a.label){case 0:return n=window.open("about:blank","_blank"),[4,t().generateStoryUrl(e)];case 1:return(s=a.sent())?(i=r?"&autoprint=1":"",s=s.replace(/\?burst_share_token=/,"?pdf=1".concat(i,"&burst_share_token=")),n&&(n.location.href=s),[2]):(null==n||n.close(),console.error("Failed to create story URL"),o.oR.error("Failed to create story URL"),[2])}})})},generateStoryUrl:function(e){return c(void 0,void 0,void 0,function(){var r,n,l,c,d,f,p;return u(this,function(u){switch(u.label){case 0:t().setIsGenerating(!0),r="",u.label=1;case 1:return u.trys.push([1,6,7,8]),n=window.location.href,l=n.replace(/wp-admin\/admin\.php\?page=burst.*/,"burst-dashboard#/story"),s.c.getState().wizard.id!==e?[3,3]:[4,t().saveReportFromWizard()];case 2:return u.sent(),[3,4];case 3:t().loadReportIntoWizard(e,!1),u.label=4;case 4:return c=t().permissions,d=t().expiration,[4,(0,i.Eo)("get_share_token",{expiration:d,view_url:l,permissions:c,shared_tabs:"",report_id:e,initial_state:{}})];case 5:return(f=u.sent()).share_token&&f.share_url?(r=f.share_url,[3,8]):(o.oR.error((0,a.__)("Failed to generate share link","burst-statistics")),[2,""]);case 6:return p=u.sent(),console.error("Failed to generate share link:",p),o.oR.error((0,a.__)("Failed to generate share link","burst-statistics")),[3,8];case 7:return t().setIsGenerating(!1),[7];case 8:return[2,r]}})})},saveReportFromWizard:function(){return c(void 0,void 0,void 0,function(){var e,r,n;return u(this,function(i){switch(i.label){case 0:return(e=s.c.getState().wizard).id?(r=t().reports.find(function(t){return t.id===e.id}))?(n={},r.name!==e.name&&(n.name=e.name),r.format!==e.format&&(n.format=e.format),r.scheduled!==e.scheduled&&(n.scheduled=e.scheduled),r.frequency!==e.frequency&&(n.frequency=e.frequency),r.dayOfWeek!==e.dayOfWeek&&(n.dayOfWeek=e.dayOfWeek),r.weekOfMonth!==e.weekOfMonth&&(n.weekOfMonth=e.weekOfMonth),r.sendTime!==e.sendTime&&(n.sendTime=e.sendTime),r.fixedEndDate!==e.fixedEndDate&&(n.fixedEndDate=e.fixedEndDate),r.reportDateRange!==e.reportDateRange&&(n.reportDateRange=e.reportDateRange),r.content.length===e.content.length&&r.content.every(function(t,r){return t===e.content[r]})||(n.content=d([],e.content,!0)),r.recipients.length===e.recipients.length&&r.recipients.every(function(t,r){return t===e.recipients[r]})||(n.recipients=d([],e.recipients,!0)),0===Object.keys(n).length?[2,r]:[4,t().updateReport(e.id,n)]):[2,!1]:[3,2];case 1:case 3:return[2,i.sent()];case 2:return[4,t().createReport({name:e.name,format:e.format,enabled:!1,content:d([],e.content,!0),recipients:d([],e.recipients,!0),scheduled:e.scheduled,frequency:e.frequency,dayOfWeek:e.dayOfWeek,weekOfMonth:e.weekOfMonth,sendTime:e.sendTime,fixedEndDate:e.fixedEndDate,reportDateRange:e.reportDateRange})]}})})},loadReportIntoWizard:function(e,r){var n=s.c.getState().wizard.currentStep,i=t().reports.find(function(t){return t.id===e});return!!i&&(s.c.setState({wizard:{id:i.id,currentStep:n,name:i.name,reportDateRange:i.reportDateRange,format:i.format,content:i.content,recipients:d([],i.recipients,!0),scheduled:i.scheduled,frequency:i.frequency,dayOfWeek:i.dayOfWeek,weekOfMonth:i.weekOfMonth,sendTime:i.sendTime,fixedEndDate:i.fixedEndDate||""},isOpen:r}),!0)},updateReport:function(t,r){return c(void 0,void 0,void 0,function(){var n;return u(this,function(s){switch(s.label){case 0:return r.id=t,[4,(0,i.Eo)("report/update",r)];case 1:return(n=s.sent()).success&&n.report?(e(function(e){return{reports:e.reports.map(function(e){return e.id===t?l({},n.report):e})}}),[2,n.report]):[2,!1]}})})},deleteReport:function(t){return c(void 0,void 0,void 0,function(){return u(this,function(r){switch(r.label){case 0:return[4,(0,i.Eo)("report/delete",{id:t})];case 1:return r.sent().success?(e(function(e){return{reports:e.reports.filter(function(e){return e.id!==t})}}),[2,!0]):[2,!1]}})})},duplicateReport:function(e){return c(void 0,void 0,void 0,function(){var r,n,s,i;return u(this,function(o){switch(o.label){case 0:return(r=t().reports.find(function(t){return t.id===e}))?(n=(0,a.__)("Copy","burst-statistics"),s="(".concat(n,")"),i=r.name.trimEnd().endsWith(s)?r.name:"".concat(r.name," ").concat(s),[4,t().createReport(l(l({},r),{id:void 0,name:i}))]):[2,!1];case 1:return[2,o.sent()]}})})},duplicateAndLoadReportIntoWizard:function(e){return c(void 0,void 0,void 0,function(){var r;return u(this,function(n){switch(n.label){case 0:return[4,t().duplicateReport(e)];case 1:return(r=n.sent())&&t().loadReportIntoWizard(r.id,!0)?(s.c.getState().setCurrentStep(4),[2,r]):[2,!1]}})})},toggleReportActive:function(e){return c(void 0,void 0,void 0,function(){var r,n;return u(this,function(s){switch(s.label){case 0:return(r=t().reports.find(function(t){return t.id===e}))?(n={enabled:!r.enabled},[4,t().updateReport(e,n)]):[2];case 1:return s.sent(),[2]}})})},createReport:function(r){return c(void 0,void 0,void 0,function(){var n,s;return u(this,function(a){switch(a.label){case 0:return[4,(0,i.Eo)("report/create",r)];case 1:return(null==(n=a.sent())?void 0:n.success)&&(null==n?void 0:n.report)?(s=n.report.id,e(function(e){return{reports:d([n.report],e.reports,!0)}}),t().loadReportIntoWizard(s,!0),[2,n.report]):[2,!1]}})})},sendTestEmail:function(e){return c(void 0,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,(0,i.Eo)("report/send-test-report",{id:e})];case 1:return[2,t.sent().success]}})})},sendEmailNow:function(e){return c(void 0,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,(0,i.Eo)("report/send-report-now",{id:e})];case 1:return[2,t.sent().success]}})})}}})},18118(e,t,r){r.d(t,{bx:()=>o});var n=r(30346),s=r(14243),i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},i.apply(this,arguments)},a=function(e){void 0===e&&(e=!0);var t=function(e,t){return{groups:{},setActiveTab:function(t,r){return e(function(e){var n;return{groups:i(i({},e.groups),(n={},n[t]=r,n))}})},getActiveTab:function(r,n){var s=t().groups[r];return void 0===s&&n?(e(function(e){var t;return{groups:i(i({},e.groups),(t={},t[r]=n,t))}}),n):s}}};return e?(0,n.v)()((0,s.Zr)(t,{name:"burst-tabs-storage"})):(0,n.v)(t)},o=(a(),a(!1))},80762(e,t,r){r.d(t,{l:()=>n});var n=function(e){return t=void 0,r=void 0,s=function(){var t,r;return function(e,t){var r,n,s,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(i=0)),i;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){i.label=o[1];break}if(6===o[0]&&i.label<s[1]){i.label=s[1],s=o;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(o);break}s[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),navigator.clipboard&&navigator.clipboard.writeText?[4,navigator.clipboard.writeText(e)]:[3,2];case 1:return n.sent(),[2];case 2:return[3,4];case 3:return t=n.sent(),console.warn("Clipboard API failed, trying fallback",t),[3,4];case 4:return(r=document.createElement("textarea")).value=e,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),document.body.removeChild(r),[2]}})},new((n=void 0)||(n=Promise))(function(e,i){function a(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(a,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s}},70757(e,t,r){r.r(t),r.d(t,{component:()=>j});var n=r(10790),s=r(51609),i=r(13521),a=r(42782),o=r(17701),l=r(79453),c=r(67691),u=r(21632),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},d.apply(this,arguments)};const f=function(e){var t=e.currentSettingPage,r=(0,c.A)(),f=r.settings,b=r.saveSettings,m=(0,a.A)().saveGoals,h=t.id,g=(0,s.useMemo)(function(){return p(f,h)},[f,h]),x=(0,u.mN)({defaultValues:g}),v=x.handleSubmit,y=x.control,j=x.formState.dirtyFields,w=x.reset,_=(0,u.FH)({control:y}),N=(0,s.useMemo)(function(){var e=[];return t.groups.forEach(function(t){var r=f.filter(function(e){return e.menu_id===h&&e.group_id===t.id}).map(function(e){if(!e.react_conditions)return e;var t=Object.entries(e.react_conditions).filter(function(e){return"action"!==e[0]}).every(function(e){var t,r=e[0],n=e[1],s=null!==(t=null==_?void 0:_[r])&&void 0!==t?t:g[r];return"boolean"==typeof n&&(s=1===s||!0===s||"1"===s),Array.isArray(n)?Array.isArray(s)?n.some(function(e){return Array.isArray(e)&&s.length===e.length&&s.every(function(t,r){return t===e[r]})}):n.includes(s):s===n});return"disable"===(e.react_conditions.action||"hide")?d(d({},e),{disabled:!t}):t?e:null}).filter(Boolean);0<r.length&&e.push(d(d({},t),{fields:r}))}),e},[f,h,t.groups,_]);return(0,n.jsx)("form",{children:(0,n.jsxs)(i.A,{fallback:"Could not load Settings",children:[N.map(function(e,t){var r=t===N.length-1;return(0,n.jsx)(o.A,{group:e,fields:e.fields,control:y,isLastGroup:r},e.id)}),"license"!==h&&(0,n.jsx)(l.A,{onSubmit:v(function(e){var t=Object.keys(j).reduce(function(t,r){return t[r]=e[r],t},{});b(t).then(function(){w(e,{keepValues:!0,keepDefaultValues:!1})}),m()}),control:y})]})})};var p=function(e,t){var r={};return e.forEach(function(e){if(e.menu_id===t){var n=void 0!==e.value&&""!==e.value;r[e.id]=n?e.value:e.default}}),d({},r)},b=r(48474),m=r(40565),h=(0,s.memo)(function(e){var t=e.className,r=void 0===t?"":t,s=e.children,i=e.title,a=e.isOpen,o=e.onToggle;return(0,n.jsx)(m.e,{className:r,children:(0,n.jsxs)("details",{className:"group",open:a,onToggle:function(e){return o(e.currentTarget.open)},children:[(0,n.jsxs)("summary",{className:"flex cursor-pointer items-center justify-between p-4 hover:bg-gray-50 hover:rounded-xl",children:[(0,n.jsx)("span",{className:"text-base font-medium text-black",children:i}),(0,n.jsx)("svg",{className:"h-5 w-5 text-gray transition-transform group-open:rotate-180",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),(0,n.jsx)("div",{className:"p-4 pt-2",children:s})]})})});h.displayName="CollapsableBlock";var g=r(27723),x=function(e){var t=e.settingsGroup,r=(0,c.A)().settings.filter(function(e){return e.notice&&e.menu_id===t.id}),i=(0,s.useState)(r.map(function(){return!1})),a=i[0],o=i[1];if(!r.length)return null;var l=a.filter(function(e){return e}).length>r.length/2?(0,g.__)("Collapse all","burst-statistics"):(0,g.__)("Expand all","burst-statistics");return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex w-full justify-between",children:[(0,n.jsx)("h2",{className:"py-4 text-base font-bold",children:(0,g.__)("Notifications","burst-statistics")}),(0,n.jsx)("button",{className:"cursor-pointer text-sm text-gray underline",onClick:function(){var e=a.filter(function(e){return e}).length<=notices.length/2;o(notices.map(function(){return e}))},children:l})]}),0<r.length&&r.map(function(e,t){return(0,n.jsx)(h,{title:e.notice.title,className:"mb-4 w-full flex-1 !bg-accent-light",isOpen:a[t],onToggle:function(e){return function(e,t){o(function(r){var n=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,i=t.length;s<i;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([],r,!0);return n[e]=t,n})}(t,e)},children:(0,n.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,n.jsx)("p",{className:"text-base font-normal",children:e.notice.description}),e.notice.url&&""!==e.notice.url&&(0,n.jsx)(b.N_,{className:"mt-2 text-base text-gray underline",to:e.notice.url,from:"/",children:(0,g.__)("Learn more","burst-statistics")})]})},t)})]})};x.displayName="SettingsNotices";const v=x;var y=r(97816);function j(){var e=y.q.useLoaderData().currentItem;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"col-span-12 lg:col-span-6 flex flex-col",children:(0,n.jsx)(f,{currentSettingPage:e})}),(0,n.jsx)("div",{className:"col-span-12 lg:col-span-3",children:(0,n.jsx)(v,{settingsGroup:e})})]})}}}]);