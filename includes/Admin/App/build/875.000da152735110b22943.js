"use strict";(self.webpackChunk_burst_statistics_burst_statistics=self.webpackChunk_burst_statistics_burst_statistics||[]).push([[875],{8353:(e,t,r)=>{r.d(t,{A:()=>v});var n=r(91637),s=r(51609),a=r.n(s),i=r(88432),o=r(61445),l=r(39988),c=r(88887),u=r(28786),d=r(53411),f=r(27723),p=r(21587),g=r(91788),b=r(86274),m=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const v=a().memo(function(e){var t=e.filter,r=e.filterValue,a=e.label,v=e.children,h=e.startDate,y=e.endDate,x=e.row,_=(0,i.R7)(),j=_.setFilters,w=_.filtersConf,N=_.getActiveFilters,k=(0,o.A)().getGoal,C=(0,l.G)(function(e){return e.setMetrics}),D=(0,l.G)(function(e){return e.getMetrics()}),A=(0,c.S)(function(e){return e.setStartDate}),S=(0,c.S)(function(e){return e.setEndDate}),O=(0,c.S)(function(e){return e.setRange}),E=(0,(0,b.A)().getValue)("filtering_by_domain"),F=(0,s.useMemo)(function(){return t&&w&&Object.prototype.hasOwnProperty.call(w,t)},[t,w]),P=(0,s.useMemo)(function(){if(!r)return!1;if(["page_url","referrer"].includes(t))return!0;try{return/^https?:\/\/.+/i.test(r)}catch(e){return!1}},[t,r]),I=(0,s.useCallback)(function(e){var n;e.stopPropagation();var s=r;if("page_url"===t&&!r.startsWith("http")){var a=(null===(n=window.burst_admin)||void 0===n?void 0:n.site_url)||window.location.origin;if(E){var i=N(),o=-1!==a.indexOf("https:")?"https://":"http://";Object.prototype.hasOwnProperty.call(x,"host")?a="".concat(o).concat(x.host):Object.prototype.hasOwnProperty.call(i,"host")&&(a="".concat(o).concat(i.host))}s="".concat(a).concat(r.startsWith("/")?"":"/").concat(r)}"referrer"!==t||r.startsWith("http")||(s="https://".concat(r)),window.open(s,"_blank","noopener,noreferrer")},[t,r]),R=(0,s.useMemo)(function(){return a?"".concat((0,f.__)("Click to filter by:","burst-statistics")," ").concat(a):(0,f.__)("Click to filter","burst-statistics")},[a]),M=(0,s.useMemo)(function(){return(0,f.__)("Open in new tab","burst-statistics")},[]),L=(0,s.useCallback)(function(){if(h){var e="",t="";if(/^\d+$/.test(h)){var r=10===h.toString().length?1e3*h:h;e=new Date(r).toISOString().split("T")[0]}else/\d{4}-\d{2}-\d{2}/.test(h)&&(e=h);y?/^\d+$/.test(y)?(r=10===y.toString().length?1e3*y:y,t=new Date(r).toISOString().split("T")[0]):/\d{4}-\d{2}-\d{2}/.test(y)&&(t=y):t=(new Date).toISOString().split("T")[0],(0,g.vd)(e)&&(0,g.vd)(t)&&(A(e),S(t),O("custom"))}},[h,y,A,S,O]),T=(0,s.useCallback)(function(e){var t=k(e);(null==t?void 0:t.goal_specific_page)?(j("page_url",t.goal_specific_page),j("goal_id",e),p.oR.info((0,f.__)("Filtering by goal & goal specific page","burst-statistics"))):(j("goal_id",e),p.oR.info((0,f.__)("Filtering by goal","burst-statistics"))),D.includes("conversions")||C(m(m([],D,!0),["conversions"],!1))},[k,j,D,C]),V=(0,s.useCallback)(function(e){e.stopPropagation(),F?("goal_id"===t?T(r):j(t,r),L()):console.warn('ClickToFilter: Invalid filter "'.concat(t,'" - not found in filter configuration'))},[t,r,F,T,j,L]);return t&&r&&F?(0,n.jsxs)("div",{className:"group flex items-center gap-2",children:[(0,n.jsx)("div",{className:"flex-1",children:v}),(0,n.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,n.jsx)(u.A,{content:R,children:(0,n.jsx)("div",{onClick:V,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"filter",size:14,color:"black"})})}),P&&(0,n.jsx)(u.A,{content:M,children:(0,n.jsx)("div",{onClick:I,className:"flex items-center justify-center w-6 h-6 bg-white/90 hover:bg-white border border-gray-200 rounded shadow-sm hover:shadow-md transition-all duration-150 cursor-pointer",children:(0,n.jsx)(d.A,{name:"referrers",size:14,color:"black"})})})]})]}):(0,n.jsx)(n.Fragment,{children:v})})},10371:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(91637),s=r(51609),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)},i=(0,s.forwardRef)(function(e,t){var r=e.type,s=void 0===r?"text":r,i=e.className,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["type","className"]);return(0,n.jsx)("input",a({ref:t,type:s,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(i||"")},o))});i.displayName="TextInput";const o=i},11989:(e,t,r)=>{r.d(t,{t:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.children,r=e.className,s=void 0===r?"":r,i=/\bp-\S+/.test(s);return(0,n.jsx)("div",{className:(0,a.A)("flex-grow",{"p-6":!i},s),children:t})});i.displayName="BlockContent"},23875:(e,t,r)=>{r.r(t),r.d(t,{component:()=>Q});var n=r(91637),s=r(83595),a=r(61327),i=r(27723),o=r(77902),l=r(67744),c=r(11989),u=r(39988),d=r(41631);const f=function(e){var t=e.selectedMetrics,r=e.filters,s=(0,u.G)(function(e){return e.setMetrics}),a={pageviews:{label:(0,i.__)("Pageviews","burst-statistics"),default:!0},visitors:{label:(0,i.__)("Visitors","burst-statistics"),default:!0},sessions:{label:(0,i.__)("Sessions","burst-statistics")},bounces:{label:(0,i.__)("Bounces","burst-statistics")},conversions:{label:(0,i.__)("Conversions","burst-statistics"),default:0<r.goal_id}};return(0,n.jsx)(d.A,{selectedOptions:t,options:a,onApply:function(e){s(e)}})};var p=r(51609),g=r(39887),b=r(49457);g.t1.register(g.PP,g.kc,g.FN,g.No,g.hE,g.m_,g.s$);const m=function(e){var t=e.data,r=(0,p.useMemo)(function(){return{responsive:"true",maintainAspectRatio:!1,cubicInterpolationMode:"monotone",plugins:{legend:{labels:{usePointStyle:!0,padding:15,font:{size:13,weight:400}}}},scales:{y:{ticks:{beginAtZero:!0,stepSize:20,maxTicksLimit:6}},x:{ticks:{maxTicksLimit:8}}},layout:{padding:0}}},[]);return(0,n.jsx)(b.N1,{options:r,data:t})};var v=r(88887),h=r(61626),y=r(3663);const x=function(e){return t=void 0,r=[e],s=function(e){var t=e.startDate,r=e.endDate,n=e.range,s=e.args;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("insights",t,r,n,s)];case 1:return[2,e.sent().data]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var _=r(88432);const j=function(){var e=(0,u.G)(function(e){return e.getMetrics()}),t=(0,v.S)(function(e){return e}),r=t.startDate,s=t.endDate,a=t.range,d=(0,_.R7)().filters,p={filters:d,metrics:e},g=(0,h.I)({queryKey:["insights",e,r,s,p],queryFn:function(){return x({startDate:r,endDate:s,range:a,args:p})},placeholderData:{labels:["-","-","-","-","-","-","-"],datasets:[{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(41, 182, 246, 0.2)",borderColor:"rgba(41, 182, 246, 1)",label:"-",fill:"false"},{data:[0,0,0,0,0,0,0],backgroundColor:"rgba(244, 191, 62, 0.2)",borderColor:"rgba(244, 191, 62, 1)",label:"-",fill:"false"}]}}),b=g.isLoading||g.isFetching;return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-12 xl:col-span-6 min-h-96",children:[(0,n.jsx)(l.q,{title:(0,i.__)("Insights","burst-statistics"),className:"border-b border-gray-200",controls:(0,n.jsx)(f,{selectedMetrics:e,filters:d})}),(0,n.jsx)(c.t,{children:g.data&&m&&(0,n.jsx)(m,{loading:b,data:g.data})})]})};var w=r(52698),N=r(20467),k=r(97884);const C=function(e){var t=e.noCompare,r=e.startDate,s=e.endDate,a="";if(t)a=(0,i.__)("No data available for comparison","burst-statistics");else{var o=(0,N.A)(r),l=(0,N.A)(s),c=(0,k.default)(l,o)+1;a=(1===c?(0,i.__)("vs. previous day","burst-statistics"):(0,i.__)("vs. previous %s days","burst-statistics")).replace("%s",c)}return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"text-sm font-medium leading-[1.5] text-gray",children:a})})};var D=r(91788),A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},A.apply(this,arguments)},S={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},O={conversions:(0,i.__)("Conversions","burst-statistics"),pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics")},E={default:{pageviews:function(e){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per session","burst-statistics").replace("%s",(0,D.ZV)(e.pageviews/e.sessions)),value:(0,D.ZV)(e.pageviews),exactValue:e.pageviews}},sessions:function(e){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s per session","burst-statistics").replace("%s",(0,D.fU)(e.pageviews/e.sessions*e.avg_time_on_page)),value:(0,D.ZV)(e.sessions),exactValue:e.sessions}},visitors:function(e){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s are new visitors","burst-statistics").replace("%s",(0,D.Nj)(e.first_time_visitors,e.visitors)),value:(0,D.ZV)(e.visitors),exactValue:e.visitors}},bounce_rate:function(e){return{title:(0,i.__)("Bounce Rate","burst-statistics"),subtitle:(0,i.__)("%s visitors bounced","burst-statistics").replace("%s",e.bounced_sessions),value:(0,D.ZV)(e.bounce_rate)+"%",exactValue:e.bounce_rate}}},goalSelected:{conversions:function(e){return{title:(0,i.__)("Conversions","burst-statistics"),subtitle:(0,i.__)("%s of pageviews converted","burst-statistics").replace("%s",(0,D.Nj)(e.conversion_rate,100)),value:(0,D.ZV)(e.conversions),exactValue:e.conversions}},pageviews:function(e){return{title:(0,i.__)("Pageviews","burst-statistics"),subtitle:(0,i.__)("%s pageviews per conversion","burst-statistics").replace("%s",(0,D.ZV)(e.pageviews/e.conversions)),value:(0,D.ZV)(e.pageviews),exactValue:e.pageviews}},sessions:function(e){return{title:(0,i.__)("Sessions","burst-statistics"),subtitle:(0,i.__)("%s sessions per conversion","burst-statistics").replace("%s",(0,D.ZV)(e.sessions/e.conversions)),value:(0,D.ZV)(e.sessions),exactValue:e.sessions}},visitors:function(e){return{title:(0,i.__)("Visitors","burst-statistics"),subtitle:(0,i.__)("%s visitors per conversion","burst-statistics").replace("%s",(0,D.ZV)(e.visitors/e.conversions)),value:(0,D.ZV)(e.visitors),exactValue:e.visitors}}}},F=function(e){var t={},r=e.current,n=e.previous,s="default",a=S;"goals"===e.view&&(s="goalSelected",a=O);var i=E[s];return Object.entries(a).forEach(function(e){var s=e[0],a=i[s]||E.default[s],o={};"bounce_rate"===s?(o=(0,D.oI)(r[s],n[s])).status="positive"===o.status?"negative":"positive":o=(0,D.fs)(r[s],n[s]),t[s]=A(A({},a(r,n)),{change:o.val,changeStatus:o.status})}),t};const P=function(e){return t=void 0,r=[e],s=function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("compare",r,n,s,a)];case 1:return t=e.sent().data,[2,F(t)]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var I=r(27257);const R=function(){var e=(0,v.S)(function(e){return e}),t=e.startDate,r=e.endDate,s=e.range,a={filters:(0,_.R7)().filters},u={pageviews:(0,i.__)("Pageviews","burst-statistics"),sessions:(0,i.__)("Sessions","burst-statistics"),visitors:(0,i.__)("Visitors","burst-statistics"),bounce_rate:(0,i.__)("Bounce Rate","burst-statistics")},d={};Object.keys(u).forEach(function(e){d[e]={title:u[e],subtitle:"-",value:"-",exactValue:"-",change:"-",changeStatus:""}});var f=(0,h.I)({queryKey:["compare",t,r,a],queryFn:function(){return P({startDate:t,endDate:r,range:s,args:a})},placeholderData:d}).data||{},p=!Object.keys(f).some(function(e){return""!==f[e].change});return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(l.q,{title:(0,i.__)("Compare","burst-statistics")}),(0,n.jsx)(c.t,{children:Object.keys(f).map(function(e,t){var r=f[e];return(0,n.jsx)(w.A,{iconKey:e,title:r.title,subtitle:r.subtitle,value:r.value,exactValue:r.exactValue,change:r.change,changeStatus:r.changeStatus},t)})}),(0,n.jsx)(I.p,{children:(0,n.jsx)(C,{noCompare:p,startDate:t,endDate:r})})]})};var M=r(8353),L=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},T=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},V={desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")},B=function(e){for(var t,r={},n=0,s=Object.entries(V);n<s.length;n++){var a=s[n],i=a[0],o=a[1];Object.assign(r,((t={})[i]={title:o,value:(0,D.Nj)(e[i].count,e.all.count)},t))}return r},z=function(e){for(var t,r={},n=0,s=Object.entries(V);n<s.length;n++){var a=s[n][0],i=e[a].os?e[a].os:"",o=e[a].browser?e[a].browser:"";Object.assign(r,((t={})[a]={device_id:e[a].device_id,subtitle:""===i&&""===o?"-":i+" / "+o},t))}return r},G=function(){return G=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},G.apply(this,arguments)},K=(0,p.memo)(function(e){var t=e.deviceKey,r=e.deviceData;return(0,n.jsx)(M.A,{filter:"device_id",filterValue:null==r?void 0:r.device_id,label:r.title,children:(0,n.jsx)(w.A,{iconKey:t,title:r.title,subtitle:r.subtitle,value:r.value,change:r.change,changeStatus:r.changeStatus})},t)});K.displayName="DeviceItem";const U=(0,p.memo)(function(){var e=(0,v.S)(function(e){return e}),t=e.startDate,r=e.endDate,s=e.range,a=(0,_.R7)().filters,u=(0,p.useMemo)(function(){return{filters:a}},[a]),d=(0,p.useMemo)(function(){return{desktop:(0,i.__)("Desktop","burst-statistics"),tablet:(0,i.__)("Tablet","burst-statistics"),mobile:(0,i.__)("Mobile","burst-statistics"),other:(0,i.__)("Other","burst-statistics")}},[]),f=(0,p.useMemo)(function(){var e={},t={},r={};return Object.keys(d).forEach(function(n){e[n]={title:d[n],value:"-%"},t[n]={subtitle:"-"},r[n]={title:d[n],value:"-%",subtitle:"-"}}),{emptyDataTitleValue:e,emptyDataSubtitle:t,placeholderData:r}},[d]),g=f.emptyDataTitleValue,b=f.emptyDataSubtitle,m=f.placeholderData,x=(0,h.I)({queryKey:["devicesTitleAndValue",t,r,u],queryFn:function(){return function(e){return L(void 0,[e],void 0,function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return T(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("devicesTitleAndValue",r,n,s,a)];case 1:return t=e.sent().data,[2,B(t)]}})})}({startDate:t,endDate:r,range:s,args:u})},placeholderData:g}),j=(0,h.I)({queryKey:["devicesSubtitle",t,r,u],queryFn:function(){return function(e){return L(void 0,[e],void 0,function(e){var t,r=e.startDate,n=e.endDate,s=e.range,a=e.args;return T(this,function(e){switch(e.label){case 0:return[4,(0,y.bQ)("devicesSubtitle",r,n,s,a)];case 1:return t=e.sent().data,[2,z(t)]}})})}({startDate:t,endDate:r,range:s,args:u})},placeholderData:b}),w=(0,p.useMemo)(function(){if(x.data&&j.data){var e=G({},x.data);return Object.keys(e).forEach(function(t){j.data[t]&&(e[t]=G(G({},e[t]),j.data[t]))}),e}return m},[x.data,j.data,m]),N=(0,p.useMemo)(function(){return Object.keys(w)},[w]);return(0,n.jsxs)(o.e,{className:"row-span-1 lg:col-span-6 xl:col-span-3",children:[(0,n.jsx)(l.q,{title:(0,i.__)("Devices","burst-statistics")}),(0,n.jsx)(c.t,{children:N.map(function(e){return(0,n.jsx)(K,{deviceKey:e,deviceData:w[e]},e)})})]})});var q=r(81096),Z=r(23130),W=r(84400);function Q(){var e=(0,W.A)().isPro?["parameters"]:["referrers"];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"col-span-12 flex justify-between items-center",children:[(0,n.jsx)(Z.A,{children:(0,n.jsx)(s.y,{})}),(0,n.jsx)(Z.A,{children:(0,n.jsx)(a.A,{})})]}),(0,n.jsx)(Z.A,{children:(0,n.jsx)(j,{})}),(0,n.jsx)(Z.A,{children:(0,n.jsx)(R,{})}),(0,n.jsx)(Z.A,{children:(0,n.jsx)(U,{})}),(0,n.jsx)(Z.A,{children:(0,n.jsx)(q.A,{allowedConfigs:["pages"],id:"1"})}),(0,n.jsx)(Z.A,{children:(0,n.jsx)(q.A,{allowedConfigs:e,id:"2"})})]})}r(89211)},24454:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(91637),s=r(51609),a=r(29436),i=r(66087),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)},l=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},c=(0,s.forwardRef)(function(e,t){var r=e.value,c=e.onChange,u=e.loadOptions,d=e.defaultOptions,f=void 0===d?[]:d,p=e.isLoading,g=void 0!==p&&p,b=e.isSearchable,m=void 0===b||b,v=e.name,h=e.disabled,y=void 0!==h&&h,x=e.placeholder,_=void 0===x?"Select an option...":x,j=e.insideModal,w=void 0!==j&&j,N=e.maxSelections,k=void 0===N?1:N,C=e.showRemoveButton,D=void 0===C||C,A=e.allowCustomValue,S=void 0===A||A,O=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["value","onChange","loadOptions","defaultOptions","isLoading","isSearchable","name","disabled","placeholder","insideModal","maxSelections","showRemoveButton","allowCustomValue"]),E=(0,s.useState)([]),F=E[0],P=E[1],I=(0,s.useState)(""),R=I[0],M=I[1],L=(0,s.useState)(g),T=L[0],V=L[1];(0,s.useEffect)(function(){V(g)},[g]);var B=(0,s.useMemo)(function(){return(0,i.debounce)(function(e){u&&(V(!0),u(e,function(e){P(e),V(!1)}))},150)},[u]);(0,s.useEffect)(function(){return function(){B.cancel()}},[B]),(0,s.useEffect)(function(){Array.isArray(f)?P(f):!0===f&&u&&(V(!0),u("",function(e){P(e),V(!1)}))},[f,u]);var z=function(){if(!r)return[];if(Array.isArray(r))return r.map(function(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"value")&&Object.prototype.hasOwnProperty.call(e,"label")?e:F.find(function(t){return t.value===e})||{value:e,label:e.toString()}});if("object"==typeof r&&Object.prototype.hasOwnProperty.call(r,"value")&&Object.prototype.hasOwnProperty.call(r,"label"))return[r];var e=F.find(function(e){return e.value===r});return e?[e]:[{value:r,label:r.toString()}]}(),G=F.filter(function(e){return!z.some(function(t){return t.value===e.value})}),K=S&&""!==R.trim()&&(0===F.length||!F.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===R.toLowerCase()})&&!z.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===R.toLowerCase()}));K&&(G=l([{value:R.trim(),label:R.trim(),isCustom:!0}],G,!0));var U=(0,a.mH)({selectedItems:z,onStateChange:function(e){var t=e.selectedItems;switch(e.type){case a.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case a.mH.stateChangeTypes.SelectedItemKeyDownDelete:case a.mH.stateChangeTypes.DropdownKeyDownBackspace:case a.mH.stateChangeTypes.FunctionRemoveSelectedItem:t&&c(1===k?0<t.length?t[0]:null:t)}}}),q=U.getSelectedItemProps,Z=U.getDropdownProps,W=(0,a.Bp)({items:G,selectedItem:null,inputValue:R,stateReducer:function(e,t){var r=t.changes;switch(t.type){case a.Bp.stateChangeTypes.InputKeyDownEnter:case a.Bp.stateChangeTypes.ItemClick:return o(o({},r),{isOpen:1<k,highlightedIndex:0,inputValue:""});default:return r}},onStateChange:function(e){var t=e.type,r=e.selectedItem,n=e.inputValue;switch(t){case a.Bp.stateChangeTypes.InputKeyDownEnter:case a.Bp.stateChangeTypes.ItemClick:if(r)if(1===k)c(r),M("");else if(z.length<k){var s=l(l([],z,!0),[r],!1);c(s),M("")}break;case a.Bp.stateChangeTypes.InputChange:M(n||""),u&&m&&B(n||"")}},itemToString:function(e){return e?e.label:""}}),Q=W.isOpen,H=W.getToggleButtonProps,Y=W.getInputProps,$=W.getMenuProps,X=W.getItemProps,J=W.highlightedIndex,ee=W.getComboboxProps,te=function(e){var t=z.filter(function(t){return t.value!==e.value});c(1===k?0<t.length?t[0]:null:t)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",o({},ee(),{className:"flex min-h-[2.5rem] w-full rounded-md border border-gray-400 bg-white focus-within:border-primary-dark focus-within:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",children:[(0,n.jsxs)("div",{className:"flex flex-1 flex-wrap items-center gap-1 p-1",children:[z.map(function(e,t){return(0,n.jsxs)("span",o({},q({selectedItem:e,index:t}),{className:"inline-flex items-center gap-1 rounded bg-primary-light px-2 py-1 text-xs text-primary-dark focus:bg-primary focus:text-white focus:outline-none",children:[e.label,D&&(0,n.jsx)("button",{type:"button",onClick:function(t){t.stopPropagation(),te(e)},className:"ml-1 rounded-full hover:bg-primary hover:text-white focus:bg-primary focus:text-white focus:outline-none","aria-label":"Remove ".concat(e.label),children:(0,n.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),"selected-item-".concat(t))}),(1===k||z.length<k)&&(0,n.jsx)("input",o({},Y(Z(o(o(o({preventKeyAction:Q},t?{ref:t}:{}),{name:v,disabled:y,placeholder:0===z.length?_:1<k?"Add ".concat(k-z.length," more..."):"",readOnly:!m,onKeyDown:function(e){if("Backspace"===e.key&&""===R&&0<z.length){e.preventDefault();var t=z[z.length-1];te(t)}}}),O))),{className:"flex-1 min-w-[120px] border-none bg-transparent p-1 focus:outline-none disabled:cursor-not-allowed",style:{outline:"none"}}))]}),(0,n.jsxs)("div",{className:"flex items-center border-l border-gray-300",children:[0<k&&(0,n.jsxs)("span",{className:"px-2 text-xs text-gray-500 border-r border-gray-200",children:[z.length,"/",k]}),(0,n.jsx)("button",o({type:"button"},H({disabled:y}),{className:"flex items-center justify-center bg-transparent px-2 py-2 hover:bg-gray-100 focus:border-primary-dark focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-200","aria-label":"Toggle menu",children:T?(0,n.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-primary"}):(0,n.jsx)("svg",{className:"h-4 w-4 transition-transform ".concat(Q?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}))]})]})),(0,n.jsx)("div",o({},$(),{className:"w-full ".concat(w?"fixed":""," ").concat(Q?"":"hidden"),children:(0,n.jsxs)("ul",{className:"relative top-0 z-[9999] max-h-60 overflow-y-auto w-full rounded-md border border-gray-300 bg-white shadow-lg ".concat(Q&&G.length?"":"hidden"),children:[G.map(function(e,t){return(0,n.jsx)("li",o({},X({item:e,index:t}),{className:"cursor-pointer px-3 py-2 text-sm first:rounded-t-md last:rounded-b-md ".concat(J===t?"bg-primary-light text-primary-dark":"hover:bg-gray-100"),children:e.isCustom?(0,n.jsxs)("span",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"h-4 w-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Create "',e.label,'"']}):e.label}),e.value)}),0===G.length&&!T&&(0,n.jsx)("li",{className:"px-3 py-2 text-sm text-gray-500",children:z.length>=k?"Maximum ".concat(k," selection").concat(1<k?"s":""," reached"):"No options found"})]})}))]})});c.displayName="AsyncSelectInput";const u=c},27257:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.children,r=e.className,s=void 0===r?"":r;return(0,n.jsx)("div",{className:(0,a.A)(s,"flex items-center justify-between px-6 py-3"),children:t})});i.displayName="BlockFooter"},28786:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(9564),a=r(27723);const i=function(e){var t=e.content,r=e.side,i=void 0===r?"top":r,o=e.hasArrow,l=void 0===o||o,c=e.delayDuration,u=void 0===c?300:c,d=e.children;return(0,n.jsx)(s.Kq,{delayDuration:u,children:(0,n.jsxs)(s.bL,{children:[(0,n.jsx)(s.l9,{"aria-label":(0,a.__)("Help information","burst-statistics"),onClick:function(e){e.preventDefault(),e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},children:d}),(0,n.jsxs)(s.UC,{side:i,sideOffset:5,className:"z-[99999] max-w-xs bg-gray-200 text-gray border border-gray-300 px-2 py-1.5 text-base rounded shadow-md\n            animate-in fade-in-50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0\n            data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2\n            data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2\n            data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2\n            data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2",onClick:function(e){return e.stopPropagation()},children:["string"==typeof t?(0,a.__)(t,"burst-statistics"):t,l&&(0,n.jsx)(s.i3,{className:"fill-gray-300",width:10,height:5})]})]})})}},39988:(e,t,r)=>{r.d(t,{G:()=>a});var n=r(30346),s=r(14243),a=(0,n.v)((0,s.Zr)(function(e,t){return{metrics:["visitors","pageviews"],loaded:!1,getMetrics:function(){if(t().loaded)return t().metrics;var r=t().metrics||["visitors","pageviews"];return r=r.filter(function(e){return"conversions"!==e}),e({metrics:r,loaded:!0}),r},setMetrics:function(t){e({metrics:t})}}},{name:"burst-insights-storage",partialize:function(e){return{metrics:e.metrics}},onRehydrateStorage:function(){return function(e){e&&e.metrics&&(e.metrics=e.metrics.filter(function(e){return"conversions"!==e}))}}}))},41631:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(91637),s=r(51609),a=r(89668),i=r(65825),o=r(50552),l=r(53411),c=r(27723),u=r(35812),d=r(65162);const f=function(e){var t=e.title,r=e.children,s=e.footer,a=e.isOpen,i=e.setIsOpen,o=e.showFilterIcon,c=void 0===o||o;return(0,n.jsxs)(d.bL,{open:a,onOpenChange:i,children:[(0,n.jsx)(d.l9,{id:"burst-filter-button",onClick:function(){return i(!a)},children:c&&(0,n.jsx)("div",{className:"".concat(a?"bg-gray-300 shadow-lg":"bg-gray-100 shadow-sm"," border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100"),children:(0,n.jsx)(l.A,{name:"filter"})})}),(0,n.jsx)(d.ZL,{container:document.querySelector(".burst"),children:(0,n.jsxs)(d.UC,{className:"z-50 min-w-[280px] max-w-[600px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(d.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsx)("div",{className:"border-b border-gray-100 px-4 py-3",children:(0,n.jsx)("h5",{className:"m-0 text-base font-semibold text-black",children:t})}),(0,n.jsx)("div",{className:"px-4 py-2",children:r}),s&&(0,n.jsx)("div",{className:"flex gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-4 py-3",children:s})]})})]})};var p=r(84400),g=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const b=function(e){var t=e.onApply,r=e.id,d=e.options,b=e.selectedOptions,m=e.defaultOptions,v=void 0===m?[]:m,h=e.selectionMode,y=void 0===h?"multiple":h,x=(0,s.useState)(!1),_=x[0],j=x[1],w=(0,s.useState)(b),N=w[0],k=w[1],C=(0,s.useMemo)(function(){var e={},t=[];return Object.keys(d).forEach(function(r){var n=d[r].category;n?(e[n]||(e[n]=[]),e[n].push(r)):t.push(r)}),{categories:e,uncategorized:t}},[d]),D=C.categories,A=C.uncategorized;(0,s.useEffect)(function(){k(b)},[b]);var S,O,E=(0,p.A)().isLicenseValid,F=function(e){if("single"!==y||e&&0!==e.length)t(e);else{var r=Object.keys(d)[0];r&&t([r])}j(!1)},P=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.A,{onClick:function(){return F(N),void j(!1)},btnVariant:"primary",size:"sm",className:"flex-1",children:(0,c.__)("Apply","burst-statistics")}),(0,n.jsx)(o.A,{onClick:function(){return function(){var e=0<v.length?v:Object.keys(d).filter(function(e){return d[e].default});if(e=e.filter(function(e){return Object.keys(d).includes(e)}),"single"===y){var t=0<e.length?e[0]:Object.keys(d)[0];k([t]),F([t])}else k(e),F(e);j(!1)}()},btnVariant:"tertiary",size:"sm",className:"flex-1",children:(0,c.__)("Reset to defaults","burst-statistics")})]});return(0,n.jsx)(f,{isOpen:_,setIsOpen:function(e){e?j(!0):(j(!1),k(b))},title:"single"===y?(0,c.__)("Select metric","burst-statistics"):(0,c.__)("Select metrics","burst-statistics"),footer:P,children:"single"===y?(0,n.jsx)("div",{className:"flex flex-col gap-2",children:Object.keys(d).map(function(e){return(0,n.jsx)(i.A,{id:r+"_"+e,name:r+"_radio_group",value:e,label:d[e].label,checked:N[0]===e,disabled:!0===d[e].disabled||d[e].pro&&!E,onChange:function(e){return k([e])},children:d[e].pro&&!E&&(0,n.jsx)(u.A,{label:"Pro"})},e)})}):(S={traffic:(0,c.__)("Traffic","burst-statistics"),engagement:(0,c.__)("Engagement","burst-statistics"),conversions:(0,c.__)("Conversions","burst-statistics")},O=function(e){return(0,n.jsxs)("div",{className:"flex items-center gap-2.5 py-1",children:[(0,n.jsx)(a.bL,{className:"focus:ring-blue-500 flex h-4 w-4 items-center justify-center rounded border-2 border-gray-300 bg-white transition-colors hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2",id:r+"_"+e,checked:N.includes(e),"aria-label":(0,c.__)("Change metrics","burst-statistics"),disabled:!0===d[e].disabled||d[e].pro&&!E,onCheckedChange:function(){return function(e){"single"===y?k([e]):N.includes(e)?k(N.filter(function(t){return t!==e})):k(g(g([],N,!0),[e],!1))}(e)},children:(0,n.jsx)(a.C1,{children:(0,n.jsx)(l.A,{name:"check",size:14,color:"green",strokeWidth:2})})}),(0,n.jsx)("label",{className:"flex-1 cursor-pointer text-sm text-gray",htmlFor:r+"_"+e,children:d[e].label}),(0,n.jsx)("div",{className:"flex-shrink-0",children:d[e].pro&&!E&&(0,n.jsx)(u.A,{label:"Pro"})})]},e)},0<Object.keys(D).length?(0,n.jsxs)("div",{className:"flex flex-col gap-3",children:[0<A.length&&(0,n.jsx)("div",{className:"flex flex-col",children:A.map(O)}),["traffic","engagement","conversions"].map(function(e){return D[e]&&0!==D[e].length?(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1 mt-2 first:mt-0",children:S[e]||e}),D[e].map(O)]},e):null})]}):Object.keys(d).map(O))})}},42552:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(85155),a=r(27723);const i=function(e){var t=e.country,r=e.countryNiceName,i=void 0===r?"":r,o=e.iconOnly,l=void 0!==o&&o;if("string"!=typeof t)return(0,n.jsx)("span",{className:"flex items-center justify-start gap-1.5",children:i});""===i&&(i=t),""===i&&(i=(0,a.__)("Unknown","burst-statistics")),t=t.toLowerCase();var c="".concat(burst_settings.plugin_url,"includes/Pro/assets/flags/4x3/").concat(t,".svg");return l?(0,n.jsx)(s.k,{src:c,className:"burst-flag [&_svg]:h-[13px] [&_svg]:w-auto [&_div]:flex burst-flag-".concat(t),title:i}):(0,n.jsxs)("span",{className:"flex items-center justify-start gap-1.5",children:[(0,n.jsx)(s.k,{src:c,className:"burst-flag [&_svg]:h-[13px] [&_svg]:w-auto [&_div]:flex burst-flag-".concat(t),title:i})," ",i]})}},52698:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(53411),a=r(28786);const i=function(e){var t,r=e.title,i=e.subtitle,o=e.value,l=e.exactValue,c=e.change,u=e.changeStatus,d=e.iconKey,f=void 0===d?null:d,p=e.className,g=void 0===p?"":p;return t=!(!l||1e3>l)&&l,(0,n.jsxs)("div",{className:"flex items-start gap-3 py-2 ".concat(g),children:[f&&(0,n.jsx)(s.A,{name:f,className:"mt-1"}),(0,n.jsxs)("div",{className:"flex-1 label",children:[(0,n.jsx)("h3",{className:"text-base font-semibold text-black",children:r}),i&&(0,n.jsx)("p",{className:"text-sm text-gray",children:i})]}),(0,n.jsxs)("div",{className:"text-right",children:[t?(0,n.jsx)(a.A,{content:t,delayDuration:1e3,children:(0,n.jsx)("span",{className:"text-xl font-bold text-black value",children:o})}):(0,n.jsx)("span",{className:"text-xl font-bold text-black value",children:o}),(0,n.jsx)("p",{className:"text-sm ".concat("positive"===u?"text-green":"text-red"),children:c})]})]})}},61327:(e,t,r)=>{r.d(t,{A:()=>A});var n=r(91637),s=r(51609),a=r(33597),i=r(20467),o=r(89717),l=r(53411),c=r(36095),u=r(77363),d=r(11672),f=r(30618),p=r(88887),g=r(91788),b=r(23568),m="yyyy-MM-dd",v=["today","yesterday","last-7-days","last-30-days","last-90-days","last-month","week-to-date","month-to-date","year-to-date","last-year","custom"],h=["/statistics","/sources","/sales"],y=function(e){if(!e)return!1;var t=(0,i.A)(e);return(0,f.default)(t)&&/^\d{4}-\d{2}-\d{2}$/.test(e)},x=function(e){return!!e&&v.includes(e)},_=function(e){var t=e.range,r=e.startDate,n=e.endDate;return x(t)?"custom"!==t||y(r)&&y(n):!(!y(r)||!y(n))},j=function(e,t){var r={};return Object.keys(e).forEach(function(t){t!==b.Nb&&"startDate"!==t&&"endDate"!==t&&"range"!==t&&void 0!==e[t]&&(r[t]=e[t])}),t.range&&(r.range=t.range),t.startDate&&(r.startDate=t.startDate),t.endDate&&(r.endDate=t.endDate),r[b.Nb]="",r},w=function(){var e,t=(0,c.Z)(),r=(0,u.z)(),n=(0,s.useRef)(!1),a=(e=r.pathname,h.some(function(t){return e.startsWith(t)})),i=(0,p.S)(function(e){return e.startDate}),l=(0,p.S)(function(e){return e.endDate}),f=(0,p.S)(function(e){return e.range}),b=(0,p.S)(function(e){return e.setStartDate}),v=(0,p.S)(function(e){return e.setEndDate}),w=(0,p.S)(function(e){return e.setRange}),N=(0,d.S)({strict:!1}),k=(0,s.useMemo)(function(){if(a&&_(N)){var e=N.range,t=N.startDate,r=N.endDate;if(x(e)&&"custom"!==e){var n=function(e){if("custom"===e||!function(e){return e in g.cA}(e))return null;var t=g.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,o.default)(r,m),endDate:(0,o.default)(n,m)}}(e);if(n)return{range:e,startDate:n.startDate,endDate:n.endDate}}if(y(t)&&y(r))return{range:e||"custom",startDate:t,endDate:r}}return{range:f,startDate:i,endDate:l}},[N,a,i,l,f]);(0,s.useEffect)(function(){if(a&&!n.current)if(n.current=!0,_(N)){var e=N.range,r=N.startDate,s=N.endDate;x(e)&&"custom"!==e?w(e):y(r)&&y(s)&&(b(r),v(s),w("custom"))}else if(f){var o={range:f};"custom"===f&&(o.startDate=i,o.endDate=l);var c=j(N,o);t({search:c,replace:!0})}},[a]),(0,s.useEffect)(function(){if(a&&n.current&&_(N)){var e=N.range,t=N.startDate,r=N.endDate;x(e)&&"custom"!==e?f!==e&&w(e):y(t)&&y(r)&&(i!==t&&b(t),l!==r&&v(r),"custom"!==f&&w("custom"))}},[N,a,i,l,f,b,v,w]);var C=(0,s.useCallback)(function(e,r,n){if("custom"===e&&r&&n?(b(r),v(n),w("custom")):w(e),a){var s={range:e};"custom"===e&&r&&n&&(s.startDate=r,s.endDate=n),t({search:function(e){return j(e,s)},replace:!1})}},[t,a,b,v,w]),D=(0,s.useCallback)(function(e){"custom"===e?(w("custom"),a&&t({search:function(e){return j(e,{range:"custom",startDate:i,endDate:l})},replace:!1})):C(e)},[C,w,a,t,i,l]),A=(0,s.useCallback)(function(e){C("custom",e,k.endDate)},[C,k.endDate]),S=(0,s.useCallback)(function(e){C("custom",k.startDate,e)},[C,k.startDate]);return{startDate:k.startDate,endDate:k.endDate,range:k.range,isDateRangeRoute:a,setDateRange:C,setRange:D,setStartDate:A,setEndDate:S}},N=r(65162),k="yyyy-MM-dd",C=new Date(2022,0,1),D=function(e){var t=e.range,r=e.display,s=e.isOpen,a=e.setIsOpen;return(0,n.jsxs)(N.l9,{className:"burst-date-button flex min-w-[200px] items-center gap-2 rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]",onClick:function(){return a(!s)},children:[(0,n.jsx)(l.A,{name:"calendar",size:"18"}),(0,n.jsx)("span",{className:"w-full text-base",children:"custom"===t?"".concat(r.startDate," - ").concat(r.endDate):g.cA[t].label}),(0,n.jsx)(l.A,{name:"chevron-down"})]})};const A=function(){var e=(0,s.useState)(!1),t=e[0],r=e[1],l=w(),c=l.startDate,u=l.endDate,d=l.setDateRange,f=l.range,p=(0,s.useState)({startDate:(0,i.A)(c),endDate:(0,i.A)(u),key:"selection"}),b=p[0],m=p[1],v=(0,s.useRef)(0),h=burst_settings.date_ranges,y=(0,s.useMemo)(function(){return(0,g.cf)(h)},[h]),x=(0,s.useMemo)(function(){return(0,g.YP)(c,u)},[c,u]),_=(0,s.useCallback)(function(e){try{v.current++;var t=e.selection,n=t.startDate,s=t.endDate,a=(0,o.default)(n,k),l=(0,o.default)(s,k);m({startDate:(0,i.A)(a),endDate:(0,i.A)(l),key:"selection"});var c=Object.keys(g.cA).find(function(t){return g.cA[t].isSelected(e.selection)})||"custom";(2===v.current||"custom"!==c||a!==l)&&(v.current=0,d(c,a,l),r(!1))}catch(e){console.error("Error updating date range:",e)}},[d]);return(0,n.jsx)("div",{className:"ml-auto w-auto",children:(0,n.jsxs)(N.bL,{open:t,onOpenChange:r,children:[(0,n.jsx)(D,{range:f,display:x,isOpen:t,setIsOpen:r}),(0,n.jsx)("div",{className:"burst-date-range-popover-container relative z-[2]",children:(0,n.jsx)(N.ZL,{container:document.querySelector(".burst-date-range-popover-container"),children:(0,n.jsxs)(N.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,n.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,n.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,n.jsx)(a.Ur,{ranges:[b],rangeColors:["#2b8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:_,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:C,maxDate:(0,g.ii)(),staticRanges:y})})]})})})]})})}},61445:(e,t,r)=>{r.d(t,{A:()=>b,l:()=>g});var n=r(61626),s=r(70802),a=r(78280),i=r(3663),o=r(21587),l=r(27723),c=r(89085),u=r(84400),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},d.apply(this,arguments)},f=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},p=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},g=function(e){return e.map(function(t){var r=d({},t);if(t.react_conditions){var n=function(e,t){return!e||0===Object.keys(e).length||Object.entries(e).some(function(e){var r=e[0],n=e[1],s=t.find(function(e){return e.id===r});if(!s)return!1;var a=s.value;return!!a&&n.includes(a)})}(t.react_conditions,e);"disable"===t.condition_action?r.disabled=!n:r.conditionallyDisabled=!n}return r})};const b=function(){var e,t,r,g=(0,s.jE)(),b=(0,u.A)().isPro,m=(0,n.I)({queryKey:["goals_data"],queryFn:function(){return f(void 0,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,(0,i.DX)()];case 1:return[2,{goals:(e=t.sent()).goals||[],predefinedGoals:e.predefinedGoals||[],goalFields:Object.values(e.goalFields||{})}]}})})},retry:1}),v=(0,a.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){var e,t;return p(this,function(r){switch(r.label){case 0:return e=(null===(t=g.getQueryData(["goals_data"]))||void 0===t?void 0:t.goals)||[],[4,(0,i.d2)({goals:e})];case 1:return[2,r.sent()]}})})},onSuccess:function(){},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to save goals","burst-statistics"))}}),h=(0,a.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t,r=e.id,n=e.value;return p(this,function(e){switch(e.label){case 0:return t=[{id:r,title:n}],[4,(0,i.d2)({goals:t})];case 1:return[2,e.sent()]}})})},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),y=(0,a.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,(0,i.D)()];case 1:return[2,e.sent()]}})})},onSuccess:function(e){g.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.oR.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to add goal","burst-statistics"))}}),x=(0,a.n)({mutationFn:function(e){return f(void 0,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(0,i.$x)(e)];case 1:return[2,t.sent()]}})})},onSuccess:function(e,t){e.deleted&&(g.setQueryData(["goals_data"],function(e){return e?(0,c.jM)(e,function(e){if(1===e.goals.length)e.goals=[];else{var r=e.goals.findIndex(function(e){return e.id===t});-1!==r&&e.goals.splice(r,1)}}):e}),o.oR.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(e){console.error(e),o.oR.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),_=(0,a.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t=e.predefinedGoalId;return p(this,function(e){switch(e.label){case 0:if(!b)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,i.ZI)(t)];case 1:return[2,e.sent()]}})})},onSuccess:function(e){g.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),o.oR.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(e){console.error(e),o.oR.error(e.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(e=m.data)||void 0===e?void 0:e.goals)||[],goalFields:(null===(t=m.data)||void 0===t?void 0:t.goalFields)||[],predefinedGoals:(null===(r=m.data)||void 0===r?void 0:r.predefinedGoals)||[],isLoading:m.isLoading,isError:m.isError,getGoal:function(e){var t,r=(null===(t=m.data)||void 0===t?void 0:t.goals)||[];if(!Array.isArray(r))return!1;var n=r.findIndex(function(t){return t.id==e});return-1!==n&&r[n]},setGoalValue:function(e,t,r){g.setQueryData(["goals_data"],function(n){return n?(0,c.jM)(n,function(n){var s=n.goals.findIndex(function(t){return t.id===e});-1!==s&&(n.goals[s][t]=r)}):n})},updateGoal:function(e,t){g.setQueryData(["goals_data"],function(r){return r?(0,c.jM)(r,function(r){var n=r.goals.findIndex(function(t){return t.id===e});-1!==n&&(r.goals[n]=d(d({},r.goals[n]),t))}):r})},getGoalAsync:function(e){return f(void 0,void 0,void 0,function(){var t,r;return p(this,function(n){switch(n.label){case 0:return[4,g.ensureQueryData({queryKey:["goals_data"],queryFn:i.DX})];case 1:return t=n.sent(),[2,(null===(r=null==t?void 0:t.goals)||void 0===r?void 0:r.find(function(t){return String(t.id)===String(e)}))||null]}})})},saveGoals:v.mutateAsync,saveGoalTitle:function(e,t){return h.mutateAsync({id:e,value:t})},addGoal:y.mutateAsync,deleteGoal:x.mutateAsync,addPredefinedGoal:function(e){return _.mutateAsync({predefinedGoalId:e})},invalidateGoals:function(){return g.invalidateQueries(["goals_data"])}}}},65825:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),s=r(51609),a=r(27723),i=r(53411),o=(0,s.forwardRef)(function(e,t){var r=e.id,s=e.name,o=e.value,l=e.label,c=e.checked,u=e.disabled,d=void 0!==u&&u,f=e.onChange,p=e.className,g=void 0===p?"":p,b=e.tooltip,m=void 0===b?"":b,v=e.recommended,h=void 0!==v&&v,y=e.children;return(0,n.jsxs)("div",{className:"flex items-center gap-2 ".concat(g),children:[(0,n.jsx)("input",{ref:t,type:"radio",id:r,name:s,value:o,checked:c,disabled:d,onChange:function(e){return f(e.target.value)},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 my-1 mx-0"}),(0,n.jsxs)("label",{htmlFor:r,className:"text-sm text-gray cursor-pointer",children:[l," ",y," ",h&&(0,n.jsxs)("span",{className:"text-xs font-semibold",children:["(",(0,a.__)("Recommended","burst-statistics"),")"]})]}),m&&(0,n.jsx)(i.A,{tooltip:m,color:"blue",name:"help",size:16,className:"bg-blue-light rounded-full"})]})});o.displayName="RadioInput";const l=o},67744:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(91637),s=r(51609),a=r(2573),i=(0,s.memo)(function(e){var t=e.title,r=e.controls,s=e.className,i=void 0===s?"":s;return(0,n.jsxs)("div",{className:(0,a.A)(i,"flex min-h-16 items-center justify-between px-6 gap-4 max-m:px-2.5"),children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:t}),r]})});i.displayName="BlockHeading"},77902:(e,t,r)=>{r.d(t,{e:()=>i});var n=r(91637),s=r(2573),a=r(23130),i=(0,r(51609).memo)(function(e){var t=e.className,r=void 0===t?"":t,i=e.children;return(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:(0,s.A)("col-span-12 flex flex-col rounded-xl bg-white shadow-sm relative border border-gray-300",r),children:i})})});i.displayName="Block"},78548:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(91637),s=r(51609),a=r(2573),i=r(53411),o=(0,s.forwardRef)(function(e,t){var r=e.inputId,s=e.options,o=e.value,l=e.columns,c=void 0===l?2:l,u=e.disabled,d=void 0!==u&&u,f=e.goalId,p=e.onChange,g=e.className,b=void 0===g?"":g,m=f?"".concat(f,"-").concat(r):r;return(0,n.jsx)("div",{className:(0,a.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(c),b),ref:t,children:Object.keys(s).map(function(e){var t=s[e],r="".concat(m,"-").concat(t.type),l=t.type===o;return(0,n.jsxs)("div",{className:"w-full bg-gray-200 rounded-m",children:[(0,n.jsx)("input",{type:"radio",checked:l,name:m,id:r,value:t.type,disabled:d,onChange:function(e){p(e.target.value)},className:"sr-only opacity-0 absolute"}),(0,n.jsxs)("label",{htmlFor:r,className:(0,a.A)("flex gap-2.5 m-[1px] items-start space-x-3 p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":l,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!l,"opacity-50 cursor-not-allowed":d}),children:[(0,n.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,n.jsx)("div",{className:(0,a.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":l,"border-gray-300 bg-white":!l}),children:l&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,n.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(i.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,n.jsx)("h5",{className:(0,a.A)("text-base font-medium transition-colors text-gray-900"),children:t.label})]}),t.description&&1<t.description.length&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,n.jsx)("p",{className:(0,a.A)("text-sm transition-colors truncate",{"text-gray-600":l,"text-gray-500":!l}),children:t.description})]})]})]})]},r)})})});o.displayName="RadioButtonsInput";const l=o},81096:(e,t,r)=>{r.d(t,{A:()=>le});var n=r(91637),s=r(27723),a=r(51609),i=r(41631),o=r(53411);const l=function(e){var t=e.value,r=void 0===t?"":t,i=e.onChange,l=e.placeholder,c=void 0===l?(0,s.__)("Search","burst-statistics"):l,u=e.className,d=void 0===u?"":u,f=(0,a.useState)(!1),p=f[0],g=f[1],b=(0,a.useRef)(null),m=(0,a.useCallback)(function(){g(function(e){var t=!e;return t?setTimeout(function(){var e;null===(e=b.current)||void 0===e||e.focus()},0):null==i||i(""),t})},[i]),v=(0,a.useCallback)(function(){""===r.trim()&&g(!1)},[r]),h=(0,a.useCallback)(function(e){null==i||i(e.target.value)},[i]),y=(0,a.useCallback)(function(){var e;null==i||i(""),null===(e=b.current)||void 0===e||e.focus()},[i]),x=p||""!==r.trim();return(0,n.jsx)("div",{className:"relative ".concat(d),children:x?(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{ref:b,className:"bg-white border border-gray-300 rounded-full px-2.5 py-1 pr-10 min-w-48 transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 focus:outline-none focus:shadow-sm",type:"text",placeholder:c,value:r,onChange:h,onBlur:v,onKeyDown:function(e){"Escape"===e.key&&(null==i||i(""),g(!1))}}),r&&(0,n.jsx)("button",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors duration-200",onClick:y,onMouseDown:function(e){return e.preventDefault()},tabIndex:-1,"aria-label":(0,s.__)("Clear search","burst-statistics"),children:(0,n.jsx)(o.A,{name:"times",size:16})})]}):(0,n.jsx)("div",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 cursor-pointer rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100",onClick:m,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m())},tabIndex:0,role:"button","aria-label":c,children:(0,n.jsx)(o.A,{name:"search"})})})};var c=r(42617),u=r(65162);const d=function(e){var t=e.children,r=e.className,i=e.title,l=e.subtitle,c=e.bulletPoints,d=void 0===c?[]:c,f=e.primaryButtonUrl,p=e.secondaryButtonUrl,g=(0,a.useState)(!1),b=g[0],m=g[1];return(0,n.jsxs)(u.bL,{open:b,onOpenChange:m,children:[(0,n.jsx)(u.l9,{className:"cursor-pointer ".concat(r),onMouseEnter:function(){return m(!0)},children:t}),(0,n.jsx)(u.ZL,{children:(0,n.jsxs)(u.UC,{className:"z-[9999] min-w-[320px] max-w-[400px] rounded-lg border border-gray-200 bg-white p-0 shadow-xl",align:"start",sideOffset:10,arrowPadding:10,children:[(0,n.jsx)(u.i3,{className:"fill-white drop-shadow-sm"}),(0,n.jsxs)("div",{className:"relative border-b border-gray-100 px-6 py-4",children:[(0,n.jsx)(u.bm,{className:"absolute right-3 top-3 rounded-full p-1 transition-colors hover:bg-gray-100",children:(0,n.jsx)(o.A,{name:"times",size:16})}),(0,n.jsx)("h5",{className:"mb-1 pr-8 text-lg font-semibold text-black",children:i}),(0,n.jsx)("h6",{className:"m-0 text-sm text-gray",children:l})]}),(0,n.jsxs)("div",{className:"px-6 py-4",children:[(0,n.jsx)("p",{className:"mb-3 text-xs font-medium uppercase tracking-wide text-gray",children:(0,s.__)("Pro features include:","burst-statistics")}),(0,n.jsx)("div",{className:"space-y-2",children:d.map(function(e){var t=e.text,r=e.icon;return(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"flex h-5 w-5 flex-shrink-0 items-center justify-center",children:(0,n.jsx)(o.A,{name:r,size:16,color:"#2B8133"})}),(0,n.jsx)("p",{className:"m-0 text-sm text-gray",children:t})]},t)})})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 rounded-b-lg border-t border-gray-100 bg-gray-50 px-6 py-4",children:[(0,n.jsx)("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded bg-primary px-4 py-1 text-center text-base font-normal text-white no-underline transition-all duration-200 hover:bg-primary hover:[box-shadow:0_0_0_3px_rgba(43,129,51,0.5)]",children:(0,s.__)("Upgrade to Pro","burst-statistics")}),(0,n.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"w-full rounded border border-gray-400 bg-gray-100 px-4 py-1 text-center text-base font-normal text-gray no-underline transition-all duration-200 hover:bg-gray-200 hover:text-gray hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.1)]",children:(0,s.__)("Learn More","burst-statistics")})]})]})})]})};var f=r(84400);const p=(0,a.memo)(function(e){var t=e.value,r=e.onChange,s=e.options,i=(0,a.useCallback)(function(e){r(e)},[r]),l=(0,f.A)(),u=l.isLicenseValid,p=l.isPro,g=p&&u,b=(0,a.useMemo)(function(){return{hasProOptions:s.some(function(e){return e.pro}),firstOption:s[0]}},[s]),m=b.hasProOptions,v=b.firstOption;return m&&!g&&(null==v?void 0:v.upsellPopover)?(0,n.jsxs)(d,{title:v.upsellPopover.title,subtitle:v.upsellPopover.subtitle,bulletPoints:v.upsellPopover.bulletPoints,primaryButtonUrl:v.upsellPopover.primaryButtonUrl,secondaryButtonUrl:v.upsellPopover.secondaryButtonUrl,children:[(0,n.jsx)("h3",{className:"flex items-center gap-s burst-h4",children:v.label}),(0,n.jsx)(o.A,{name:"chevron-down"})]}):1===s.length?(0,n.jsx)("span",{className:"text-lg font-semibold",children:s[0].label}):(0,n.jsxs)(c.bL,{value:t,onValueChange:i,children:[(0,n.jsxs)(c.l9,{className:"inline-flex items-center justify-between cursor-pointer py-2 px-0 all-[unset]",children:[(0,n.jsx)(c.WT,{placeholder:"Select an option"}),(0,n.jsx)(c.In,{className:"ml-2",children:(0,n.jsx)(o.A,{name:"chevron-down"})})]}),(0,n.jsx)(c.UC,{className:"bg-gray-100\n          z-[99]\n          border border-gray-400\n          rounded\n          flex flex-col flex-wrap\n          gap-4\n          left-0 right-0\n          shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px]\n          [animation-duration:600ms]\n          [animation-timing-function:cubic-bezier(0.16,1,0.3,1)]\n          [will-change:transform,opacity]\n          data-[state=open]:animate-slideDownAndFade",position:"popper",alignOffset:-10,children:(0,n.jsx)(c.LM,{children:s.map(function(e){return(0,n.jsx)(c.q7,{value:e.key,className:"min-w-[min(100vw,150px)]\n                cursor-pointer\n                text-black\n                text-md\n                px-3 py-2.5\n                rounded\n                flex items-center\n                data-[disabled]:text-gray\n                data-[disabled]:bg-gray-100\n                data-[disabled]:cursor-not-allowed\n                data-[highlighted]:text-black\n                data-[highlighted]:outline-none\n                data-[highlighted]:bg-brand-lightest\n                data-[state=selected]:text-gray\n                data-[state=selected]:outline-none",disabled:e.pro&&!p,children:(0,n.jsx)(c.p4,{children:e.label})},e.key)})})})]})});var g=r(30346),b=r(14243),m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},m.apply(this,arguments)},v=(0,g.v)((0,b.Zr)(function(e,t){return{selectedConfigs:{},setSelectedConfig:function(t,r){e(function(e){var n;return{selectedConfigs:m(m({},e.selectedConfigs),(n={},n[t]=r,n))}})},getSelectedConfig:function(e,r){return t().selectedConfigs[e]||r},columnConfigs:{},setColumns:function(t,r){e(function(e){var n;return{columnConfigs:m(m({},e.columnConfigs),(n={},n[t]=r,n))}})},getColumns:function(e,r){return t().columnConfigs[e]||r},filterTexts:{},setFilterText:function(t,r){e(function(e){var n;return{filterTexts:m(m({},e.filterTexts),(n={},n[t]=r,n))}})},getFilterText:function(e){return t().filterTexts[e]||""},clearTableData:function(t){e(function(e){var r=m({},e.selectedConfigs),n=m({},e.filterTexts);return delete r[t],delete n[t],{selectedConfigs:r,filterTexts:n}})},resetAll:function(){e({selectedConfigs:{},columnConfigs:{},filterTexts:{}})}}},{name:"burst-datatable-storage",version:1.1,partialize:function(e){return{selectedConfigs:e.selectedConfigs,columnConfigs:e.columnConfigs}}})),h=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},y=function(e){var t=e.index,r=e.isLast,s="".concat(100*t,"ms"),a=["70%","85%","60%","90%","75%","80%","65%","88%","72%","78%"],i=a[t%a.length];return(0,n.jsxs)("div",{className:"flex items-center gap-4 px-6 max-xl:px-2.5 ".concat(r?"":"border-b border-gray-100"),style:{height:"".concat(48,"px")},children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulseSlow flex-1 max-w-[280px]",style:{animationDelay:s,width:i}}),(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded animate-pulseSlow w-16 ml-auto",style:{animationDelay:"".concat(100*t+50,"ms")}})]})},x=function(){return(0,n.jsxs)("div",{className:"flex items-center gap-4 px-6 max-xl:px-2.5 border-b border-gray-200 bg-gray-50",style:{height:"".concat(52,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2 flex-1",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(4px)"},children:(0,s.__)("Page URL","burst-statistics")})}),(0,n.jsx)("div",{className:"flex items-center gap-2 ml-auto",children:(0,n.jsx)("span",{className:"text-sm font-semibold text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(4px)"},children:(0,s.__)("Pageviews","burst-statistics")})})]})},_=function(){return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4 px-6 max-xl:px-2.5 border-t border-gray-200 bg-white",style:{height:"".concat(56,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-8 w-16 bg-gray-100 rounded border border-gray-200 animate-pulseSlow",style:{animationDelay:"200ms"}})}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 select-none animate-pulseSlow",style:{filter:"blur(3px)",animationDelay:"100ms"},children:["1-10 ",(0,s.__)("of","burst-statistics")," 100"]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"150ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"200ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"250ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 animate-pulseSlow flex items-center justify-center",style:{animationDelay:"300ms"},children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},j=function(){return(0,n.jsxs)("div",{className:"w-full",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsx)(x,{}),(0,n.jsx)("div",{children:h([],Array(10),!0).map(function(e,t){return(0,n.jsx)(y,{index:t,isLast:9===t},t)})}),(0,n.jsx)(_,{})]})},w=function(){return(0,n.jsxs)("div",{className:"flex items-center justify-end gap-4 px-6 max-xl:px-2.5 border-t border-gray-200 bg-white opacity-40",style:{height:"".concat(56,"px")},children:[(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)("div",{className:"h-8 w-16 bg-gray-100 rounded border border-gray-200"})}),(0,n.jsxs)("span",{className:"text-sm text-gray-400 select-none",children:["0-0 ",(0,s.__)("of","burst-statistics")," 0"]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded border border-gray-200 flex items-center justify-center",children:(0,n.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]})]})},N=function(){return(0,n.jsxs)("div",{className:"w-full flex flex-col",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("svg",{className:"w-16 h-16 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,n.jsx)("h3",{className:"text-base font-medium text-gray-600 mb-1",children:(0,s.__)("No data to display","burst-statistics")}),(0,n.jsx)("p",{className:"text-sm text-gray-400 max-w-xs",children:(0,s.__)("There is no data available for the selected filters and date range.","burst-statistics")})]}),(0,n.jsx)(w,{})]})},k=function(e){var t=e.error;return(0,n.jsxs)("div",{className:"w-full flex flex-col",style:{minHeight:"".concat(588,"px")},children:[(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)("svg",{className:"w-16 h-16 text-red-light",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,n.jsx)("h3",{className:"text-base font-medium text-gray-600 mb-1",children:(0,s.__)("Something went wrong","burst-statistics")}),(0,n.jsx)("p",{className:"text-sm text-gray-400 max-w-xs",children:(null==t?void 0:t.message)||(0,s.__)("An unexpected error occurred while loading data.","burst-statistics")})]}),(0,n.jsx)(w,{})]})};const C=(0,a.memo)(function(e){var t=e.isLoading,r=e.error,s=e.noData;return t?(0,n.jsx)(j,{}):r?(0,n.jsx)(k,{error:r}):s?(0,n.jsx)(N,{}):(0,n.jsx)(k,{error:null})});var D,A=r(99696),S=r(88887),O=r(88432),E=r(61626),F=r(3663),P=r(91788),I=r(42552),R=r(8353),M=r(50616),L=function(){return L=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},L.apply(this,arguments)},T=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))},V={PERCENTAGE:"percentage",TIME:"time",COUNTRY:"country",CONTINENT:"continent",URL:"url",TEXT:"text",INTEGER:"integer",REFERRER:"referrer",FLOAT:"float",CURRENCY:"currency"},B=(0,a.memo)(R.A),z=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(B,{filter:"country_code",filterValue:t,children:(0,n.jsx)(I.A,{country:t,countryNiceName:(0,P.qQ)(t)})})});z.displayName="CountryFilter";var G=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(B,{filter:"continent_code",filterValue:t,children:(0,n.jsx)(n.Fragment,{children:(0,P.Iq)(t)})})});G.displayName="ContinentFilter";var K=(0,a.memo)(function(e){var t=e.value,r=e.row;return(0,n.jsx)(B,{filter:"page_url",filterValue:t,row:r,children:(0,M.S)(t)})});K.displayName="UrlFilter";var U=(0,a.memo)(function(e){var t=e.filter,r=e.value;return(0,n.jsx)(B,{filter:t,filterValue:r,children:r})});U.displayName="TextFilter";var q=(0,a.memo)(function(e){var t=e.value;return(0,n.jsx)(B,{filter:"referrer",filterValue:t,children:(0,M.S)(t)})});q.displayName="ReferrerFilter";var Z=((D={})[V.PERCENTAGE]=function(e){return(0,P.Ee)(e)},D[V.TIME]=function(e){return(0,P.fU)(e)},D[V.INTEGER]=function(e){return parseInt(e,10)},D[V.COUNTRY]=function(e){return e&&""!==e?(0,n.jsx)(z,{value:e}):(0,s.__)("Not set","burst-statistics")},D[V.CONTINENT]=function(e){return(0,n.jsx)(G,{value:e})},D[V.URL]=function(e,t,r){return(0,n.jsx)(K,{filter:t,value:e,row:r})},D[V.TEXT]=function(e,t){return(0,n.jsx)(U,{filter:t,value:e})},D[V.REFERRER]=function(e){return(0,n.jsx)(q,{value:e})},D[V.FLOAT]=function(e){return parseFloat(e)},D[V.CURRENCY]=function(e){return W(e)},D),W=function(e){return e&&(null==e?void 0:e.currency)&&(null==e?void 0:e.value)?(0,P.vv)(e.currency,e.value):""},Q=function(e,t){var r=[V.PERCENTAGE,V.TIME,V.INTEGER,V.FLOAT].includes(t),n=t===V.CURRENCY;return function(t,s){var a=t[e],i=s[e];if(null==a&&null==i)return 0;if(null==a)return 1;if(null==i)return-1;if(n){var o="object"==typeof a?parseFloat(a.value):parseFloat(a),l="object"==typeof i?parseFloat(i.value):parseFloat(i);return isNaN(o)&&isNaN(l)?0:isNaN(o)?1:isNaN(l)?-1:o-l}if(r){var c=parseFloat(a),u=parseFloat(i);return isNaN(c)&&isNaN(u)?0:isNaN(c)?1:isNaN(u)?-1:c-u}return String(a).toLowerCase().localeCompare(String(i).toLowerCase())}},H=function(e,t){var r=Z[e];return r?function(e){var a;try{var i=null!==(a=e[t])&&void 0!==a?a:"",l=r(i,t,e);return"conversion_rate"===t||"conversions"===t&&!("conversion_rate"in e)?function(e,t){return t.is_ab_test?("no_winner"===t.significant?(i=(0,s.__)("The test resulted in a tie. More hits might still result in a winner, but the difference will probably be very small.","burst-statistics"),a="gold",r="scale"):"still_running"===t.significant?(i=(0,s.__)("Not enough data yet to declare a winner or tie.","burst-statistics"),a="grey",r="hourglass"):(i=t.winner?(0,s.__)("Winner of the A/B test with a probability of >95%.","burst-statistics"):(0,s.__)("Least performant version of the A/B test with a probability of >95%.","burst-statistics"),a=t.winner?"gold":"black",r=t.winner?"trophy":"frown"),(0,n.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,n.jsx)(o.A,{name:r,color:a,tooltip:i}),e]})):e;var r,a,i}(l,e):l}catch(r){return console.error("Error formatting cell value for column ".concat(t,":"),r),e[t]||""}}:(console.warn("Unknown column format: ".concat(e,". Using default text formatter.")),function(e){return e[t]||""})},Y=function(e,t){try{return function(e){if(!e||"object"!=typeof e)throw new Error("Invalid response: expected object");if(!Array.isArray(e.columns))throw new Error("Invalid response: columns must be an array");if(!Array.isArray(e.data))throw new Error("Invalid response: data must be an array")}(e),{columns:e.columns.map(function(e){return function(e,t){var r=t[e.id];if(!r)return e;var n=r.format||V.INTEGER,s=r.align||"left";return L(L({},e),{selector:function(t){return t[e.id]},right:"left"!==s,sortFunction:Q(e.id,n),cell:H(n,e.id)})}(e,t)}),data:T([],e.data,!0)}}catch(e){return console.error("Data transformation error:",e),{columns:[],data:[],error:e.message}}};const $=function(e){return t=void 0,r=void 0,s=function(){var t,r,n,s,a,i,o,l,c;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),function(e){var t=e.startDate,r=e.endDate,n=e.range,s=e.columnsOptions;if(!t||!r||!n)throw new Error("Missing required parameters: startDate, endDate, range");if(!s||"object"!=typeof s)throw new Error("Missing or invalid columnsOptions parameter")}(e),t=e.startDate,r=e.endDate,n=e.range,s=e.args,a=e.columnsOptions,i=e.type,o="ecommerce-datatable"===i?"ecommerce/datatable":"datatable",[4,(0,F.bQ)(o,t,r,n,s)];case 1:if(!(l=u.sent().data))throw new Error("No data received from API");return[2,Y(l,a)];case 2:return c=u.sent(),console.error("Error fetching data table data:",c),[2,{columns:[],data:[],error:c.message}];case 3:return[2]}})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s};var X=r(77902),J=r(67744),ee=r(11989),te=r(86274),re=r(35256),ne=r(97813),se=function(e,t,r){for(var n in void 0===t&&(t=""),void 0===r&&(r={}),e){var s=e[n],a=t?"".concat(t,"__").concat(n):n;null===s?r[a]="":"object"!=typeof s||Array.isArray(s)?r[a]=s:se(s,a,r)}return r};const ae=function(e){var t=e.data,i=e.filename,l=e.className,c=void 0===l?"":l,u=(0,(0,f.A)().isLicenseValidFor)("sources"),d=(0,a.useState)(!1),p=d[0],g=d[1],b=!t||0===t.length||p||!u,m=(0,a.useRef)(null),v=(0,a.useMemo)(function(){return(0,re.df)({useKeysAsHeaders:!0,filename:i})},[i]),h=(0,a.useMemo)(function(){return b||t.length>=5e3?"":function(e,t){var r=e.map(function(e){return se(e)});return(0,re.Y_)(t)(r)}(t,v)},[t,v]);(0,a.useEffect)(function(){return function(){m.current&&(m.current.terminate(),m.current=null)}},[]);var y=function(){if(!b)if(t.length<5e3)h&&(0,re.RG)(v)(h);else{g(!0),m.current||(m.current=new Worker(new URL(r.p+r.u(516),r.b),{type:void 0}));var e=m.current;e.onmessage=null,e.onerror=null,e.onmessage=function(e){var t=e.data;(0,re.RG)(v)(t),g(!1)},e.onerror=function(){console.error("CSV Worker error"),g(!1)},e.postMessage({data:t,filename:i,csvConfig:v})}};return(0,n.jsx)(ne.A,{content:u?void 0:(0,s.__)("Available in Burst Pro","burst-statistics"),children:(0,n.jsx)("div",{className:"relative ".concat(c),children:(0,n.jsx)("button",{className:"bg-gray-100 border border-gray-400 focus:ring-blue-500 rounded-full p-2.5 transition-all duration-200 hover:bg-gray-400 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 opacity-30 group-hover/root:opacity-100 ".concat(b?"opacity-30 group-hover/root:opacity-30 cursor-not-allowed hover:bg-gray-100":""),onClick:y,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),y())},"aria-label":i,disabled:b,children:p?(0,n.jsx)(o.A,{name:"loading"}):(0,n.jsx)(o.A,{name:"download"})})})})};var ie=function(){return ie=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ie.apply(this,arguments)},oe=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const le=(0,a.memo)(function(e){var t,r,o=e.allowedConfigs,c=void 0===o?["pages","referrers"]:o,u=e.id,d=e.isEcommerce,f=void 0!==d&&d,g=(0,S.S)(function(e){return e}),b=g.startDate,m=g.endDate,h=g.range,y=(0,O.R7)().filters,x=c[0],_=(0,(0,te.A)().getValue)("filtering_by_domain"),j=(null===(t=window.burst_settings)||void 0===t?void 0:t.shouldLoadEcommerce)||!1,w={pages:{label:(0,s.__)("Pages","burst-statistics"),searchable:!0,defaultColumns:["page_url","pageviews","visitors","sessions"],columnsOptions:ie(ie(ie({},_&&{host:{label:(0,s.__)("Domain","burst-statistics"),default:!1,format:"url",align:"left",group_by:!1}}),{page_url:{label:(0,s.__)("Page","burst-statistics"),default:!0,format:"url",align:"left",group_by:!0},pageviews:{label:(0,s.__)("Pageviews","burst-statistics"),category:"traffic",align:"right"},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!1,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),category:"traffic",pro:!1,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},avg_time_on_page:{label:(0,s.__)("Avg. time on page","burst-statistics"),category:"engagement",pro:!0,format:"time",align:"right"},entrances:{label:(0,s.__)("Entrances","burst-statistics"),category:"engagement",pro:!0,align:"right"},exit_rate:{label:(0,s.__)("Exit rate","burst-statistics"),category:"engagement",pro:!0,format:"percentage",align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"},conversion_rate:{label:(0,s.__)("Goal conv. rate","burst-statistics"),category:"conversions",format:"percentage",pro:!0,align:"right"}}),j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},page_value:{label:(0,s.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},referrers:{label:(0,s.__)("Referrers","burst-statistics"),searchable:!0,defaultColumns:oe(["referrer","visitors","bounce_rate"],j?["sales","revenue"]:["conversions"],!0),columnsOptions:ie({referrer:{label:(0,s.__)("Referrer","burst-statistics"),default:!0,format:"referrer",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},page_value:{label:(0,s.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},countries:{label:(0,s.__)("Locations","burst-statistics"),pro:!0,searchable:!0,defaultColumns:oe(["country_code","visitors"],j?["revenue","sales_conversion_rate"]:[],!0),columnsOptions:ie({country_code:{label:(0,s.__)("Country","burst-statistics"),default:!0,format:"country",align:"left",group_by:!0},state:{label:(0,s.__)("State","burst-statistics"),format:"text",align:"left",group_by:!0},city:{label:(0,s.__)("City","burst-statistics"),format:"text",align:"left",group_by:!0},continent:{label:(0,s.__)("Continent","burst-statistics"),format:"continent",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},avg_order_value:{label:(0,s.__)("Avg. order value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},campaigns:{label:(0,s.__)("Campaigns","burst-statistics"),pro:!0,searchable:!0,defaultColumns:oe(["campaign","visitors"],j?["sales","revenue"]:["conversions"],!0),columnsOptions:ie({campaign:{label:(0,s.__)("Campaign","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},source:{label:(0,s.__)("Source","burst-statistics"),format:"text",align:"left",group_by:!0},medium:{label:(0,s.__)("Medium","burst-statistics"),format:"text",align:"left",group_by:!0},term:{label:(0,s.__)("Term","burst-statistics"),format:"text",align:"left",group_by:!0},content:{label:(0,s.__)("Content","burst-statistics"),format:"text",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"},conversion_rate:{label:(0,s.__)("Goal conv. rate","burst-statistics"),category:"conversions",format:"percentage",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"},page_value:{label:(0,s.__)("Page value","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"}})},parameters:{label:(0,s.__)("Parameters","burst-statistics"),searchable:!0,pro:!0,defaultColumns:["parameter","visitors"],columnsOptions:ie({parameter:{label:(0,s.__)("Parameter","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},parameters:{label:(0,s.__)("Parameters","burst-statistics"),format:"text",align:"left",group_by:!0},visitors:{label:(0,s.__)("Visitors","burst-statistics"),category:"traffic",pro:!0,align:"right"},bounce_rate:{label:(0,s.__)("Bounce rate","burst-statistics"),category:"engagement",format:"percentage",pro:!0,align:"right"},conversions:{label:(0,s.__)("Goal completions","burst-statistics"),category:"conversions",pro:!0,align:"right"}},j&&{sales:{label:(0,s.__)("Sales","burst-statistics"),category:"conversions",pro:!0,format:"integer",align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),category:"conversions",pro:!0,format:"currency",align:"right"},sales_conversion_rate:{label:(0,s.__)("Sales conv. rate","burst-statistics"),category:"conversions",pro:!0,format:"percentage",align:"right"}})},ghost:{label:(0,s.__)("Dummy","burst-statistics"),searchable:!0,defaultColumns:["pageviews"],columnsOptions:{pageviews:{label:(0,s.__)("Pageviews","burst-statistics"),align:"right"},visitors:{label:(0,s.__)("Visitors","burst-statistics"),pro:!0,align:"right"},sessions:{label:(0,s.__)("Sessions","burst-statistics"),pro:!0,align:"right"}}},products:{label:(0,s.__)("Products","burst-statistics"),pro:!0,searchable:!0,defaultColumns:["product","sales","revenue"],columnsOptions:{product:{label:(0,s.__)("Product","burst-statistics"),default:!0,format:"text",align:"left",group_by:!0},adds_to_cart:{label:(0,s.__)("Adds to cart","burst-statistics"),pro:!0,align:"right"},sales:{label:(0,s.__)("Sales","burst-statistics"),pro:!0,align:"right"},revenue:{label:(0,s.__)("Revenue","burst-statistics"),pro:!0,format:"currency",align:"right"}}}},N=v(),k=N.getSelectedConfig,D=N.setSelectedConfig,F=N.getColumns,I=N.setColumns,R=(0,a.useState)(function(){return k(u,x)}),M=R[0],L=R[1],T=(0,a.useMemo)(function(){return w[M]},[M]),B=(0,a.useMemo)(function(){return(null==T?void 0:T.columnsOptions)||{}},[T]),z=(0,a.useMemo)(function(){return(null==T?void 0:T.defaultColumns)||[]},[T]),G=(0,a.useState)(function(){var e=F(M,z),t=Object.keys(B);return e.filter(function(e){return t.includes(e)})}),K=G[0],U=G[1],q=(0,a.useCallback)(function(e){var t=e.filter(function(e){return Object.keys(B).includes(e)});JSON.stringify(t)!==JSON.stringify(K)&&(U(t),I(M,t))},[M,K,B,I]),W=(0,a.useCallback)(function(e){return t=void 0,r=void 0,s=function(){return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){return L(e),D(u,e),[2]})},new((n=void 0)||(n=Promise))(function(e,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(e){e(r)})).then(i,o)}l((s=s.apply(t,r||[])).next())});var t,r,n,s},[u,D]);(0,a.useEffect)(function(){var e,t=F(M,(null===(e=w[M])||void 0===e?void 0:e.defaultColumns)||[]);q(t)},[M,q,F]);var Q=(0,a.useState)(""),H=Q[0],Y=Q[1],re=(0,a.useMemo)(function(){return Object.keys(w).filter(function(e){return c.includes(e)}).map(function(e){return{key:e,label:w[e].label,pro:!!w[e].pro,upsellPopover:w[e].upsellPopover||null}})},[c]),ne=(0,a.useMemo)(function(){var e={filters:y,metrics:Object.keys(B).filter(function(e){return K.includes(e)}),group_by:[]};return K.forEach(function(t){var r;(null===(r=B[t])||void 0===r?void 0:r.group_by)&&e.group_by.push(t)}),e},[y,B,K]),se=(0,E.I)({queryKey:[M,b,m,ne],queryFn:function(){return $({type:f?"ecommerce-datatable":"datatable",startDate:b,endDate:m,range:h,args:ne,columnsOptions:B})},enabled:!!M}),le=se.data||{},ce=(0,a.useMemo)(function(){return le.data||[]},[le.data]),ue=le.columns,de=(0,a.useMemo)(function(){var e=[];if((null==T?void 0:T.searchable)&&Array.isArray(ce))if(""===H.trim())e=ce;else{var t=H.toLowerCase(),r=Object.keys(B).filter(function(e){var t;return null===(t=B[e])||void 0===t?void 0:t.group_by});e=ce.filter(function(e){return r.some(function(r){var n,s=e[r];if(null==s)return!1;var a=function(e,t,r){if(null==e)return"";var n=Z[t];if(!n)return e.toString();var s=n(e,r);return null==s?"":"object"==typeof s?t===V.COUNTRY?(0,P.qQ)(e)||e:t===V.CONTINENT?(0,P.Iq)(e)||e:e.toString():s.toString()}(s,null===(n=B[r])||void 0===n?void 0:n.format,r);return a.toLowerCase().includes(t)})})}else e=ce;return Array.isArray(e)?e:[]},[ce,H,null==T?void 0:T.searchable,B]),fe=se.isLoading||se.isFetching,pe=se.error,ge=0===de.length,be=(0,a.useMemo)(function(){if(!ue||!B)return[];var e=Object.keys(B);return ue.sort(function(t,r){return e.indexOf(t.selector)-e.indexOf(r.selector)})},[ue,B]);0<be.length&&(be[0]=ie(ie({},be[0]),{allowOverflow:!0,wrap:!1,grow:2}));var me=(0,a.useMemo)(function(){return{columns:be,data:de,defaultSortFieldId:2,defaultSortAsc:!1,pagination:!0,paginationRowsPerPageOptions:[10,25,50,100,200],paginationPerPage:10,paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,s.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,s.__)("All","burst-statistics")},noDataComponent:(0,n.jsx)(C,{noData:ge,data:[],isLoading:fe,error:pe}),progressPending:fe,progressComponent:(0,n.jsx)(C,{noData:ge,data:[],isLoading:fe,error:pe})}},[be,de,ge,fe,pe]);if(!T)return null;var ve=(null===(r=window.burst_admin)||void 0===r?void 0:r.site_url)||window.location.origin,he=new URL(ve).hostname.replace(/\./g,"-").replace(/[^a-zA-Z0-9-]/g,""),ye="".concat(he,"-").concat(M,"-").concat(b,"-").concat(m);return(0,n.jsxs)(X.e,{className:"row-span-2 overflow-hidden xl:col-span-6 group/root",children:[(0,n.jsx)(J.q,{className:"border-b border-gray-200",title:(0,n.jsx)(p,{value:M,onChange:W,options:re,disabled:[]}),controls:(0,n.jsxs)(n.Fragment,{children:[(null==T?void 0:T.searchable)&&(0,n.jsx)(l,{value:H,onChange:Y,className:"ml-auto"}),(0,n.jsx)(ae,{data:de,filename:ye}),(0,n.jsx)(i.A,{selectedOptions:K,options:B,defaultOptions:z,onApply:q})]})}),(0,n.jsx)(ee.t,{className:"px-0 py-0",children:(0,n.jsx)(A.Ay,ie({},me))})]})})},83595:(e,t,r)=>{r.d(t,{y:()=>Y});var n=r(91637),s=r(51609),a=r.n(s),i=r(88432),o=r(39988),l=r(70802),c=r(3663),u=r(61445),d=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},f=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const p=function(){var e=(0,l.jE)(),t=(0,u.A)(),r=t.goals,n=t.getGoalAsync,a=(0,s.useCallback)(function(t,n){return d(void 0,void 0,void 0,function(){var s;return f(this,function(a){switch(a.label){case 0:return"goals"===t?[2,r]:[4,e.fetchQuery({queryKey:["filters_data",t,n],queryFn:function(){return function(e,t){return d(void 0,void 0,void 0,function(){var r,n;return f(this,function(s){switch(s.label){case 0:return[4,(0,c.Eo)("get_filter_options",{data_type:e,search:t})];case 1:return r=s.sent(),[2,(null===(n=r.data)||void 0===n?void 0:n[e])||[]]}})})}(t,n)},staleTime:3e5,cacheTime:18e5})];case 1:return s=a.sent(),[2,(Array.isArray(s)?s:Object.values(s||{})).map(function(e){return{id:e.ID,title:e.name,key:e.key||e.ID}})]}})})},[e,r]);return{getFilterOptions:a,getFilterOptionById:function(e,t){return d(void 0,void 0,void 0,function(){var r,s,i;return f(this,function(o){switch(o.label){case 0:return"goals"!==t?[3,2]:[4,n(e)];case 1:return[2,(r=o.sent())?r.title:e];case 2:return[4,a(t)];case 3:return s=o.sent(),[2,(null==(i=Array.isArray(s)?s.find(function(t){return String(t.id)===String(e)}):null)?void 0:i.title)||e]}})})},getFilterIdByTitle:function(e,t){return d(void 0,void 0,void 0,function(){var r,n;return f(this,function(s){switch(s.label){case 0:return[4,a(t)];case 1:return r=s.sent(),[2,(null==(n=Array.isArray(r)?r.find(function(t){return t.title===e}):null)?void 0:n.id)||null]}})})}}};var g=r(27723),b=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},m=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};var v=r(53411),h=r(50616);const y=function(e){var t=e.filter,r=e.onRemove,s=e.onClick,a=e.className,i=void 0===a?"":a,o=e.showRemoveButton,l=void 0===o||o,c="".concat("inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 hover:bg-gray-200 shadow-sm rounded-md text-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] cursor-pointer"," ").concat(i).trim(),u=function(e){e.target.closest(".remove-button")||s&&s(t)};return t&&t.config?t.key?(0,n.jsxs)("div",{className:c,onClick:u,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u(e))},role:"button",tabIndex:0,"aria-label":(0,g.__)("Edit %s filter","burst-statistics").replace("%s",t.config.label),title:(0,g.__)("Click to edit filter","burst-statistics"),children:[(0,n.jsx)(v.A,{name:t.config.icon,size:"16"}),(0,n.jsx)("p",{className:"font-medium",children:t.config.label}),(0,n.jsx)("span",{className:"h-4 w-px bg-gray-400"}),(0,n.jsx)("p",{className:"text-gray",children:(0,h.S)(t.displayValue)}),l&&r&&(0,n.jsx)("button",{onClick:function(){return r(t.key)},className:"remove-button rounded-full p-1 transition-colors hover:bg-gray-200","aria-label":(0,g.__)("Remove filter","burst-statistics"),title:(0,g.__)("Remove filter","burst-statistics"),children:(0,n.jsx)(v.A,{name:"times",color:"var(--rsp-grey-500)",size:"16"})})]}):null:(localStorage.removeItem("burst-filters-storage"),null)},x=function(e){var t=e.filters,r=void 0===t?[]:t,s=e.onRemove,a=e.onClick,i=e.className,o=void 0===i?"flex flex-wrap gap-2":i,l=e.showRemoveButton,c=void 0===l||l,u=e.emptyMessage,d=void 0===u?null:u;return Array.isArray(r)&&0!==r.length||d?0===r.length&&d?(0,n.jsx)("div",{className:"text-gray-500 text-sm",children:d}):(0,n.jsx)("div",{className:o,children:r.map(function(e){return(0,n.jsx)(y,{filter:e,onRemove:s,onClick:a,showRemoveButton:c},e.key)})}):null},_=function(e){var t=e.onClick,r=e.className,s=void 0===r?"":r,a=e.label,i=void 0===a?(0,g.__)("Add filter","burst-statistics"):a,o="".concat("inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-300 hover:bg-gray-200 shadow-sm rounded-md text-sm transition-all duration-200 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] border-dashed cursor-pointer transition-colors"," ").concat(s).trim();return(0,n.jsxs)("div",{className:o,onClick:t,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),null==t||t(e))},"aria-label":i,children:[(0,n.jsx)(v.A,{name:"plus",size:"16"}),(0,n.jsx)("p",{className:"font-medium",children:i})]})};var j=r(98371),w=r(2573),N=r(35812),k=r(84400);const C=function(e){var t,r=e.filterKey,s=e.config,a=e.isActive,o=void 0!==a&&a,l=e.onClick,c=e.gridPosition,u=(0,k.A)().isLicenseValid,d=(0,i.R7)(),f=d.isFavorite,p=d.toggleFavorite,b=s.pro&&!u||s.coming_soon,m=f(r),h=function(e){e.stopPropagation(),e.preventDefault(),b||p(r)},y=function(){b||l()};return(0,n.jsxs)("div",{className:(0,w.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":o,"border-gray-300 shadow-sm hover:border-gray-400":!o&&!b,"bg-gray-100 border-gray-200":b,"bg-gray-300 opacity-90":s.coming_soon}),role:c?"gridcell":void 0,"aria-posinset":null==c?void 0:c.position,"aria-setsize":null==c?void 0:c.total,children:[(0,n.jsx)("button",{onClick:y,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),y())},disabled:b,"aria-label":(t="".concat(s.label," filter"),o&&(t+=", ".concat((0,g.__)("currently active","burst-statistics"))),s.pro&&(t+=", ".concat((0,g.__)("Pro feature","burst-statistics"))),s.coming_soon&&(t+=", ".concat((0,g.__)("coming soon","burst-statistics"))),b&&(t+=", ".concat((0,g.__)("disabled","burst-statistics"))),t),"aria-pressed":o,className:(0,w.A)("w-full h-full absolute inset-0 rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"cursor-not-allowed":b,"cursor-pointer hover:bg-black hover:bg-opacity-5":!b}),tabIndex:b?-1:0}),(0,n.jsx)("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200",children:(0,n.jsx)("button",{onClick:h,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),h(e))},disabled:b,className:(0,w.A)("p-1 rounded-full transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1","hover:bg-gray-200 active:bg-gray-300",{"text-yellow-500":m,"text-gray-400 hover:text-gray-600":!m,"cursor-not-allowed opacity-50":b}),"aria-label":m?(0,g.__)("Remove %s from favorites","burst-statistics").replace("%s",s.label):(0,g.__)("Add %s to favorites","burst-statistics").replace("%s",s.label),"aria-pressed":m,tabIndex:b?-1:0,children:(0,n.jsx)(v.A,{name:m?"star-filled":"star-outline",size:16,color:m?"yellow":"gray","aria-hidden":"true"})})}),o&&(0,n.jsx)("div",{className:"absolute top-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3 relative z-10 pointer-events-none",children:[(0,n.jsx)("div",{className:(0,w.A)("flex h-12 w-12 items-center justify-center rounded-lg",{"bg-gray-100":!o,"bg-primary-light":o}),"aria-hidden":"true",children:(0,n.jsx)(v.A,{name:s.icon,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:s.label}),s.pro&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)(N.A,{label:(0,g.__)("Pro","burst-statistics")})}),s.coming_soon&&(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("span",{className:"inline-flex items-center rounded bg-blue-light px-2 py-0.5 text-xs font-medium text-gray",children:(0,g.__)("Coming soon","burst-statistics")})})]})]})]})};var D=r(86274),A=function(){return A=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},A.apply(this,arguments)};const S=function(e){var t=e.onSelectFilter,r=(0,i.R7)(),a=r.filtersConf,o=r.filterCategories,l=r.getActiveFilters,c=r.getFiltersByCategory,u=r.getFavoriteFilters,d=(0,D.A)().getValue,f=(0,s.useState)("favorites"),p=f[0],b=f[1],m=(0,s.useState)(""),h=m[0],y=m[1],x=(0,s.useState)({}),_=x[0],j=x[1],N=(0,s.useRef)(null),k=l(),S=c(),O=u(),E=d("filtering_by_domain");(0,s.useEffect)(function(){if(E)j(a);else{var e=Object.fromEntries(Object.entries(a).filter(function(e){return"host"!==e[0]}));j(e)}},[a,E]),(0,s.useEffect)(function(){N.current&&N.current.focus()},[]);var F=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([{key:"favorites",label:(0,g.__)("Favorites","burst-statistics"),icon:"star-outline"},{key:"all",label:(0,g.__)("All","burst-statistics"),icon:"grid"}],Object.entries(o).sort(function(e,t){var r=e[1],n=t[1];return r.order-n.order}).map(function(e){var t=e[0],r=e[1];return{key:t,label:r.label,icon:r.icon}}),!0),P=function(e){if(!e.trim())return null;var t=e.toLowerCase(),r=Object.entries(_).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return A({key:t},r)}),n=function(e){return e.label.toLowerCase().includes(t)||e.key.toLowerCase().includes(t)},s=[];"favorites"===p?s=O:"all"===p?s=r:p in S&&(s=S[p]||[]);var a=s.filter(n);return 0<a.length?{results:a,source:p,isFromCurrentTab:!0}:{results:r.filter(n),source:"all",isFromCurrentTab:!1}}(h),I=function(e,r){return 0===e.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(v.A,{name:"empty",size:48,color:"gray"}),(0,n.jsx)("p",{className:"mt-2",children:h.trim()?(0,g.__)("No filters match your search.","burst-statistics"):"favorites"===p?(0,g.__)("No favorite filters yet. Pin filters to add them here.","burst-statistics"):"all"===p?(0,g.__)("No filters available.","burst-statistics"):(0,g.__)("No filters in this category.","burst-statistics")})]}):(0,n.jsxs)("div",{children:[r&&!r.isFromCurrentTab&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-blue-light border border-blue-200 rounded-lg",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(v.A,{name:"help",size:16,color:"blue"}),(0,n.jsx)("span",{className:"text-sm text-blue-700",children:(0,g.__)("No results found in current tab. Showing results from all filters.","burst-statistics")})]})}),(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 justify-items-center",role:"grid","aria-label":(0,g.__)("Available filters","burst-statistics"),children:e.map(function(r,s){return(0,n.jsx)(C,{filterKey:r.key,config:r,isActive:Object.prototype.hasOwnProperty.call(k,r.key),onClick:function(){return t(r.key,r)},gridPosition:{position:s+1,total:e.length}},r.key)})})]})};return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{htmlFor:"filter-search",className:"sr-only",children:(0,g.__)("Search filters","burst-statistics")}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,n.jsx)(v.A,{name:"search",size:16,className:"text-gray-400","aria-hidden":"true"})}),(0,n.jsx)("input",{id:"filter-search",type:"text",placeholder:(0,g.__)("Search filters","burst-statistics"),value:h,onChange:function(e){return y(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm","aria-describedby":P?"search-results-info":void 0,ref:N}),h&&(0,n.jsx)("button",{onClick:function(){return y("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-900","aria-label":(0,g.__)("Clear search","burst-statistics"),type:"button",children:(0,n.jsx)(v.A,{name:"times",size:16,"aria-hidden":"true"})})]})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto scrollbar-hide",role:"tablist","aria-label":(0,g.__)("Filter categories","burst-statistics"),children:F.map(function(e){return(0,n.jsxs)("button",{id:"tab-".concat(e.key),onClick:function(){return b(e.key)},role:"tab","aria-selected":p===e.key,"aria-controls":"tabpanel-".concat(e.key),className:(0,w.A)("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap flex-shrink-0","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"border-primary text-primary":p===e.key,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":p!==e.key}),children:[(0,n.jsx)("span",{className:(0,w.A)("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-primary-light text-white shadow-sm border-primary border-0.5":p===e.key,"bg-transparent":p!==e.key}),"aria-hidden":"true",children:(0,n.jsx)(v.A,{name:e.icon,size:16})}),(0,n.jsx)("span",{children:e.label})]},e.key)})})})}),(0,n.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(p),"aria-labelledby":"tab-".concat(p),children:P?(0,n.jsxs)("div",{children:[0<P.results.length&&(0,n.jsx)("div",{id:"search-results-info",className:"sr-only",children:(0,g.__)("Showing %d search results","burst-statistics").replace("%d",P.results.length.toString())}),I(P.results,P)]}):"favorites"===p?I(O):"all"===p?I(Object.entries(_).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return A({key:t},r)})):p in S?I(S[p]||[]):null})]})};var O=r(24454),E=r(10371),F=r(53576),P=r.n(F),I=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},R=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const M=function(e){var t=e.filterKey,r=e.config,a=e.initialValue,i=void 0===a?"":a,o=e.onChange,l=(0,s.useState)(i),c=l[0],u=l[1],d=(0,s.useRef)(null),f=(0,s.useRef)(null),b=(0,s.useState)([]),m=b[0],v=b[1],h=(0,s.useState)([]),y=h[0],x=h[1],_=(0,s.useState)(""),j=_[0],w=_[1],N=(0,s.useState)(!1),k=N[0],C=N[1],D=p().getFilterOptions;(0,s.useEffect)(function(){u(i)},[i]),(0,s.useEffect)(function(){I(void 0,void 0,void 0,function(){var e,t;return R(this,function(n){switch(n.label){case 0:return r.options?[4,D(r.options,"")]:[2];case 1:return e=n.sent(),t=Array.isArray(e)?e.map(function(e){return{value:e.id||e.title,label:e.title}}):[],v(t),x(t),C(1e3>t.length),[2]}})})},[r.options,D]);var A=(0,s.useMemo)(function(){return P()(function(e){return I(void 0,void 0,void 0,function(){var t,n;return R(this,function(s){switch(s.label){case 0:return r.options?[4,D(r.options,e)]:[2];case 1:return t=s.sent(),n=Array.isArray(t)?t.map(function(e){return{value:e.id||e.title,label:e.title}}):[],v(n),e||x(n),[2]}})})},300)},[r.options,D]);(0,s.useEffect)(function(){if(r.reloadOnSearch&&r.options&&!(3>j.length||k))return A(j),function(){A.cancel()}},[j,r.reloadOnSearch,k,A]),(0,s.useEffect)(function(){var e=setTimeout(function(){var e,t;r.options&&d.current?d.current.focus?d.current.focus():(null===(t=null===(e=d.current.select)||void 0===e?void 0:e.inputRef)||void 0===t?void 0:t.current)&&d.current.select.inputRef.current.focus():!r.options&&f.current&&f.current.focus()},100);return function(){return clearTimeout(e)}},[r.options]);var S=function(){if(r.options)return(0,g.__)("Search or select an option","burst-statistics");switch(t){case"page_url":return(0,g.__)("Enter page URL (e.g., /about)","burst-statistics");case"referrer":return(0,g.__)("Enter referrer URL (e.g., google.com)","burst-statistics");case"campaign":return(0,g.__)("Enter campaign name","burst-statistics");case"source":return(0,g.__)("Enter traffic source","burst-statistics");case"medium":return(0,g.__)("Enter traffic medium","burst-statistics");case"term":return(0,g.__)("Enter search term","burst-statistics");case"content":return(0,g.__)("Enter content identifier","burst-statistics");case"parameter":return(0,g.__)("Enter URL parameter (e.g., utm_campaign)","burst-statistics");default:return(0,g.__)("Enter filter value","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-2 relative",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,g.__)("Filter value","burst-statistics")}),r.options?(0,n.jsx)(O.A,{ref:d,value:c?m.find(function(e){return e.value===c})||{value:c,label:c}:null,onChange:function(e){var t=e?e.value:"";u(t),o(t)},loadOptions:function(e,t){return I(void 0,void 0,void 0,function(){var r,n;return R(this,function(s){return r=String(null!=e?e:"").toLowerCase(),w(r),m.length?0===r.length?(null==t||t(m),x(m),[2]):(n=m.filter(function(e){var t,n,s=String(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase(),a=String(null!==(n=e.value)&&void 0!==n?n:"").toLowerCase();return s.includes(r)||a.includes(r)}),null==t||t(n),x(n),[2]):(null==t||t([]),[2])})})},defaultOptions:y,placeholder:S(),isSearchable:!0,disabled:!1,insideModal:!0,allowCustomValue:0===y.length}):(0,n.jsx)(E.A,{ref:f,value:c,onChange:function(e){var t=e.target.value;u(t),o(t)},placeholder:S(),className:"w-full"})]})})};var L=r(78548);const T=function(e){var t=e.filterKey,r=e.initialValue,a=void 0===r?"":r,i=e.onChange,o=(0,s.useState)(a),l=o[0],c=o[1];(0,s.useEffect)(function(){c(a)},[a]);var u="bounces"===t?{"":{type:"",icon:"user",label:(0,g.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"bounce",label:(0,g.__)("Bounced visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,g.__)("Active visitors","burst-statistics")}}:"new_visitor"===t?{"":{type:"",icon:"user",label:(0,g.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"user-plus",label:(0,g.__)("New visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,g.__)("Returning visitors","burst-statistics")}}:"entry_exit_pages"===t?{"":{type:"",icon:"user",label:(0,g.__)("All pages","burst-statistics")},entry:{type:"entry",icon:"user-plus",label:(0,g.__)("Entry pages","burst-statistics")},exit:{type:"exit",icon:"user-check",label:(0,g.__)("Exit pages","burst-statistics")}}:{"":{type:"",icon:"user",label:(0,g.__)("All visitors (default)","burst-statistics"),description:(0,g.__)("Show all visitors without filtering","burst-statistics")},include:{type:"include",icon:"check",label:(0,g.__)("Include","burst-statistics"),description:(0,g.__)("Include visitors matching this criteria","burst-statistics")},exclude:{type:"exclude",icon:"times",label:(0,g.__)("Exclude","burst-statistics"),description:(0,g.__)("Exclude visitors matching this criteria","burst-statistics")}};return(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,g.__)("Filter option","burst-statistics")}),(0,n.jsx)(L.A,{inputId:"".concat(t,"-boolean"),options:u,value:l,onChange:function(e){c(e),i(e)},columns:1})]})})};var V=r(90160),B=function(){return B=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},B.apply(this,arguments)},z=(0,s.forwardRef)(function(e,t){var r=e.min,a=void 0===r?0:r,i=e.max,o=void 0===i?100:i,l=e.step,c=void 0===l?1:l,u=e.value,d=void 0===u?[a,o]:u,f=e.onChange,p=e.formatValue,b=void 0===p?function(e){return e.toString()}:p,m=e.className,v=void 0===m?"":m,h=e.disabled,y=void 0!==h&&h,x=e.label,_=e.showLabels,j=void 0===_||_,w=e.showCurrentValue,N=void 0===w||w,k=e.allowSingleValue,C=void 0!==k&&k,D=e.rangeSeparator,A=void 0===D?" - ":D,S=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["min","max","step","value","onChange","formatValue","className","disabled","label","showLabels","showCurrentValue","allowSingleValue","rangeSeparator"]),O=(0,s.useState)(d),E=O[0],F=O[1];return(0,s.useEffect)(function(){F(d)},[d]),(0,n.jsxs)("div",B({ref:t,className:"space-y-3 ".concat(v)},S,{children:[x&&(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:x}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)(V.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:C&&E[0]===E[1]?[E[0]]:E,onValueChange:function(e){var t=C&&1===e.length?[e[0],e[0]]:[e[0],e[1]];F(t),null==f||f(t)},min:a,max:o,step:c,disabled:y,children:[(0,n.jsx)(V.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,n.jsx)(V.Q6,{className:"absolute bg-primary rounded-full h-full"})}),(0,n.jsx)(V.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,g.__)("Minimum value","burst-statistics")}),(!C||E[0]!==E[1])&&(0,n.jsx)(V.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,g.__)("Maximum value","burst-statistics")})]}),j&&(0,n.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,n.jsx)("span",{children:b(a)}),N&&(0,n.jsx)("span",{className:"font-medium text-primary",children:C&&E[0]===E[1]?b(E[0]):"".concat(b(E[0])).concat(A).concat(b(E[1]))}),(0,n.jsx)("span",{children:b(o)})]})]})]}))});z.displayName="RangeSliderInput";const G=z,K=function(e){var t=e.filterKey,r=e.initialValue,a=void 0===r?"":r,i=e.onChange,o=function(e){if(!e||""===e)return[0,100];if("string"==typeof e&&e.includes("-")){var t=e.split("-").map(function(e){return parseFloat(e.trim())});return[t[0]||0,t[1]||100]}return[0,parseFloat(e)||0]},l=(0,s.useState)(o(a)),c=l[0],u=l[1],d=(0,s.useState)(0),f=d[0],p=d[1],b=(0,s.useState)(100),m=b[0],v=b[1];(0,s.useEffect)(function(){u(o(a))},[a]),(0,s.useEffect)(function(){switch(t){case"bounce_rate":case"conversion_rate":default:p(0),v(100);break;case"time_per_session":p(0),v(3600)}},[t]);var h=function(e){u(e);var t=e[0]===e[1]?e[0].toString():"".concat(e[0],"-").concat(e[1]);i(t)};return(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)(G,{min:f,max:m,value:c,onChange:h,formatValue:function(e){if(""===e||null==e)return"";var r="string"==typeof e?parseFloat(e):e;switch(t){case"bounce_rate":case"conversion_rate":return"".concat(r,"%");case"time_per_session":var n=Math.floor(r/60),s=r%60;return 0<n?"".concat(n,"m ").concat(s,"s"):"".concat(s,"s");default:return r.toString()}},label:(0,g.__)("Filter range","burst-statistics"),showLabels:!0,showCurrentValue:!0,rangeSeparator:" - "}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,g.__)("Exact range values","burst-statistics")}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(E.A,{type:"number",value:c[0],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=f&&r<=m){var n=[r||0,c[1]];u(n),h(n)}},placeholder:(0,g.__)("Min value","burst-statistics"),min:f,max:m,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,g.__)("Minimum value","burst-statistics")})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)(E.A,{type:"number",value:c[1],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=f&&r<=m){var n=[c[0],r||m];u(n),h(n)}},placeholder:(0,g.__)("Max value","burst-statistics"),min:f,max:m,className:"w-full"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,g.__)("Maximum value","burst-statistics")})]}),(0,n.jsx)("button",{type:"button",onClick:function(){u([f,m]),i("")},className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:(0,g.__)("Clear","burst-statistics")})]}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:(0,g.__)("Clear to remove this filter","burst-statistics")})]})]})})};var U=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const q=function(e){var t=e.initialValue,r=void 0===t?"":t,a=e.onChange,i=p().getFilterOptions,o=(0,s.useState)([]),l=o[0],c=o[1];(0,s.useEffect)(function(){var e,t,r,n;e=void 0,t=void 0,n=function(){var e;return function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return[4,i("devices")];case 1:return e=t.sent()||[],c(e),[2]}})},new((r=void 0)||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},[]);var u,d=(0,s.useState)((u=r)&&""!==u.trim()?u.split(",").map(function(e){return e.trim().toLowerCase()}).filter(Boolean):[]),f=d[0],b=d[1];(0,s.useEffect)(function(){var e=0<f.length?f.join(","):"";a(e)},[f,a]);var m=function(e){b(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):U(U([],t,!0),[e],!1)})},h=function(e){return f.includes(e)},y=function(e){var t="".concat(e.title," device filter"),r=h(e.id)?(0,g.__)("selected","burst-statistics"):(0,g.__)("not selected","burst-statistics");return"".concat(t,", ").concat(r)};return l&&0!==l.length?(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center",role:"group","aria-label":(0,g.__)("Device selection options","burst-statistics"),children:l.map(function(e){var t=h(e.id);return(0,n.jsxs)("button",{onClick:function(){return m(e.id)},onKeyDown:function(t){return function(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),m(t))}(t,e.id)},className:(0,w.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:shadow-md",{"border-primary bg-primary-light":t,"border-gray-300 hover:border-gray-400":!t}),"aria-label":y(e),"aria-pressed":t,type:"button",children:[t&&(0,n.jsx)("div",{className:"absolute top-2 right-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,n.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,n.jsx)("div",{className:(0,w.A)("flex h-12 w-12 items-center justify-center rounded-lg transition-colors",{"bg-primary-light":t,"bg-gray-100 group-hover:bg-gray-200":!t}),"aria-hidden":"true",children:(0,n.jsx)(v.A,{name:e.key,color:"gray",size:24,"aria-hidden":"true"})}),(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("h3",{className:(0,w.A)("text-sm font-medium transition-colors",{"text-gray-900":t,"text-gray-700":!t}),children:e.title})})]}),(0,n.jsx)("div",{className:"absolute bottom-2 left-2 z-10","aria-hidden":"true",children:(0,n.jsx)("div",{className:(0,w.A)("h-4 w-4 rounded border-2 transition-all duration-200 flex items-center justify-center",{"bg-primary border-primary":t,"bg-white border-gray-300 group-hover:border-gray-400":!t}),children:t&&(0,n.jsx)(v.A,{name:"check",size:12,color:"white","aria-hidden":"true"})})})]},e.id)})})}):null};var Z=function(){return Z=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Z.apply(this,arguments)};const W=function(e){var t=e.filterKey,r=e.config,s=e.tempValue,a=e.onTempValueChange;return(0,n.jsx)("div",{className:"h-full",children:function(){var e={filterKey:t,config:r,initialValue:s,onChange:a};if("device_id"===t)return(0,n.jsx)(q,Z({},e));switch(r.type){case"string":default:return(0,n.jsx)(M,Z({},e));case"boolean":return(0,n.jsx)(T,Z({},e));case"int":return(0,n.jsx)(K,Z({},e))}}()})};var Q=r(50552);const H=function(e){var t=e.isOpen,r=e.setIsOpen,o=e.initialFilter,l=(0,i.R7)(),c=l.setFilters,u=l.deleteFilter,d=l.clearAllFilters,f=l.getActiveFilters,p=(0,s.useState)("selection"),b=p[0],m=p[1],h=(0,s.useState)(null),y=h[0],x=h[1],_=(0,s.useState)(null),w=_[0],N=_[1],k=(0,s.useState)(""),C=k[0],D=k[1];a().useEffect(function(){t&&(o?(m("setup"),x(o.key),N(o.config),D(o.value)):(m("selection"),x(null),N(null),D("")))},[t,o]);var A=function(){m("selection"),x(null),N(null),D("")};return(0,n.jsx)(j.A,{isOpen:t,onClose:function(){return r(!1)},title:"selection"===b?(0,g.__)("Select a filter","burst-statistics"):(0,g.__)("Setup Filter","burst-statistics"),subtitle:"selection"===b?"selection"===b?(0,g.__)("Choose a filter to apply to your analytics data","burst-statistics"):(0,g.__)("Setup filter","burst-statistics"):void 0,customHeader:"setup"===b&&"setup"===b&&w?(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"flex items-center space-x-3 mb-4",children:(0,n.jsxs)("button",{onClick:A,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded transition-all duration-200","aria-label":(0,g.__)("Back to filters","burst-statistics"),type:"button",children:[(0,n.jsx)(v.A,{name:"chevron-left",size:16,"aria-hidden":"true"}),(0,n.jsx)("span",{children:(0,g.__)("Back to filters","burst-statistics")})]})}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary-light",children:(0,n.jsx)(v.A,{name:w.icon,color:"gray",size:20})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:w.label}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"setup"===b&&w?"string"===w.type?w.options?(0,g.__)("Start typing to search or select from available options","burst-statistics"):(0,g.__)("Enter the value you want to filter by","burst-statistics"):"int"===w.type?(0,g.__)("Set the range for this filter","burst-statistics"):"boolean"===w.type?(0,g.__)("Select the option you want to filter by","burst-statistics"):"":""})]})]})]}):null,content:"selection"===b?(0,n.jsx)(S,{onSelectFilter:function(e,t){x(e),N(t),m("setup");var r=f();D(r[e]||"")}}):y&&w?(0,n.jsx)(W,{filterKey:y,config:w,onBack:A,tempValue:C,onTempValueChange:function(e){D(e)}}):null,footer:"selection"===b?(0,n.jsx)(Q.A,{onClick:function(){d(),r(!1)},btnVariant:"tertiary",size:"sm",className:"w-full",ariaLabel:(0,g.__)("Reset all active filters to default settings","burst-statistics"),children:(0,g.__)("Reset all filters","burst-statistics")}):"setup"===b?(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsx)(Q.A,{onClick:function(){var e,t;y&&(e=y,""===(t=C)||null==t?u(e):c(e,t),r(!1))},btnVariant:"primary",size:"sm",className:"flex-1",ariaLabel:w?(0,g.__)("Apply %s filter","burst-statistics").replace("%s",w.label):(0,g.__)("Apply filter","burst-statistics"),children:(0,g.__)("Apply Filter","burst-statistics")}),(0,n.jsx)(Q.A,{onClick:function(){var e,t;y&&(e=y,""===(t=C)||null==t?u(e):c(e,t),A())},btnVariant:"secondary",size:"sm",className:"flex-1",ariaLabel:w?(0,g.__)("Apply %s filter and continue adding more filters","burst-statistics").replace("%s",w.label):(0,g.__)("Apply filter and add more","burst-statistics"),children:(0,g.__)("Apply & Add More","burst-statistics")})]}):null,triggerClassName:""})};var Y=function(){var e=(0,s.useState)(!1),t=e[0],r=e[1],a=(0,s.useState)(null),l=a[0],c=a[1],u=function(){var e=(0,i.R7)(),t=e.filters,r=e.filtersConf,n=e.setFilters,a=p().getFilterOptionById,l=(0,o.G)(),c=l.setMetrics,u=l.getMetrics,d=(0,s.useState)([]),f=d[0],v=d[1];(0,s.useEffect)(function(){b(void 0,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return[4,h()];case 1:return e=t.sent(),v(e),[2]}})})},[t]);var h=(0,s.useCallback)(function(){return b(void 0,void 0,void 0,function(){var e;return m(this,function(n){switch(n.label){case 0:return e=Object.entries(t).filter(function(e){return e[0],""!==e[1]}),[4,Promise.all(e.map(function(e){return b(void 0,[e],void 0,function(e){var t,n=e[0],s=e[1];return m(this,function(e){switch(e.label){case 0:return[4,y(n,s)];case 1:return t=e.sent(),[2,{key:n,value:s,displayValue:t,config:(null==r?void 0:r[n])||null}]}})})}))];case 1:return[2,n.sent()]}})})},[t,r]),y=function(e,t){return b(void 0,void 0,void 0,function(){var n,s,i,o,l;return m(this,function(c){switch(c.label){case 0:return t?Object.prototype.hasOwnProperty.call(r,e)&&(n=(null===(i=r[e])||void 0===i?void 0:i.options)||!1)?"string"!=typeof t||-1===t.indexOf(",")?[3,2]:(t=t.split(",").map(function(e){return e.trim()}),[4,Promise.all(t.map(function(e){return b(void 0,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,a(e,n)];case 1:return[2,t.sent()||e]}})})}))]):[3,4]:[2,""];case 1:return t=(t=c.sent()).join(", "),[3,4];case 2:return[4,a(t,n)];case 3:t=c.sent()||t,c.label=4;case 4:switch(e){case"country_code":return t?(s=t.toUpperCase(),[2,(null===(l=null===(o=window.burst_settings)||void 0===o?void 0:o.countries)||void 0===l?void 0:l[s])||s]):[2,""];case"bounces":return[2,"include"===t?(0,g.__)("Bounced visitors","burst-statistics"):(0,g.__)("Active visitors","burst-statistics")];case"new_visitor":return[2,"true"===t?(0,g.__)("New visitors","burst-statistics"):(0,g.__)("Returning visitors","burst-statistics")];default:return[2,t]}return[2]}})})},x=(0,s.useCallback)(function(e){if(n(e,""),"goal_id"===e){var t=u().filter(function(e){return"conversions"!==e});c(t)}},[n,c,u]),_=(0,s.useMemo)(function(){return Array.isArray(f)&&0<f.length},[f]),j=(0,s.useCallback)(function(e){return r[e]||null},[r]);return{activeFilters:f,hasActiveFilters:_,removeFilter:x,getFilterConfig:j,setFilter:n,filters:t,filtersConf:r}}(),d=u.activeFilters,f=u.removeFilter;return(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(x,{filters:d,onRemove:f,onClick:function(e){c({key:e.key,config:e.config,value:e.value}),r(!0)},className:"flex flex-wrap gap-2"}),(0,n.jsx)(_,{onClick:function(){c(null),r(!0)}}),(0,n.jsx)(H,{isOpen:t,setIsOpen:function(){r(!1),c(null)},initialFilter:l})]})}},86274:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(51609),s=r(61626),a=r(70802),i=r(78280),o=r(3663),l=r(21587),c=r(84400),u=function(){return u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},u.apply(this,arguments)},d=function(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})},f=function(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const p=function(){var e,t=(0,a.jE)(),r=(0,c.A)().isLicenseValid,p=(0,s.I)({queryKey:["settings_fields"],queryFn:function(){return d(void 0,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,(0,o.ww)()];case 1:return[2,e.sent().fields]}})})},staleTime:3e5,initialData:null===(e=window.burst_settings)||void 0===e?void 0:e.fields,retry:0}),g=(0,i.n)({mutationFn:function(e){return d(void 0,void 0,void 0,function(){return f(this,function(t){switch(t.label){case 0:return[4,(0,o.Ey)(e)];case 1:return t.sent(),[2]}})})},onSuccess:function(){return d(void 0,void 0,void 0,function(){return f(this,function(e){switch(e.label){case 0:return[4,t.invalidateQueries({queryKey:["settings_fields"],refetchType:"active"})];case 1:return e.sent(),l.oR.success("Settings saved"),[2]}})})}}),b=g.mutateAsync,m=g.isPending;return{settings:(0,n.useMemo)(function(){var e=p.data;return void 0===e?e:e.map(function(e){return e.pro&&r?u(u({},e),e.pro):e})},[p.data,r]),saveSettings:b,getValue:function(e){var t,r;return null===(r=null===(t=p.data)||void 0===t?void 0:t.find(function(t){return t.id===e}))||void 0===r?void 0:r.value},addNotice:function(e,r,n,s){t.setQueryData(["settings_fields"],function(t){return t?t.map(function(t){if(t.id!==e)return t;var a={title:s,label:r,description:n};return u(u({},t),{notice:a})}):t})},setValue:function(e,r){t.setQueryData(["settings_fields"],function(t){return t?t.map(function(t){return t.id!==e?t:u(u({},t),{value:r})}):t})},isSavingSettings:m}}},88887:(e,t,r)=>{r.d(t,{S:()=>d});var n=r(30346),s=r(14243),a=r(67201),i=r(89717),o=r(72442),l=r(67072),c=r(91788),u=function(e){if(c.cA[e]){var t=c.cA[e].range(),r=t.startDate,n=t.endDate;return{startDate:(0,i.default)(r,"yyyy-MM-dd"),endDate:(0,i.default)(n,"yyyy-MM-dd"),range:e}}return null},d=(0,n.v)((0,s.Zr)(function(e){return{startDate:(0,i.default)((0,o.default)((0,l.A)(new Date,7)),"yyyy-MM-dd"),endDate:(0,i.default)((0,a.default)((0,l.A)(new Date,1)),"yyyy-MM-dd"),range:"last-7-days",setStartDate:function(t){return e({startDate:t})},setEndDate:function(t){return e({endDate:t})},setRange:function(t){if("custom"!==t){var r=u(t);r&&e(r)}else e({range:t})}}},{name:"burst-date-storage",partialize:function(e){return{range:e.range,startDate:e.startDate,endDate:e.endDate}},onRehydrateStorage:function(){return function(e){if(e&&e.range&&"custom"!==e.range){var t=u(e.range);t&&Object.assign(e,t)}}}}))},91788:(e,t,r)=>{r.d(t,{Ad:()=>P,BM:()=>x,Ee:()=>N,Iq:()=>C,Nj:()=>v,YP:()=>E,ZV:()=>w,cA:()=>S,cf:()=>O,fU:()=>j,fs:()=>h,gs:()=>m,ii:()=>D,oI:()=>y,qQ:()=>k,vd:()=>_,vv:()=>I});var n=r(38443),s=r(71109),a=r(18553),i=r(44184),o=r(67201),l=r(73177),c=r(52368),u=r(89717),d=r(48145),f=r(72442),p=r(6374),g=r(58357),b=r(27723),m=function(e,t){if(void 0===t&&(t=new Date),"number"==typeof e&&(e=new Date(1e3*e)),!(e instanceof Date))return"-";var r={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},n=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),s=e-t;for(var a in r)if(Math.abs(s)>r[a]||"second"===a)return n.format(Math.round(s/r[a]),a);return"-"},v=function(e,t,r){void 0===r&&(r=!0);var n=(e=Number(e))/(t=Number(t));return isNaN(n)&&(n=0),r?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(n):n};function h(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/t;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}function y(e,t){var r={},n=((e=Number(e))-(t=Number(t)))/100;return isNaN(n)&&(n=0),r.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(n),r.status=0<n?"positive":"negative",n===1/0&&(r.val="",r.status="positive"),r}var x=function(e){return(0,n.dateI18n)(burst_settings.date_format,new Date(1e3*e))},_=function(e){return e&&("number"==typeof e||Date.parse(e)>=16409952e5)};function j(e){void 0===e&&(e=0);var t=Number(e);isNaN(t)&&(t=0);var r=Math.floor(t/1e3),n=Math.floor(r/3600),s=Math.floor((r-3600*n)/60),a=r-3600*n-60*s,i=function(e){return isNaN(e)?"00":String(e).padStart(2,"0")};return 0===n?[s,a].map(i).join(":"):[n,s,a].map(i).join(":")}function w(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),1e3>e&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:t}).format(e)}function N(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),0===e?"0%":0<e&&.1>e?"<0.1%":new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:t}).format(e/100)}function k(e){return e?burst_settings.countries[e.toUpperCase()]||(0,b.__)("Not set","burst-statistics"):(0,b.__)("Unknown","burst-statistics")}function C(e){return e?burst_settings.continents[e.toUpperCase()]||(0,b.__)("Not set","burst-statistics"):(0,b.__)("Unknown","burst-statistics")}function D(e){void 0===e&&(e=new Date);var t=-60*e.getTimezoneOffset(),r=Math.floor(e.getTime()/1e3)+3600*burst_settings.gmt_offset-t;return new Date(1e3*r)}var A=D(),S={today:{label:(0,b.__)("Today","burst-statistics"),range:function(){return{startDate:(0,f.default)(A),endDate:(0,o.default)(A)}}},yesterday:{label:(0,b.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(A,-1)),endDate:(0,o.default)((0,s.default)(A,-1))}}},"last-7-days":{label:(0,b.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(A,-7)),endDate:(0,o.default)((0,s.default)(A,-1))}}},"last-30-days":{label:(0,b.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(A,-30)),endDate:(0,o.default)((0,s.default)(A,-1))}}},"last-90-days":{label:(0,b.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(A,-90)),endDate:(0,o.default)((0,s.default)(A,-1))}}},"last-month":{label:(0,b.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,p.default)((0,a.default)(A,-1)),endDate:(0,l.default)((0,a.default)(A,-1))}}},"week-to-date":{label:(0,b.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,s.default)(A,-A.getDay())),endDate:(0,o.default)(A)}}},"month-to-date":{label:(0,b.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,p.default)(A),endDate:(0,o.default)(A)}}},"year-to-date":{label:(0,b.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,g.A)(A),endDate:(0,o.default)(A)}}},"last-year":{label:(0,b.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,g.A)((0,i.default)(A,-1)),endDate:(0,c.A)((0,i.default)(A,-1))}}}},O=function(e){return Object.values(e).filter(Boolean).map(function(e){var t=S[e];return t.isSelected=F,t})},E=function(e,t){var r="MMMM d, yyyy";return{startDate:e?(0,u.default)(new Date(e),r):"",endDate:t?(0,u.default)(new Date(t),r):""}};function F(e){var t=this.range();return(0,d.default)(e.startDate,t.startDate)&&(0,d.default)(e.endDate,t.endDate)}function P(e,t){if(void 0===t&&(t={}),!e||!t[e])return function(e){return w(e)};var r=t[e],n=r.isPercentage,s=r.isTime,a=r.precision,i=r.suffix;return function(e){if(null==e)return"";if(n)return N(e,a);if(s)return j(e);var t=w(e,a);return i&&(t+=i),t}}function I(e,t){return new Intl.NumberFormat(void 0,{style:"currency",currency:e,maximumFractionDigits:2,minimumFractionDigits:2,trailingZeroDisplay:"stripIfInteger"}).format(t)}},98371:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(91637),s=r(85373),a=r(53411);const i=function(e){var t=e.title,r=e.subtitle,i=void 0===r?"":r,o=e.customHeader,l=void 0===o?null:o,c=e.content,u=e.footer,d=e.triggerClassName,f=e.children,p=e.isOpen,g=e.onClose;return(0,n.jsxs)(s.bL,{open:p,onOpenChange:function(e){e||null==g||g()},children:[d&&(0,n.jsx)(s.l9,{className:d,children:f}),(0,n.jsxs)(s.ZL,{container:document.getElementById("modal-root"),children:[(0,n.jsx)(s.hJ,{className:"bg-black/50 fixed inset-0 z-50"}),(0,n.jsxs)(s.UC,{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-[720px] max-h-[90vh] m-3 px-4 py-3 rounded-md z-50 bg-gray-100 shadow-md focus:outline-none data-[state=open]:animate-contentShow flex flex-col overflow-x-visible",children:[(0,n.jsx)("div",{className:"flex flex-row justify-between items-center flex-shrink-0",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"flex-1",children:l}),(0,n.jsx)(s.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:g,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150 ml-4",children:(0,n.jsx)(a.A,{name:"times",size:18,color:"gray"})})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(s.hE,{className:"text-lg font-semibold text-black",children:t}),i&&(0,n.jsx)("p",{className:"text-sm text-gray-600",children:i})]}),(0,n.jsx)(s.bm,{asChild:!0,children:(0,n.jsx)("button",{"aria-label":"Close",onClick:g,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150",children:(0,n.jsx)(a.A,{name:"times",size:18,color:"gray"})})})]})}),(0,n.jsx)(s.VY,{className:"text-base text-black mb-6 mt-4 flex-1 overflow-y-auto overflow-x-visible min-h-0",children:c}),u&&(0,n.jsx)("div",{className:"flex flex-row justify-end gap-2 flex-shrink-0 bottom-0 bg-gray-100 pt-4 border-t border-gray-200 mx-4 px-4",children:u})]})]})]})}}}]);