"use strict";(self.webpackChunk_burst_statistics_burst_statistics=self.webpackChunk_burst_statistics_burst_statistics||[]).push([[563],{10371:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(91637),a=n(51609),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=(0,a.forwardRef)(function(e,t){var n=e.type,a=void 0===n?"text":n,o=e.className,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["type","className"]);return(0,r.jsx)("input",i({ref:t,type:a,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(o||"")},s))});o.displayName="TextInput";const s=o},11989:(e,t,n)=>{n.d(t,{t:()=>o});var r=n(91637),a=n(51609),i=n(2573),o=(0,a.memo)(function(e){var t=e.children,n=e.className,a=void 0===n?"":n,o=/\bp-\S+/.test(a);return(0,r.jsx)("div",{className:(0,i.A)("flex-grow",{"p-6":!o},a),children:t})});o.displayName="BlockContent"},18563:(e,t,n)=>{n.r(t),n.d(t,{component:()=>Vt});var r=n(91637),a=n(51609),i=n.n(a),o=n(23130),s=n(61445),l=n(77902),c=n(67744),u=n(11989),d=n(21632),f=n(10371),p=n(76713),b=n(27723),h=n(2573);const m=function(e){var t=e.className,n=void 0===t?"":t;return(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary bg-opacity-10 text-primary ".concat(n),children:(0,b.__)("Recommended","burst-statistics")})},v=function(e){var t=e.className,n=void 0===t?"":t;return(0,r.jsx)("span",{className:"inline-flex items-center rounded bg-gray-300 px-2 py-0.5 text-xs font-medium text-gray ".concat(n),children:(0,b.__)("Disabled","burst-statistics")})};var y=n(35812),g=n(28786),x=n(84400),j=function(e){return e&&"object"==typeof e&&!i().isValidElement(e)},w=(0,a.memo)(function(e){var t=e.label,n=e.context,a=e.help,i=e.error,o=e.reverseLabel,s=void 0!==o&&o,l=e.alignWithLabel,c=void 0!==l&&l,u=e.fullWidthContent,d=void 0!==u&&u,f=e.className,w=void 0===f?"":f,_=e.inputId,O=e.required,N=void 0!==O&&O,k=e.recommended,S=void 0!==k&&k,A=e.disabled,C=void 0!==A&&A,P=e.children,I=e.warning,D=e.pro,F=(0,x.A)().isLicenseValid,E=(0,h.$)(w,"w-full py-4 box-border",!d&&"px-6",i&&"bg-red-light"),L=c?"flex flex-row items-center justify-between":"flex flex-col",R=s?"order-2":"order-1",q=s?"order-1":"order-2",T=c?s?"ml-4":"":s?"mt-2":"",z=c?s?"":"ml-4":s?"":"mt-2",G=(0,r.jsxs)("div",{className:(0,h.$)("flex items-center gap-2",T,d&&"px-6"),children:[(0,r.jsx)(p.b,{className:"cursor-pointer text-md font-medium text-black",htmlFor:_,children:t}),N&&(0,r.jsxs)("span",{className:"ml-1 text-xs font-normal text-gray",children:["(",(0,b.__)("Required","burst-statistics"),")"]}),S&&(0,r.jsx)(m,{}),C&&!D&&(0,r.jsx)(v,{}),D&&!F&&(0,r.jsx)(y.A,{id:_,url:D.url}),a&&(0,r.jsx)(g.A,{content:a,children:(0,r.jsx)("span",{className:"inline-flex h-5 w-5 cursor-default items-center justify-center rounded-full border border-gray-400 bg-gray-200 text-center text-base leading-none text-gray hover:bg-gray-300 hover:text-primary focus:outline-none focus:ring-2 focus:ring-primary",children:"?"})})]}),M=(0,r.jsx)("div",{className:(0,h.$)("w-full",z,d&&"px-0"),children:P});return(0,r.jsxs)("div",{className:E,children:[(0,r.jsxs)("div",{className:L,children:[(0,r.jsx)("div",{className:(0,h.$)(R),children:G}),(0,r.jsx)("div",{className:(0,h.$)(q),children:M})]}),i&&(0,r.jsx)("p",{className:"mt-2 text-sm font-semibold text-red",role:"alert",children:i}),I&&(0,r.jsx)("p",{className:"mt-2 text-sm font-semibold text-orange",role:"alert",children:I}),n&&(0,r.jsxs)("p",{className:"mt-2 text-sm font-normal text-gray",children:[j(n)?n.text:n,j(n)&&n.url&&" ",j(n)&&n.url&&(0,r.jsx)("a",{className:"text-blue underline",href:n.url,target:"_blank",children:(0,b.__)("More info","burst-statistics")})]})]})});w.displayName="FieldWrapper";const _=w;var O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},O.apply(this,arguments)},N=(0,a.forwardRef)(function(e,t){var n,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),p=d.id||i.name;return"archive_after_months"===p&&console.log(i),(0,r.jsx)(_,O({label:s,help:l,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:c,className:u,inputId:p,required:d.required,recommended:d.recommended,disabled:d.disabled},d,{children:(0,r.jsx)(f.A,O({id:p,type:"text","aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message)},i,d))}))});N.displayName="TextField";const k=N;var S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},S.apply(this,arguments)},A=(0,a.forwardRef)(function(e,t){e.type,e.className;var n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["type","className"]);return(0,r.jsx)("input",S({ref:t,type:"hidden"},n))});A.displayName="HiddenInput";const C=A;var P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},P.apply(this,arguments)},I=(0,a.forwardRef)(function(e,t){var n,a=e.field,i=e.fieldState,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState"]),s=o.id||a.name;return(0,r.jsx)(C,P({},a,{id:s,type:"hidden","aria-invalid":!!(null===(n=null==i?void 0:i.error)||void 0===n?void 0:n.message)},o))});I.displayName="HiddenField";const D=I;var F=function(){return F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},F.apply(this,arguments)},E=(0,a.forwardRef)(function(e,t){var n=e.className,a=e.rows,i=void 0===a?4:a,o=(e.recommended,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["className","rows","recommended"]));return(0,r.jsx)("textarea",F({ref:t,rows:i,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(n||"")},o))});E.displayName="TextAreaInput";const L=E;var R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},R.apply(this,arguments)},q=(0,a.forwardRef)(function(e,t){var n,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,r.jsx)(_,R({label:s,help:l,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:c,className:u,inputId:f,required:d.required,recommended:d.recommended,disabled:d.disabled},d,{children:(0,r.jsx)(L,R({id:f,"aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message)},i,d))}))});q.displayName="TextAreaField";const T=q;var z=n(50552),G=function(){return G=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},G.apply(this,arguments)},M=(0,a.forwardRef)(function(e,t){var n,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name,p=burst_settings.current_ip,h=i.value||"";return(0,r.jsx)(_,G({label:s,help:l,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:c,className:u,inputId:f,required:d.required,recommended:d.recommended,disabled:d.disabled},d,{children:(0,r.jsxs)("div",{className:"space-y-2 w-full",children:[(0,r.jsx)(L,G({ref:t,id:f,placeholder:"127.0.0.1\n192.168.0.1","aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),onChange:function(e){var t=e.target.value;i.onChange(t)},value:h,rows:4},d)),(0,r.jsx)(z.A,{onClick:function(){if(p){var e,t=(h||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");e=0===t.split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e}).length||""===t.trim()?p:t.endsWith("\n")?t+p:t+"\n"+p,i.onChange(e)}},disabled:!p||!p||h.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e}).includes(p),btnVariant:"tertiary",size:"md",children:(0,b.__)("Add current IP address","burst-statistics")})]})}))});M.displayName="IpBlockField";const V=M;var B=n(94976),U=function(){return U=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},U.apply(this,arguments)},W=(0,a.forwardRef)(function(e,t){var n,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,r.jsx)(_,U({label:s,help:l,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:c,className:u+" flex-row",inputId:f,required:d.required,alignWithLabel:!0,recommended:d.recommended,disabled:d.disabled},d,{children:(0,r.jsx)(B.A,U({},i,{id:f,"aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),ref:t},d))}))});W.displayName="SwitchField";const H=W;var K=n(98371),$=n(21587),Q=n(3663),Y=function(){return Y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Y.apply(this,arguments)},Z=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},X=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const J=function(e){var t=e.label,n=e.action,i=e.buttonText,o=e.warnTitle,s=e.warnContent,l=e.warnType,c=e.url,u=e.disabled,d=e.onClick,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["label","action","buttonText","warnTitle","warnContent","warnType","url","disabled","onClick"]),p=(0,a.useState)(!1),h=p[0],m=p[1],v=(0,a.useState)(!1),y=v[0],g=v[1],x=i||t,j=function(){return Z(void 0,void 0,void 0,function(){var e,t;return X(this,function(r){switch(r.label){case 0:if(!n)return[2];g(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,Q.Eo(n,{})];case 2:return(e=r.sent()).success?$.oR.success(e.message||(0,b.__)("Action completed successfully","burst-statistics")):$.oR.error(e.message||(0,b.__)("Action failed","burst-statistics")),[3,5];case 3:return t=r.sent(),$.oR.error((0,b.__)("An error occurred while executing the action","burst-statistics")),console.error("Action execution error:",t),[3,5];case 4:return g(!1),[7];case 5:return[2]}})})},w=function(){m(!1)};return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.A,Y({onClick:function(e){return function(e){return Z(void 0,void 0,void 0,function(){return X(this,function(t){switch(t.label){case 0:return o?(m(!0),[3,4]):[3,1];case 1:return n?[4,j()]:[3,3];case 2:t.sent(),t.label=3;case 3:d&&d(e),t.label=4;case 4:return[2]}})})}(e)},disabled:u||y,btnVariant:"danger"===l?"danger":"secondary"},f,{children:y?(0,b.__)("Processing...","burst-statistics"):x})),o&&(0,r.jsx)(K.A,{title:o,content:s||"",isOpen:h,onClose:w,triggerClassName:"",children:null,footer:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.A,{onClick:w,btnVariant:"tertiary",children:(0,b.__)("Cancel","burst-statistics")}),(0,r.jsx)(z.A,{onClick:function(){return Z(void 0,void 0,void 0,function(){return X(this,function(e){switch(e.label){case 0:return m(!1),n?[4,j()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},btnVariant:"danger"===l?"danger":"secondary",disabled:y,children:y?(0,b.__)("Processing...","burst-statistics"):(0,b.__)("Confirm","burst-statistics")})]})})]}):c?(0,r.jsx)(z.A,Y({link:{to:c,from:"/"},disabled:u},f,{btnVariant:"tertiary",children:x})):(0,r.jsx)(z.A,Y({onClick:d,disabled:u},f,{btnVariant:"tertiary",children:x}))};var ee=function(){return ee=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ee.apply(this,arguments)},te=(0,a.forwardRef)(function(e,t){var n,a,i,o,s,l,c,u,d=e.field,f=e.fieldState,p=e.label,b=e.help,h=e.context,m=e.className,v=e.setting,y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className","setting"]),g=y.id||d.name;return(0,r.jsx)(_,ee({label:p,help:b,error:null===(n=null==f?void 0:f.error)||void 0===n?void 0:n.message,context:h,inputId:g,className:m,alignWithLabel:!0,recommended:y.recommended,disabled:y.disabled},y,{children:(0,r.jsx)(J,ee({},d,{id:g,"aria-invalid":!!(null===(a=null==f?void 0:f.error)||void 0===a?void 0:a.message),ref:t,buttonText:null!==(i=v.button_text)&&void 0!==i?i:"",action:null!==(o=v.action)&&void 0!==o?o:"",url:null!==(s=v.url)&&void 0!==s?s:"",warnTitle:null!==(l=v.warnTitle)&&void 0!==l?l:"",warnContent:null!==(c=v.warnContent)&&void 0!==c?c:"",warnType:null!==(u=v.warnType)&&void 0!==u?u:""},y))}))});te.displayName="ButtonControlField";const ne=te;var re=n(53576),ae=n.n(re);const ie=function(e,t,n){return void 0===n&&(n=[]),(0,a.useCallback)(ae()(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.apply(void 0,t)},t),function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([t],n,!0))};var oe=n(94304),se=n(99696),le=function(){return le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},le.apply(this,arguments)},ce=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},ue=(0,a.forwardRef)(function(e,t){var n,i=e.field,o=e.fieldState,s=e.help,l=e.context,c=(e.className,function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","help","context","className"])),u=c.id||i.name,d=i.value||[],p=(0,a.useState)(""),h=p[0],m=p[1],v=(0,a.useState)(""),y=v[0],g=v[1],x=[{value:"weekly",label:(0,b.__)("Weekly","burst-statistics")},{value:"monthly",label:(0,b.__)("Monthly","burst-statistics")}],j=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},w=ie(function(e){e.length&&!j(e)?g((0,b.__)("Invalid email address","burst-statistics")):g("")},1e3),O=function(){return e=void 0,t=void 0,r=function(){var e;return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(t){return(e=h.trim())?j(e)?10<=d.length?(g((0,b.__)("Maximum 10 emails allowed","burst-statistics")),[2]):d.find(function(t){return t.email===e})?(g((0,b.__)("Email address already added","burst-statistics")),[2]):(g(""),i.onChange(ce(ce([],d,!0),[{email:e,frequency:"monthly"}],!1)),m(""),[2]):(g((0,b.__)("Invalid email address","burst-statistics")),[2]):(g((0,b.__)("Email address is required","burst-statistics")),[2])})},new((n=void 0)||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r},N=[{name:(0,b.__)("Email","burst-statistics"),selector:function(e){return e.email}},{name:(0,b.__)("Frequency","burst-statistics"),cell:function(e){return(0,r.jsx)(oe.A,{value:e.frequency,onChange:function(t){return function(e,t){var n=d.map(function(n){return n.email===e?le(le({},n),{frequency:t}):n});i.onChange(n)}(e.email,t)},options:x})},right:"true"},{name:(0,b.__)("Remove","burst-statistics"),cell:function(e){return(0,r.jsx)(z.A,{onClick:function(){return t=e.email,n=d.filter(function(e){return e.email!==t}),void i.onChange(n);var t,n},btnVariant:"tertiary",children:(0,b.__)("Remove","burst-statistics")})},right:"true"}];return(0,r.jsx)(_,le({label:"",help:s,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:l,inputId:u,fullWidthContent:!0,recommended:c.recommended,disabled:c.disabled},c,{children:(0,r.jsxs)("div",{className:"w-full space-y-4",children:[(0,r.jsx)("p",{className:"px-6 text-sm text-gray",children:(0,b.__)("Recipients will receive weekly or monthly reports with statistics about your website. Add or remove email addresses in the list below.","burst-statistics")}),(0,r.jsx)(se.Ay,{noDataComponent:(0,b.__)("No emails added yet","burst-statistics"),columns:N,data:d,customStyles:{headCells:{style:{paddingLeft:"1.5rem",paddingRight:"1.5rem"}},cells:{style:{paddingLeft:"1.5rem",paddingRight:"1.5rem"}}}}),(0,r.jsxs)(_,{label:"Add emails to receive weekly or monthly reports",error:y,className:"justify-start",children:[(0,r.jsx)(f.A,{name:u,autoComplete:"email",id:u,type:"email",value:h,onChange:function(e){var t=e.target.value;m(t),w(t)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),O())},placeholder:(0,b.__)("Enter email address","burst-statistics"),className:"mt-1 block w-full sm:w-64"}),(0,r.jsx)(z.A,{onClick:O,btnVariant:"tertiary",className:"mt-2",type:"button",children:(0,b.__)("Add to list","burst-statistics")})]})]})}))});ue.displayName="EmailReportsField";const de=ue;var fe=n(89668),pe=n(22385),be=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};const he=(0,a.memo)(function(e){var t=e.indeterminate,n=e.label,i=e.value,o=e.id,s=e.onChange,l=e.required,c=e.disabled,u=e.options,d=void 0===u?{}:u,f=(0,a.useState)(!1),p=f[0],h=f[1],m=i;Array.isArray(m)||(m=""===m?[]:[m]);var v=1===Object.keys(d).length&&"true"===Object.keys(d)[0],y=!!t||i,g=Array.isArray(m)?m:[],x=Object.keys(d).length>10,j=function(){h(!p)},w=!(!c||Array.isArray(c))&&c;return 0===Object.keys(d).length?(0,r.jsx)(r.Fragment,{children:(0,b.__)("No options found","burst-statistics")}):(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[Object.entries(d).map(function(e,a){var i,u=e[0],d=e[1];return(0,r.jsxs)("div",{className:"".concat(!p&&a>9?"hidden":""," flex items-center"),children:[(0,r.jsx)(fe.bL,{className:"w-4 h-4 border border-gray-400 rounded flex-shrink-0 disabled:opacity-50",id:"".concat(o,"_").concat(u),checked:(i=u,v?y:g.includes(""+i)||g.includes(parseInt(i))),"aria-label":n,disabled:w||Array.isArray(c)&&c.includes(u),required:l,onCheckedChange:function(e){return function(e,t){if(v)s(!y);else{var n=g.includes(""+t)||g.includes(parseInt(t))?g.filter(function(e){return e!==""+t&&e!==parseInt(t)}):be(be([],g,!0),[t],!1);s(n)}}(0,u)},children:(0,r.jsx)(fe.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(pe.A,{name:t?"indeterminate":"check",size:14,color:"blue"})})}),(0,r.jsx)("label",{className:"ml-2",htmlFor:"".concat(o,"_").concat(u),children:d})]},u)}),x&&!p&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("button",{onClick:j,className:"underline w-fit",children:(0,b.__)("Show more","burst-statistics")})}),x&&p&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("button",{onClick:j,className:"underline w-fit",children:(0,b.__)("Show less","burst-statistics")})})]})});var me=function(){return me=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},me.apply(this,arguments)},ve=(0,a.forwardRef)(function(e,t){var n,a=e.field,i=e.fieldState,o=e.label,s=e.help,l=e.context,c=e.className,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),d=u.id||a.name;return(0,r.jsx)(_,me({label:o,help:s,error:null===(n=null==i?void 0:i.error)||void 0===n?void 0:n.message,context:l,className:c,inputId:d,required:u.required,recommended:u.recommended,disabled:u.disabled},u,{children:(0,r.jsx)(he,me({},a,{id:d,label:o,ref:t},u))}))});ve.displayName="CheckboxGroupField";const ye=ve;var ge=n(97813),xe=n(61626),je=n(91788),we=n(30346);const _e=(0,we.v)(function(e,t){return{postsLoaded:!1,fetching:!1,posts:[],search:"",maxPostCount:100,filterPosts:function(e,t){return e.filter(function(e){return Object.values(e).some(function(e){return e.toString().toLowerCase().includes(t.toLowerCase())})})},fetchPosts:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return a=void 0,i=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([],n,!0),s=function(n){var r,a,i,o,s,l;return void 0===n&&(n=""),function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(c){switch(c.label){case 0:return r=t().search,a=!1,i=t().posts.length<t().maxPostCount,0<r.length&&0===n.length&&(a=!0),r.length>n.length&&(a=!0),o=!1,0<r.length&&0===n.indexOf(r)&&(o=!0),!a&&t().postsLoaded&&o&&i?(e({fetching:!1}),[2,t().filterPosts(t().posts,n)]):(e({search:n,fetching:!0}),!a&&t().postsLoaded&&n===r||!a&&t().postsLoaded&&3>n.length&&o?(e({fetching:!1}),[2,t().filterPosts(t().posts,n)]):[4,(0,Q.K5)(n)]);case 1:return s=c.sent(),l=(s||[]).map(function(e){return{value:e.page_url,label:e.page_url,page_id:e.page_id,post_title:0<e.post_title.length?e.post_title:(0,b.__)("Untitled","burst-statistics"),pageviews:e.pageviews}}),e({posts:l,postsLoaded:!0,maxPostsCount:s.max_post_count,fetching:!1}),[2,t().filterPosts(l,n)]}})},new((o=void 0)||(o=Promise))(function(e,t){function n(e){try{l(s.next(e))}catch(e){t(e)}}function r(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o(function(e){e(a)})).then(n,r)}l((s=s.apply(a,i||[])).next())});var a,i,o,s}}});var Oe=n(24454),Ne=function(){return Ne=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ne.apply(this,arguments)};const ke=(0,a.forwardRef)(function(e,t){var n,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),f=d.id||(null==i?void 0:i.name),p=_e().fetchPosts,b=(0,a.useState)(""),h=b[0],m=b[1],v=(0,xe.I)({queryKey:["defaultPosts",h],queryFn:function(){return p(h)}}),y=ae()(function(e,t){return n=void 0,r=void 0,i=function(){var n;return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(r){switch(r.label){case 0:return m(e),[4,p(e)];case 1:return n=r.sent(),t(n),[2]}})},new((a=void 0)||(a=Promise))(function(e,t){function o(e){try{l(i.next(e))}catch(e){t(e)}}function s(e){try{l(i.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof a?n:new a(function(e){e(n)})).then(o,s)}l((i=i.apply(n,r||[])).next())});var n,r,a,i},500);return(0,r.jsx)(_,Ne({label:s,help:l,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:c,className:u,inputId:f,required:d.required,recommended:d.recommended,disabled:d.disabled},d,{children:(0,r.jsx)(Oe.A,{onChange:function(e){d.onChange(e.value)},isLoading:v.isLoading,name:"selectPage",value:null==i?void 0:i.value,defaultInputValue:null==i?void 0:i.value,defaultOptions:v.data||[],loadOptions:y,components:{Option:Se}})}))});var Se=function(e){var t=e.innerProps,n=e.innerRef,a=e.data;return(0,r.jsxs)("article",Ne({ref:n},t,{className:"flex items-center justify-between p-2 hover:bg-gray-100 cursor-pointer transition-colors duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("h6",{className:"text-sm font-medium text-black",children:a.label}),"Untitled"!==a.post_title&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"mx-2 text-gray-500",children:" - "}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:a.post_title})]})]}),0<a.pageviews&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,r.jsx)(pe.A,{name:"eye",size:12}),(0,r.jsx)("span",{children:(0,je.ZV)(a.pageviews)})]})]}))},Ae=n(78548),Ce=function(){return Ce=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ce.apply(this,arguments)},Pe=(0,a.forwardRef)(function(e,t){var n,a=e.field,i=e.fieldState,o=e.label,s=e.help,l=e.context,c=e.className,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),d=u.id||a.name;return(0,r.jsx)(_,Ce({label:o,help:s,error:null===(n=null==i?void 0:i.error)||void 0===n?void 0:n.message,context:l,className:c,inputId:d,required:u.required,recommended:u.recommended,disabled:u.disabled},u,{children:(0,r.jsx)(Ae.A,Ce({id:d,options:a.options,value:a.value,disabled:u.settingsIsUpdating||a.disabled,goalId:a.goal_id},u))}))});Pe.displayName="RadioButtonsField";const Ie=Pe;var De=n(93832),Fe=n(47143),Ee=n(70802),Le=(n(3582),function(){return Le=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Le.apply(this,arguments)}),Re=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},qe=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};var Te=function(){return Te=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Te.apply(this,arguments)},ze=(0,a.forwardRef)(function(e,t){var n=e.field,i=e.label,o=(e.help,e.context),s=e.className,l=e.goal,c=e.onChange,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","label","help","context","className","goal","onChange"]),d=u.id||n.name,p=function(e){var t=(void 0===e?{}:e).fields,n=(0,Ee.jE)(),r=(0,Fe.useSelect)(function(e){return e("core").getEntityRecord("root","site")},[]),i=(0,Fe.useSelect)(function(e){return e("core/data").isResolving("core","getEntityRecord",["root","site"])},[]),o=(0,Fe.useDispatch)("core/data").invalidateResolution,s=(0,a.useCallback)(function(){return Re(void 0,void 0,void 0,function(){return qe(this,function(e){return r?[2,r]:[2,new Promise(function(e){var t=wp.data.subscribe(function(){var n=wp.data.select("core").getEntityRecord("root","site");n&&(t(),e(n))})})]})})},[r]),l=(0,xe.I)({queryKey:["wordpressData","siteInfo"],queryFn:s,staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,initialData:r}),c=l.data,u=l.isLoading,d=l.refetch,f=(0,a.useCallback)(function(){return Re(void 0,void 0,void 0,function(){return qe(this,function(e){switch(e.label){case 0:return o("core","getEntityRecord",["root","site"]),[4,d()];case 1:return e.sent(),n.invalidateQueries(["wordpressData","siteInfo"]),[2]}})})},[o,d,n]),p=c||r,b=u||i;if(t&&p){var h=(Array.isArray(t)?t:[t]).reduce(function(e,t){return t in p&&(e[t]=p[t]),e},{});return Le({siteInfo:p,isLoading:b,refreshSiteInfo:f},h)}return{siteInfo:p,isLoading:b,refreshSiteInfo:f}}(),h=p.siteInfo,m=(p.isLoading,(0,a.useState)(!0)),v=m[0],y=m[1],x=null==h?void 0:h.url,j="page"===l.page_or_website?x+l.specific_page:x,w=(0,De.addQueryArgs)(j,{burst_preview:"1",burst_force_logged_out:v?"1":"0"}),O=(0,De.addQueryArgs)(j,{}),N=(0,a.useState)(n.value||""),k=N[0],S=N[1],A=(0,a.useState)(""),C=A[0],P=A[1],I=(0,a.useState)(!1),D=I[0],F=I[1],E=(0,a.useState)({count:null,previews:[],currentIndex:0}),L=E[0],R=E[1],q=(0,a.useState)(""),T=q[0],z=q[1],G=(0,a.useRef)(null),M=(0,a.useRef)(null),V=(0,a.useCallback)(function(e){if(!e)return"";try{return document.querySelectorAll(e),""}catch(e){return"Invalid selector: ".concat(e.message)}},[]),B=(0,a.useCallback)(function(e){if(e){var t=V(e);if(t)return P(t),void R({count:null,previews:[],currentIndex:0});var n=G.current;if(n)try{var r=n.contentDocument||n.contentWindow.document,a=Array.from(r.querySelectorAll(e)),i=a.length;if(0===i)R({count:0,previews:[],currentIndex:0}),z("");else{var o="<head>"+Array.from(r.head.children).map(function(e){return e.outerHTML}).join("")+"</head>",s=a.map(function(e){getComputedStyle(e);var t='<body style="display: flex; justify-content: center; align-items: center; height: 100vh;">'.concat(e.outerHTML,"</body>");return"<!DOCTYPE html>\n<html>\n  ".concat(o,"\n  ").concat(t,"\n</html>")});if(R({count:i,previews:s,currentIndex:0}),P(""),a.length>0){var l=getComputedStyle(a[0]);"none"===l.display||"hidden"===l.visibility?z((0,b.__)("Warning: The current element is hidden via CSS.","burst-statistics")):z("")}}}catch(e){P("Error testing selector: ".concat(e.message)),R({count:null,previews:[],currentIndex:0})}}else R({count:null,previews:[],currentIndex:0})},[V]),U=(0,a.useCallback)(ae()(function(e){B(e),F(!1)},300),[B]);(0,a.useEffect)(function(){return F(!0),U(k),function(){return U.cancel()}},[k,U]),(0,a.useEffect)(function(){var e=function(e){L.previews.length&&("ArrowRight"===e.key?W("next"):"ArrowLeft"===e.key&&W("prev"))};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[L.previews.length]);var W=function(e){R(function(t){var n=t.previews,r=t.currentIndex;if(!n.length)return t;var a="next"===e?(r+1)%n.length:(r-1+n.length)%n.length,i=Te(Te({},t),{currentIndex:a}),o=G.current;if(o)try{var s=o.contentDocument||o.contentWindow.document,l=Array.from(s.querySelectorAll(k));if(l[a]){var c=getComputedStyle(l[a]);"none"===c.display||"hidden"===c.visibility?z((0,b.__)("Warning: this element might be hidden via CSS.","burst-statistics")):z("")}}catch(e){}return i})},H=C?o:null!=L.count?(0,b.sprintf)(
/* translators:
     1: number of elements found
     2: the URL of the preview
     3: logged in/out status */
/* translators:
     1: number of elements found
     2: the URL of the preview
     3: logged in/out status */
(0,b._n)("Found %1$d element on %2$s %3$s","Found %1$d elements on %2$s %3$s",L.count,"burst-statistics"),L.count,O,v?(0,b.__)("(Logged out)","burst-statistics"):(0,b.__)("(Logged in)","burst-statistics")):o,K=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h4",{className:"text-base font-bold mb-2",children:(0,b.__)("Selector Examples:","burst-statistics")}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:".class-name"})," –"," ",(0,b.__)('Selects all elements with class "class-name".',"burst-statistics")]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"#element-id"})," –"," ",(0,b.__)('Selects the element with ID "element-id".',"burst-statistics")]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:"button"})," –"," ",(0,b.__)("Selects all <button> elements.","burst-statistics")]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:'a[href^="https"]'})," –"," ",(0,b.__)('Selects links whose href starts with "https".',"burst-statistics")]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("code",{children:".nav-item:not(.active)"})," –"," ",(0,b.__)('Selects .nav-item elements that do not have the "active" class.',"burst-statistics")]})]})]});return(0,r.jsxs)(_,{label:i,help:K,error:C,warning:T,className:s,inputId:d,required:u.required,children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(f.A,Te({id:d,type:"text",ref:t,value:k},n,u,{"aria-invalid":!!C,"aria-describedby":C?"".concat(d,"-error"):void 0,onChange:function(e){var t=e.target.value;S(t),c(t);var n=V(t);P(n)},className:"w-full"})),D&&(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,r.jsxs)("svg",{className:"animate-spin h-4 w-4 text-gray-600",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]})})]}),(0,r.jsxs)("div",{className:"mt-4 border rounded overflow-hidden",ref:M,tabIndex:0,"aria-label":(0,b.__)("Preview panel, use arrow keys to navigate","burst-statistics"),children:[(0,r.jsxs)("div",{className:"bg-gray-100 p-2 grid grid-cols-3 items-center justify-between border-b",children:[(0,r.jsx)("div",{className:"font-medium text-sm",children:H}),L.previews.length>1&&(0,r.jsx)("div",{className:"col-start-2 flex items-center justify-center",children:(0,r.jsxs)("div",{role:"group","aria-label":(0,b.__)("Step through matches","burst-statistics"),className:"flex items-center justify-center rounded overflow-hidden shadow-sm",children:[(0,r.jsx)("button",{type:"button",onClick:function(){return W("prev")},className:"bg-white text-gray-600 hover:bg-gray-100 px-3 py-1 border-r","aria-label":(0,b.__)("Previous match","burst-statistics"),children:"←"}),(0,r.jsxs)("span",{className:"px-2 py-1 bg-white text-sm",children:[L.currentIndex+1,"/",L.previews.length]}),(0,r.jsx)("button",{type:"button",onClick:function(){return W("next")},className:"bg-white text-gray-600 hover:bg-gray-100 px-3 py-1 border-l","aria-label":(0,b.__)("Next match","burst-statistics"),children:"→"})]})}),(0,r.jsx)("div",{className:"flex items-center justify-end col-start-3 gap-2",children:(0,r.jsx)(g.A,{content:v?(0,b.__)("Set logged in mode","burst-statistics"):(0,b.__)("Set logged out mode","burst-statistics"),children:(0,r.jsx)("button",{type:"button",onClick:function(){return y(!v)},className:"bg-white text-gray-600 hover:bg-gray-100 border-gray-400 px-2 py-2 border rounded-md",children:v?(0,r.jsx)(pe.A,{name:"log-out"}):(0,r.jsx)(pe.A,{name:"log-in"})})})})]}),L.previews.length>0&&!C&&(0,r.jsx)("iframe",{srcDoc:L.previews[L.currentIndex],sandbox:"allow-scripts allow-same-origin",title:"".concat(d,"-preview"),className:"w-full h-48 border-none","aria-live":"polite"})]}),L.previews.length>0&&(0,r.jsx)("span",{className:"sr-only","aria-live":"polite",children:(0,b.__)("%s elements match your selector. Use arrow keys to cycle through matches.","burst-statistics").replace("%s",L.count)}),w&&(0,r.jsx)("iframe",{ref:G,sandbox:"allow-scripts allow-same-origin",src:w,onLoad:function(){return B(k)},referrerPolicy:"no-referrer",style:{display:"none"},title:"".concat(d,"-hidden-tester")})]})});ze.displayName="SelectorField";const Ge=ze,Me=function(e){var t=e.field,n=void 0===t?{}:t,i=(e.fields,e.goal),o=e.value,s=e.setGoalValue,l=(0,a.useState)(!1),c=l[0],u=l[1];(0,a.useEffect)(function(){f(n,o)});var d=function(e){f(n,e),"type"===n.id&&"visits"===e&&s(i.id,"page_or_website","page"),s(i.id,n.id,e)},f=function(e,t){var n=!0;e.required&&(n=0!==t.length),n&&"url"===e.type&&(n=!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)),n&&"css-selector"===e.type&&(n=!!t.length),u(n)},p="burst-"+n.type,b=n.disabled;return"hidden"===n.type||n.conditionallyDisabled?null:"text"===n.type||"url"===n.type?(0,r.jsxs)("div",{className:p,children:[n.parent_label&&(0,r.jsx)("div",{children:(0,r.jsx)("label",{children:n.parent_label})}),c&&(0,r.jsx)(pe.A,{name:"success",color:"green"}),!c&&(0,r.jsx)(pe.A,{name:"times"}),(0,r.jsx)(k,{help:n.comment,placeholder:n.placeholder,label:n.label,onChange:function(e){return d(e.target.value)},value:o,disabled:b})]}):"radio-buttons"===n.type?(0,r.jsx)("div",{className:p,children:(0,r.jsx)(Ie,{disabled:b,field:n,goalId:i.id,inputId:n.id,id:n.id,label:n.label,help:n.comment,value:i[n.id],onChange:function(e){return d(e)},className:"radio-buttons"})}):"hook"===n.type?(0,r.jsx)("div",{className:"flex flex-wrap align-content-stretch gap-8 [&>*]: w-full [&>input[type='text']]:w-full [&>input[type='text']]:box-border",children:(0,r.jsx)(k,{disabled:b,field:n,goal:i,label:n.label,help:n.comment,value:i.hook,onChange:function(e){return d(e.target.value)}})}):"select-page"===n.type?(0,r.jsx)("div",{className:p,children:(0,r.jsx)(ke,{disabled:b,field:n,goal_id:i.id,label:n.label,help:n.comment,value:!1===i.url||"*"===i.url?"":i.url,onChange:function(e){return d(e)}})}):"selector"===n.type?(0,r.jsx)("div",{className:p,children:(0,r.jsx)(Ge,{disabled:b,field:n,goal:i,goal_id:i.id,label:n.label,help:n.comment,value:i.selector,onChange:function(e){return d(e)}})}):void 0};function Ve(e){var t=e.value,n=(e.id,e.onChange),i=(0,a.useState)(t),o=i[0],s=i[1],l=(0,a.useState)(!1),c=l[0],u=l[1],d=(0,a.useRef)(null);return(0,a.useEffect)(function(){c&&d.current&&d.current.focus()},[c]),(0,r.jsx)("div",{children:c?(0,r.jsx)("input",{type:"text",value:o,onChange:function(e){e.preventDefault(),s(e.target.value)},onBlur:function(){return e=this,t=void 0,a=function(){return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(e){switch(e.label){case 0:return u(!1),[4,n(o)];case 1:return e.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(n,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((a=a.apply(e,t||[])).next())});var e,t,r,a},onKeyDown:function(e){" "===e.key&&(e.preventDefault(),s(e.target.value+" ")),"Enter"===e.key&&(e.preventDefault(),u(!1),n(o))},ref:d}):(0,r.jsx)(ge.A,{content:(0,b.__)("Click to edit","burst-statistics"),children:(0,r.jsx)("h5",{className:"min-w-[150px] font-semibold inline-block burst-tooltip-clicktoedit",tabIndex:"0",onClick:function(e){e.preventDefault(),u(!0)},onFocus:function(){u(!0)},children:""!==o?o:(0,r.jsx)("i",{children:(0,b.__)("Untitled goal","burst-statistics")})})})})}var Be=n(85373),Ue=function(e){var t=e.goal;return(0,r.jsxs)(r.Fragment,{children:[(0,b.__)("Are you sure you want to delete this goal?","burst-statistics")+" "+(0,b.__)("This action cannot be undone.","burst-statistics"),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsxs)("strong",{children:[(0,b.__)("Goal name","burst-statistics"),":"]})," ",t.name,(0,r.jsx)("br",{}),(0,r.jsxs)("strong",{children:[(0,b.__)("Status","burst-statistics"),":"]})," ",t.status,(0,r.jsx)("br",{}),(0,r.jsxs)("strong",{children:[(0,b.__)("Date created","burst-statistics"),":"]})," ",(0,je.BM)(t.dateCreated)]})},We=function(e){var t=e.deleteGoal,n=e.onClose,a=e.isDisabled;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Be.bm,{asChild:!0,"aria-label":"Close",children:(0,r.jsx)("button",{className:"burst-button burst-button--secondary",onClick:n,children:(0,b.__)("Cancel","burst-statistics")})}),(0,r.jsx)("button",{disabled:a,className:"burst-button burst-button--tertiary",onClick:function(){return t()},children:(0,b.__)("Delete goal","burst-statistics")})]})};const He=function(e){var t=e.goal,n=e.deleteGoal,i=(0,a.useState)(!1),o=i[0],s=i[1],l=(0,a.useState)(!1),c=l[0],u=l[1],d=function(){s(!1)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K.A,{isOpen:o,onClose:d,title:(0,b.__)("Delete goal","burst-statistics"),content:(0,r.jsx)(Ue,{goal:t}),footer:(0,r.jsx)(We,{deleteGoal:function(){return e=void 0,t=void 0,a=function(){return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(e){switch(e.label){case 0:return u(!0),[4,n()];case 1:return e.sent(),u(!1),s(!1),[2]}})},new((r=void 0)||(r=Promise))(function(n,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((a=a.apply(e,t||[])).next())});var e,t,r,a},onClose:d,isDisabled:c})}),(0,r.jsx)("button",{className:"burst-button-icon burst-button-icon--delete",onClick:function(e){return function(e){e.preventDefault(),s(!0)}(e)},children:(0,r.jsx)(pe.A,{name:"trash",size:18})})]})};var Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ke.apply(this,arguments)};const $e=function(e){var t=e.goal,n=e.goalFields,i=e.setGoalValue,o=e.deleteGoal,l=e.saveGoalTitle,c=(0,a.useState)("active"===t.status),u=c[0],d=c[1],f=(0,a.useMemo)(function(){if(!n||0===n.length)return[];var e=n.map(function(e){var n=Ke({},e);return n.value=t[n.id],n});return(0,s.l)(e)},[n,t]);return n?(0,r.jsx)("div",{className:"w-full bg-gray-100 rounded-m",children:(0,r.jsxs)("details",{className:"rounded-md border border-gray-200",children:[(0,r.jsxs)("summary",{className:"burst-no-marker py-1.5 px-2.5 grid gap-3 items-center list-none [grid-template-columns:26px_1fr_auto_auto_auto]",children:[(0,r.jsx)(pe.A,{name:t.type&&f[1]&&f[1].options&&f[1].options[t.type]?f[1].options[t.type].icon:"eye",size:20}),(0,r.jsx)("span",{children:(0,r.jsx)(Ve,{value:t.title&&0<t.title.length?t.title:" ",id:t.id,defaultValue:(0,b.__)("New goal","burst-statistics"),onChange:function(e){i(t.id,"title",e),l(t.id,e)}})}),(0,r.jsx)(He,{goal:{name:t.title&&0<t.title.length?t.title:" ",status:u?(0,b.__)("Active","burst-statistics"):(0,b.__)("Inactive","burst-statistics"),dateCreated:t&&void 0!==t.date_created&&1<t.date_created?t.date_created:1},deleteGoal:function(){o(t.id)}}),(0,r.jsx)(ge.A,{content:u?(0,b.__)("Click to de-activate","burst-statistics"):(0,b.__)("Click to activate","burst-statistics"),children:(0,r.jsx)("span",{className:"burst-click-to-filter burst-goal-toggle",children:(0,r.jsx)(B.A,{size:"small",value:u,onChange:function(e){d(e),i(t.id,"status",e?"active":"inactive")}})})}),(0,r.jsx)(pe.A,{name:"chevron-down",size:18})]}),0<f.length&&f.map(function(e,n){return(0,r.jsx)(Me,{field:e,goal:t,value:e.value,setGoalValue:i},n)})]})}):null};var Qe=n(50616),Ye=n(65162);const Ze=function(){var e=(0,s.A)(),t=e.goals,n=e.goalFields,i=e.predefinedGoals,o=e.addGoal,l=e.deleteGoal,c=e.updateGoal,u=e.addPredefinedGoal,d=e.setGoalValue,f=e.saveGoalTitle,p=(0,x.A)(),h=p.isLicenseValid,m=(p.isPro,(0,a.useState)(!1)),v=m[0],y=m[1],g=function(e){switch(e){case"hook":return"Hook";case"clicks":return(0,b.__)("Click","burst-statistics");case"views":return(0,b.__)("View","burst-statistics");default:return e}},j=i&&0!==i.length?"":"burst-inactive";return(0,r.jsxs)("div",{className:"box-border w-full p-6",children:[(0,r.jsxs)("p",{className:"text-base",children:[(0,b.__)("Goals are a great way to track your progress and keep you motivated.","burst-statistics"),!h&&" "+(0,b.__)("While free users can create one goal, Burst Pro lets you set unlimited goals to plan, measure, and achieve more.","burst-statistics")]}),(0,r.jsxs)("div",{className:"flex flex-wrap flex-col gap-4 mt-4",children:[0<t.length&&t.map(function(e,t){return(0,r.jsx)($e,{goal:e,goalFields:n,setGoalValue:d,deleteGoal:l,onUpdate:c,saveGoalTitle:f},t)}),(h||0===t.length)&&(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"burst-button burst-button--secondary",type:"button",onClick:o,children:(0,b.__)("Add goal","burst-statistics")}),i&&(0,r.jsxs)(Ye.bL,{open:v,onOpenChange:function(){y(!v)},children:[(0,r.jsxs)(Ye.l9,{type:"button",className:j+" burst-button burst-button--secondary",onClick:function(){y(!v)},children:[(0,b.__)("Add predefined goal","burst-statistics")," ",(0,r.jsx)(pe.A,{name:v?"chevron-up":"chevron-down",color:"gray"})]}),(0,r.jsxs)(Ye.UC,{sideOffset:5,align:"end",className:"z-50 flex flex-col gap-2 rounded-lg border border-gray-400 bg-white p-2",children:[i.map(function(e,t){return(0,r.jsxs)("div",{className:"relative z-50 flex cursor-pointer flex-row gap-1 rounded-lg border border-gray-400 bg-gray-100 p-2",onClick:function(){return function(e){return t=void 0,n=void 0,a=function(){return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(t){switch(t.label){case 0:return y(!1),[4,u(e.id)];case 1:return t.sent(),[2]}})},new((r=void 0)||(r=Promise))(function(e,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(e){e(n)})).then(o,s)}l((a=a.apply(t,n||[])).next())});var t,n,r,a}(e)},children:[(0,r.jsx)(pe.A,{name:"plus",size:18,color:"gray"}),e.title+" ("+g(e.type)+")"]},t)}),(0,b.__)("Plug-in you're looking for not listed?","burst-statistics")+" ",(0,r.jsx)("a",{className:"underline",href:(0,Qe.U)("/request-goal-integration/",{utm_source:"goals-integration-request"}),children:(0,b.__)("Request it here!","burst-statistics")})]})]}),(0,r.jsx)("div",{className:"ml-auto text-right",children:(0,r.jsx)("p",{className:"rounded-lg bg-gray-300 p-1 px-3 text-sm text-gray",children:h?(0,r.jsxs)(r.Fragment,{children:[" ",t.length," / ∞ "]}):(0,r.jsxs)(r.Fragment,{children:[t.length," / 1"]})})})]}),!h&&(0,r.jsxs)("div",{className:"flex gap-4 p-4 bg-gray-200 rounded-md mt-4 justify-start items-center border-2 border-gray-300",children:[(0,r.jsx)(pe.A,{name:"goals",size:24,color:"gray"}),(0,r.jsx)("h4",{children:(0,b.__)("Want more goals?","burst-statistics")}),(0,r.jsx)("div",{className:"burst-divider"}),(0,r.jsx)("p",{className:"text-sm text-gray",children:(0,b.__)("Upgrade to Burst Pro","burst-statistics")}),(0,r.jsx)("a",{href:(0,Qe.U)("/pricing/",{utm_source:"goals-setting",utm_content:"more-goals"}),target:"_blank",className:"ml-auto burst-button burst-button--pro",children:(0,b.__)("Upgrade to Pro","burst-statistics")})]})]})]})},Xe=function(e){var t=e.className,n=e.text,a=e.target,i=e.url,o=e.rel,s="",l="",c="";if(-1!==n.indexOf("%s")){var u=n.split(/%s/);s=u[0],c=u[1],l=u[2]}else c=n;return t=t||"burst-link",(0,r.jsxs)(r.Fragment,{children:[s,(0,r.jsx)("a",{className:t,target:a,rel:o,href:i,children:c}),l]})};var Je=function(){return Je=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Je.apply(this,arguments)},et=(0,a.forwardRef)(function(e,t){var n=e.field,a=e.fieldState,i=e.label,o=e.help,s=(e.context,e.className),l=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),c=(0,x.A)(),u=c.licenseNotices,d=c.licenseStatus,p=c.isLoading,h=c.isLicenseMutationPending,m=c.activateLicense,v=c.deactivateLicense,y=i||(0,b.__)("Enter your license key","burst-statistics"),g=l.id||n.name;return function(){var e,i,c=(0,r.jsxs)(r.Fragment,{children:[(0,b.__)("Activating your license gives you automatic updates and support.","burst-statistics")," ",(0,r.jsx)(Xe,{className:"underline",url:"https://burst-statistics.com/how-to-install-burst-pro/",target:"_blank",rel:"noopener noreferrer",text:(0,b.__)("Having trouble? %sCheck our installation guide%s.","burst-statistics")})," ",(0,r.jsx)(Xe,{className:"underline",url:"https://burst-statistics.com/support/",target:"_blank",rel:"noopener noreferrer",text:(0,b.__)("If that does not help, please %sopen a support ticket%s so we can help you out!","burst-statistics")})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(_,Je({label:y,help:o,error:null===(e=null==a?void 0:a.error)||void 0===e?void 0:e.message,context:c,className:s,inputId:g,required:l.required},l,{children:[(0,r.jsx)(f.A,Je({id:g,"aria-invalid":!!(null===(i=null==a?void 0:a.error)||void 0===i?void 0:i.message),type:"password",placeholder:(0,b.__)("Enter your license key here.","burst-statistics")},n,l,{ref:t})),(0,r.jsxs)("div",{className:"flex flex-row gap-2 mt-2",children:[!p&&"valid"===d&&(0,r.jsx)(z.A,{btnVariant:"tertiary",onClick:function(){return v()},disabled:h,children:(0,b.__)("Deactivate License","burst-statistics")}),!p&&"valid"!==d&&(0,r.jsx)(z.A,{btnVariant:"primary",onClick:function(){return m(n.name,n.value)},disabled:h,children:(0,b.__)("Activate License","burst-statistics")}),h&&(0,r.jsx)(pe.A,{name:"loading",size:20})]})]})),(0,r.jsxs)("div",{className:"flex flex-col gap-2 p-6",children:[(0,r.jsx)("h3",{className:"text-md font-medium text-black",children:(0,b.__)("License status","burst-statistics")}),!p&&u&&u.map(function(e,t){return(0,r.jsx)(nt,{notice:e},t)})]})]})}()});et.displayName="LicenseField";const tt=et;var nt=function(e){var t=e.notice,n={warning:"red",open:"blue",success:"green",loading:"gray"}[t.icon]||"green";return(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,r.jsx)(pe.A,{name:"bullet",color:n}),(0,r.jsx)("p",{children:t.msg}),t.url&&(0,r.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",children:(0,b.__)("More info","burst-statistics")})]})},rt=function(){return rt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},rt.apply(this,arguments)},at=(0,a.forwardRef)(function(e,t){var n,a,i=e.field,o=e.fieldState,s=e.label,l=e.help,c=e.context,u=e.className,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className"]),f=d.id||i.name;return(0,r.jsx)(_,rt({label:s,help:l,error:null===(n=null==o?void 0:o.error)||void 0===n?void 0:n.message,context:c,className:u,inputId:f,required:d.required,alignWithLabel:!0,recommended:d.recommended,disabled:d.disabled},d,{children:(0,r.jsx)(oe.A,rt({},i,{id:f,"aria-invalid":!!(null===(a=null==o?void 0:o.error)||void 0===a?void 0:a.message),ref:t,value:i.value||"",onChange:function(e){return i.onChange(e)},options:d.options||[],disabled:d.disabled}))}))});at.displayName="SelectField";const it=at;var ot=function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ot.apply(this,arguments)},st=(0,a.forwardRef)(function(e,t){var n,a,i,o=e.field,s=e.fieldState,l=e.label,c=e.help,u=e.setting,d=e.context,p=e.className,b=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","setting","context","className"]),h=b.id||o.name,m=null!==(n=String(o.value))&&void 0!==n?n:"";return(0,r.jsx)(_,ot({label:l,help:c,error:null===(a=null==s?void 0:s.error)||void 0===a?void 0:a.message,context:d,className:p,inputId:h,required:b.required,recommended:b.recommended,disabled:b.disabled},b,{children:(0,r.jsx)(f.A,ot({},o,{value:m,id:h,type:"number","aria-invalid":!!(null===(i=null==s?void 0:s.error)||void 0===i?void 0:i.message),ref:t,min:null==u?void 0:u.min,max:null==u?void 0:u.max,step:b.step,placeholder:b.placeholder,disabled:b.disabled,onChange:function(e){return o.onChange(e.target.value)}}))}))});st.displayName="NumberField";const lt=st;var ct=function(){return ct=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ct.apply(this,arguments)};const ut=(0,a.forwardRef)(function(e,t){var n,a,i,o,s,l,c,u=e.field,d=e.fieldState,f=e.label,p=e.help,h=e.className,m=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","className"]),v=burst_settings.plugin_url+"assets/img/burst-email-logo.png",y=(0,xe.I)({queryKey:["attachment",u.value],queryFn:function(){return e=void 0,t=void 0,r=function(){return function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,function(e){switch(e.label){case 0:return"0"===u.value||0===u.value?[3,2]:[4,wp.media.attachment(u.value).fetch()];case 1:return[2,e.sent()];case 2:return[2,null]}})},new((n=void 0)||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())});var e,t,n,r}}),g=y.data,x=y.isLoading,j=(null===(a=null===(n=null==g?void 0:g.sizes)||void 0===n?void 0:n.medium)||void 0===a?void 0:a.url)||(null===(o=null===(i=null==g?void 0:g.sizes)||void 0===i?void 0:i.large)||void 0===o?void 0:o.url)||(null===(l=null===(s=null==g?void 0:g.sizes)||void 0===s?void 0:s.full)||void 0===l?void 0:l.url)||v;return(0,r.jsxs)(_,ct({label:f,help:p,className:h,error:d.error,pro:m.setting.pro,context:m.setting.context,recommended:m.recommended,disabled:m.disabled},m,{children:[(0,r.jsx)("div",{className:"flex items-center justify-center bg-gray-100 rounded-md p-4 border-dashed border-2 border-gray-500 cursor-pointer max-w-72 max-h-24 ".concat(m.disabled?"opacity-50 disabled pointer-events-none":""),onClick:function(){m.disabled||(c||(c=wp.media({title:(0,b.__)("Select a logo","burst-statistics"),button:{text:(0,b.__)("Set logo","burst-statistics")},multiple:!1})).on("select",function(){var e=c.state().get("selection").first(),t=e.id;(e.attributes.sizes.medium||e.attributes.sizes.thumbnail||e.attributes.sizes.full)&&u.onChange(t)}),c.open())},children:j&&!x?(0,r.jsx)("img",{src:j,alt:"Logo",className:"max-w-64 max-h-20"}):(0,r.jsx)(pe.A,{name:"loading",size:18})}),(0,r.jsx)(z.A,{btnVariant:"tertiary",size:"sm",className:"mt-2",onClick:function(){u.onChange(0)},disabled:m.disabled||0===u.value||"0"===u.value,children:(0,b.__)("Reset to Default","burst-statistics")})]}))});var dt=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},ft=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const pt=(0,we.v)(function(e,t){return{archivesLoaded:!1,fetching:!1,restoring:!1,progress:!1,archives:[],downloadUrl:"",fields:[],noData:!1,deleteArchives:function(n){return dt(void 0,void 0,void 0,function(){var r,a;return ft(this,function(i){switch(i.label){case 0:return r=t().archives.filter(function(e){return n.includes(e.id)}),e(function(e){return{archives:e.archives.filter(function(e){return!n.includes(e.id)})}}),(a={}).archives=r,[4,$.oR.promise((0,Q.Eo)("delete_archives",a),{pending:(0,b.__)("Deleting...","burst-statistics"),success:(0,b.__)("Archives deleted successfully!","burst-statistics"),error:(0,b.__)("Failed to delete archive","burst-statistics")})];case 1:return i.sent(),[2]}})})},fetchData:function(){return dt(void 0,void 0,void 0,function(){var n,r,a,i;return ft(this,function(o){switch(o.label){case 0:return(0,x.A)().isPro?t().fetching?[2]:(e({fetching:!0}),n={},[4,(0,Q.Eo)("get_archives",n).then(function(e){return e}).catch(function(e){console.error(e)})]):[2];case 1:return r=o.sent(),a=r.archives,i=r.downloadUrl,e(function(){return{archivesLoaded:!0,archives:a,downloadUrl:i,fetching:!1}}),[2]}})})},startRestoreArchives:function(t){return dt(void 0,void 0,void 0,function(){return ft(this,function(n){switch(n.label){case 0:return e({restoring:!0,progress:0}),e(function(e){return{archives:e.archives.map(function(e){return t.includes(e.id)&&(e.restoring=!0),e})}}),[4,$.oR.promise((0,Q.Eo)("start_restore_archives",{archives:t}),{pending:(0,b.__)("Starting restore...","burst-statistics"),success:(0,b.__)("Restore successfully started!","burst-statistics"),error:(0,b.__)("Failed to start restore process.","burst-statistics")})];case 1:return n.sent(),[2]}})})},fetchRestoreArchivesProgress:function(){return dt(void 0,void 0,void 0,function(){var n,r,a,i,o;return ft(this,function(s){switch(s.label){case 0:return e({restoring:!0}),[4,(0,Q.Eo)("get_restore_progress",{}).then(function(e){return e}).catch(function(e){console.error(e)})];case 1:return n=s.sent(),r=n.progress,a=n.noData,i=!1,100>r&&(i=!0),e({progress:r,restoring:i,noData:a}),100===r&&(o=t().archives.filter(function(e){return!e.restoring}),e({archives:o})),[2]}})})}}});var bt=n(86274),ht=function(){return ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ht.apply(this,arguments)},mt=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},vt=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},yt=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};const gt=(0,a.forwardRef)(function(e,t){!function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}}(e,[]);var n=(0,a.useState)(""),i=n[0],o=n[1],s=(0,a.useState)([]),l=s[0],c=s[1],u=(0,a.useState)(!1),d=u[0],f=u[1],p=(0,a.useState)({}),h=p[0],m=p[1],v=(0,a.useState)(!1),y=v[0],g=v[1],x=(0,a.useState)(!1),j=x[0],w=x[1],_=(0,a.useState)("title"),O=_[0],N=_[1],k=(0,a.useState)("asc"),S=k[0],A=k[1],C=pt(function(e){return e.archives}),P=pt(function(e){return e.archivesLoaded}),I=(pt(function(e){return e.fetching}),pt(function(e){return e.fetchData})),D=pt(function(e){return e.deleteArchives}),F=pt(function(e){return e.downloadUrl}),E=pt(function(e){return e.startRestoreArchives}),L=pt(function(e){return e.fetchRestoreArchivesProgress}),R=pt(function(e){return e.restoring}),q=pt(function(e){return e.progress}),T=(0,bt.A)().addNotice;(0,a.useEffect)(function(){L()},[]),(0,a.useEffect)(function(){P||I()},[P]);var z=function(e){0===e.length&&(w(!1),g(!1)),c(e)},G=function(e){var t=yt([],e,!0);return(t=M(t,O,S)).filter(function(e){return e.title.toLowerCase().includes(i.toLowerCase())})},M=function(e,t,n){if(0===e.length)return e;var r="asc"===n?1:-1;n!==S&&A(n);var a=function(e){var t=e.split(" "),n=t[0],r=t[1];return parseFloat(n)*{B:1,KB:1024,MB:1048576}[r]};return-1!==t.toString().indexOf("title")&&"title"!==O?N("title"):-1!==t.toString().indexOf("size")&&"size"!==O&&N("size"),"title"===O?e.sort(function(e,t){var n=e.id.replace(".zip","").split("-").map(Number),a=n[0],i=n[1],o=t.id.replace(".zip","").split("-").map(Number),s=o[0],l=o[1];return a!==s?r*(a-s):r*(i-l)}):"size"===O&&e.sort(function(e,t){var n=a(e.size),i=a(t.size);return r*(n-i)}),e},V=[{name:(0,r.jsx)("input",{type:"checkbox",className:y?"burst-indeterminate":"",checked:j,onChange:function(e){return function(e){if(e){w(!0);var t=h.currentPage?h.currentPage:1,n=G(C).slice(10*(t-1),10*t);c(n.map(function(e){return e.id}))}else w(!1),c([]);g(!1)}(e.target.checked)}}),selector:function(e){return e.selectControl},grow:1},{name:(0,b.__)("Archive","burst-statistics"),selector:function(e){return e.title},sortable:!0,grow:6},{name:(0,b.__)("Size","burst-statistics"),selector:function(e){return e.size},sortable:!0,grow:2,right:1}],B=G(C),U=[];B.forEach(function(e){var t=ht({},e);t.selectControl=(0,r.jsx)("input",{type:"checkbox",className:"m-0",disabled:t.restoring||R,checked:l.includes(t.id),onChange:function(e){return function(e,t){var n=yt([],l,!0);e?n.includes(t)||(n.push(t),c(n)):(n=yt([],l.filter(function(e){return e!==t}),!0),c(n));var r=h.currentPage?h.currentPage:1,a=G(C).slice(10*(r-1),10*r),i=!0,o=!1;a.forEach(function(e){n.includes(e.id)?o=!0:i=!1}),i?(w(!0),g(!1)):o?(w(!1),g(!0)):g(!1)}(e.target.checked,t.id)}}),U.push(t)});var W=1<l.length;if(!W&&1===l.length){var H=C.filter(function(e){return l.includes(e.id)});W=H.hasOwnProperty(0)&&""!==H[0].download_url}return(0,r.jsxs)("div",{className:"w-full p-6",children:[(0,r.jsx)("div",{className:"py-2.5 px-6",children:(0,r.jsx)("div",{children:(0,r.jsx)("input",{type:"text",placeholder:(0,b.__)("Search","burst-statistics"),value:i,onChange:function(e){return o(e.target.value)}})})}),0<l.length&&(0,r.jsx)("div",{className:"mt-[10px] mb-[10px] items-center bg-blue-light py-2.5 px-6 flex space-y-2",children:(0,r.jsxs)("div",{className:"ml-auto flex gap-2.5 mb-4 mt-4 items-center",children:[W&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("button",{disabled:d||q&&100>q,className:"burst-button burst-button--secondary",onClick:function(e){return function(e){return mt(void 0,void 0,void 0,function(){var t,n;return vt(this,function(r){switch(r.label){case 0:return e.preventDefault(),t=C.filter(function(e){return l.includes(e.id)}),f(!0),n=function(){return mt(void 0,void 0,void 0,function(){var e,r,a,i;return vt(this,function(o){switch(o.label){case 0:if(!(0<t.length))return[3,5];e=t.shift(),r=F+e.id,o.label=1;case 1:return o.trys.push([1,3,,4]),(a=new XMLHttpRequest).responseType="blob",a.open("get",r,!0),a.send(),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var n=window.URL.createObjectURL(this.response),r=window.document.createElement("a");r.href=n,r.download=e.title,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),z(t),f(!1),setTimeout(function(){window.URL.revokeObjectURL(n)},6e4)}},[4,n()];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),console.error(i),f(!1),[3,4];case 4:return[3,6];case 5:f(!1),o.label=6;case 6:return[2]}})})},[4,n()];case 1:return r.sent(),[2]}})})}(e)},children:[(0,b.__)("Download","burst-statistics"),d&&(0,r.jsx)(pe.A,{name:"loading",color:"gray"})]})}),(0,r.jsxs)("button",{disabled:q&&100>q,className:"burst-button burst-button--primary",onClick:function(e){return function(e,t){return mt(void 0,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return e.preventDefault(),z([]),[4,E(t)];case 1:return n.sent(),T("archive_data","warning",(0,b.__)("Because restoring files can conflict with the archiving functionality, archiving has been disabled.","burst-statistics"),(0,b.__)("Archiving disabled","burst-statistics")),[2]}})})}(e,l)},children:[(0,b.__)("Restore","burst-statistics"),100>q&&(0,r.jsx)(pe.A,{name:"loading",color:"gray"})]}),(0,r.jsx)("button",{disabled:q&&100>q,className:"burst-button burst-button--tertiary",onClick:function(e){return function(e,t){return mt(void 0,void 0,void 0,function(){return vt(this,function(n){switch(n.label){case 0:return e.preventDefault(),z([]),[4,D(t)];case 1:return n.sent(),[2]}})})}(e,l)},children:(0,b.__)("Delete","burst-statistics")}),(0,r.jsxs)("div",{children:[1<l.length&&(0,b.__)("%s items selected","burst-statistics").replace("%s",l.length),1===l.length&&(0,b.__)("1 item selected","burst-statistics")]})]})}),0<q&&100>q&&(0,r.jsx)("div",{className:"my-2.5 items-center bg-blue-light py-2.5 px-l flex space-y-2",children:(0,b.__)("Restore in progress, %s complete","burst-statistics").replace("%s",q+"%")}),se.Ay&&(0,r.jsx)(se.Ay,{columns:V,data:U,dense:!0,paginationPerPage:10,onChangePage:function(e){m(ht(ht({},h),{currentPage:e}))},paginationState:h,persistTableHead:!0,defaultSortFieldId:2,pagination:!0,paginationRowsPerPageOptions:[10,25,50],paginationComponentOptions:{rowsPerPageText:"",rangeSeparatorText:(0,b.__)("of","burst-statistics"),noRowsPerPage:!1,selectAllRowsItem:!0,selectAllRowsItemText:(0,b.__)("All","burst-statistics")},noDataComponent:(0,r.jsx)("div",{className:"p-8",children:(0,b.__)("No archives","burst-statistics")}),sortFunction:M})]})});var xt=n(65825),jt=function(){return jt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},jt.apply(this,arguments)},wt=(0,a.forwardRef)(function(e,t){var n,a=e.field,i=e.fieldState,o=e.label,s=e.help,l=e.context,c=e.className,u=e.recommended,d=e.disabled,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["field","fieldState","label","help","context","className","recommended","disabled"]),p=f.id||a.name,b=f.options||{};return(0,r.jsx)(_,jt({label:o,help:s,error:null===(n=null==i?void 0:i.error)||void 0===n?void 0:n.message,context:l,className:c,inputId:p,required:f.required,recommended:u,disabled:d},f,{children:(0,r.jsx)("div",{className:"space-y-4",children:Object.entries(b).map(function(e){var t=e[0],n=e[1],i="string"==typeof n?n:n.label,o="object"==typeof n&&n.context?n.context:null,s="object"==typeof n&&!0===n.recommended;return(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsx)("div",{className:"flex items-start gap-2 rounded-md border border-gray-400 bg-gray-100 px-3 py-2",children:(0,r.jsxs)(xt.A,{id:"".concat(p,"-").concat(t),name:a.name,value:t,label:i,checked:a.value===t,disabled:d,onChange:function(e){return a.onChange(e)},className:c,children:[s&&(0,r.jsx)(m,{}),o&&(0,r.jsx)("div",{className:"text-sm font-light text-gray",children:o})]})})},"".concat(p,"-").concat(t))})})}))});wt.displayName="RadioField";var _t=function(){return _t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},_t.apply(this,arguments)},Ot={text:k,number:lt,api:D,hidden:D,checkbox:H,textarea:T,ip_blocklist:V,button:ne,email_reports:de,checkbox_group:ye,goals:Ze,license:tt,select:it,logo_editor:ut,restore_archives:gt,radio:wt},Nt=(0,a.memo)(function(e){var t,n=e.setting,i=e.control,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["setting","control"]),l=(0,x.A)().isLicenseValid;if("goals"===n.type)return(0,r.jsx)(o.A,{children:(0,r.jsx)(Ze,{})});var c=Ot[n.type];if(!c)return(0,r.jsxs)("div",{className:"w-full",children:["Unknown field type: ",n.type," ",n.id]});var u=_t(_t(_t(_t(_t(_t(_t({},n.required&&{required:{value:!0,message:n.requiredMessage||(0,b.__)("This field is required","burst-statistics")}}),(null===(t=n.validation)||void 0===t?void 0:t.regex)&&{pattern:{value:new RegExp(n.validation.regex),message:n.validation.message||(0,b.__)("Invalid format","burst-statistics")}}),function(){var e;if("ip_blocklist"===n.type){var t=/^((25[0-5]|2[0-4]\d|1?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|1?\d{1,2})$/,r=/^((?:[0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4}|(?:[0-9A-Fa-f]{1,4}:){1,7}:|:(?::[0-9A-Fa-f]{1,4}){1,7}|(?:[0-9A-Fa-f]{1,4}:){1,6}:[0-9A-Fa-f]{1,4}|(?:[0-9A-Fa-f]{1,4}:){1,5}(?::[0-9A-Fa-f]{1,4}){1,2}|(?:[0-9A-Fa-f]{1,4}:){1,4}(?::[0-9A-Fa-f]{1,4}){1,3}|(?:[0-9A-Fa-f]{1,4}:){1,3}(?::[0-9A-Fa-f]{1,4}){1,4}|(?:[0-9A-Fa-f]{1,4}:){1,2}(?::[0-9A-Fa-f]{1,4}){1,5}|[0-9A-Fa-f]{1,4}:(?:(?::[0-9A-Fa-f]{1,4}){1,6})|::(?:ffff(?::0{1,4})?:)?(?:(25[0-5]|2[0-4]\d|1?\d{1,2})\.){3}(25[0-5]|2[0-4]\d|1?\d{1,2}))$/,a=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n").map(function(e){return e.trim()}).filter(function(e){return""!==e})};return{validate:{validIps:function(e){if(!e)return!0;var n=a(e);if(0===n.length)return!0;var i=n.filter(function(e){return!function(e){return t.test(e)||r.test(e)}(e)});return 0===i.length||(0,b.__)("Invalid IP address format: ","burst-statistics")+i.join(", ")},noDuplicates:function(e){if(!e)return!0;var t=a(e);if(0===t.length)return!0;var n={};t.forEach(function(e){var t=function(e){return e.toLowerCase()}(e);n[t]=(n[t]||0)+1});var r=Object.entries(n).filter(function(e){return e[1]>1}).map(function(e){return e[0]});return 0===r.length||(0,b.__)("Duplicate IP addresses found: ","burst-statistics")+r.join(", ")}}}}return(null===(e=n.validation)||void 0===e?void 0:e.validate)?{validate:n.validation.validate}:{}}()),n.min&&{min:n.min}),n.max&&{max:n.max}),n.minLength&&{minLength:n.minLength}),n.maxLength&&{maxLength:n.maxLength}),f=(0,a.useMemo)(function(){return!!n.disabled||!(!n.pro||l)||s.settingsIsUpdating},[n.disabled,s.settingsIsUpdating]);return(0,r.jsx)(o.A,{children:(0,r.jsx)(d.xI,{name:n.id,control:i,rules:u,defaultValue:n.value||n.default,render:function(e){var t=e.field,a=e.fieldState;return(0,r.jsx)(c,_t({field:t,fieldState:a,control:i,required:n.required,label:n.label||n.id,disabled:f,context:n.context,help:n.help,options:n.options,setting:n,recommended:n.recommended,pro:n.pro},s))}})})});Nt.displayName="Field";const kt=Nt;var St=n(31980),At=(0,a.memo)(function(e){var t=e.group,n=e.fields,a=e.control,i=e.isLastGroup,s=(0,x.A)().isLicenseValid,d=i?"rounded-b-none":"mb-5";return 0===n.length?null:(0,r.jsxs)(l.e,{className:d,children:[t.pro&&!s&&(0,r.jsx)(St.A,{className:"backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)("h4",{children:(0,b.__)("Unlock Advanced Features with Burst Pro","burst-statistics")}),(0,r.jsxs)("p",{children:[(0,b.__)("This setting is exclusive to Pro users.","burst-statistics"),t.pro&&t.pro.text&&" "+t.pro.text]}),t.pro.url&&(0,r.jsx)(z.A,{className:"text-center",target:"_blank",link:{to:t.pro.url},btnVariant:"primary",btnSize:"small",children:(0,b.__)("Upgrade to Pro","burst-statistics")})]})}),(0,r.jsx)(c.q,{title:t.title,className:"burst-settings-group-block"}),(0,r.jsxs)(u.t,{className:"p-0 pb-4",children:[t.description&&(0,r.jsx)("h3",{className:"mb-5 text-sm",children:t.description}),(0,r.jsx)("div",{className:"flex flex-wrap",children:n.map(function(e,t){return(0,r.jsx)(o.A,{fallback:"Could not load field",children:(0,r.jsx)(kt,{index:t,setting:e,control:a},t)},t)})})]})]},t.id)});At.displayName="SettingsGroupBlock";const Ct=At;var Pt=function(){var e=(0,a.useState)(0),t=e[0],n=e[1],i=(0,a.useState)(!1),o=i[0],s=i[1],l=(0,a.useCallback)(function(){var e=document.documentElement.scrollHeight-window.innerHeight;0<e?(n(Math.round(window.scrollY/e*100)),s(!0)):s(!1)},[]);return(0,a.useEffect)(function(){l();var e=["scroll","resize","load"];e.forEach(function(e){return window.addEventListener(e,l)});var t=new MutationObserver(l);return t.observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}),function(){e.forEach(function(e){return window.removeEventListener(e,l)}),t.disconnect()}},[l]),o?(0,r.jsx)("div",{className:"h-1 w-full bg-gray-400",children:(0,r.jsx)("div",{className:"h-full bg-blue transition-all duration-300 ease-out",style:{width:"".concat(10+Math.min(t,90),"%")}})}):null};Pt.displayName="FormScrollProgressLine";const It=Pt;function Dt(e){var t=e.onSubmit,n=e.control,a=(0,d.lN)({control:n}),i=a.isDirty,o=a.isSubmitting,s=a.isValidating,l=[{condition:o,message:(0,b.__)("Saving...","burst-statistics"),color:"black"},{condition:s,message:(0,b.__)("Validating...","burst-statistics"),color:"black"},{condition:i,message:(0,b.__)("You have unsaved changes","burst-statistics"),color:"black"}].find(function(e){return e.condition});return(0,r.jsxs)("div",{className:"sticky bottom-0 start-0 z-10 rounded-b-md border-b border-r border-l border-gray-300 bg-gray-100 shadow-[0_-8px_15px_-3px_rgba(0,0,0,0.05),0_4px_6px_-2px_rgba(0,0,0,0.05)]",children:[(0,r.jsx)(It,{}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2 p-5",children:[(null==l?void 0:l.message)&&(0,r.jsx)("div",{className:"flex gap-2 items-center py-1 px-2 rounded-md transition-opacity duration-150"+((null==l?void 0:l.message)?" opacity-100":" opacity-0")+("red"===(null==l?void 0:l.color)?" bg-red-light border border-red":""),children:(0,r.jsx)("span",{className:"text-sm"+("red"===(null==l?void 0:l.color)?" font-semibold text-red":" italic text-gray-900"),children:null==l?void 0:l.message})}),(0,r.jsx)(z.A,{className:"burst-save",onClick:t,children:(0,b.__)("Save","burst-statistics")})]})]})}Dt.displayName="FormFooter";const Ft=Dt;var Et=function(){return Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Et.apply(this,arguments)};const Lt=function(e){var t=e.currentSettingPage,n=(0,bt.A)(),i=n.settings,l=n.saveSettings,c=(0,s.A)().saveGoals,u=t.id,f=(0,a.useMemo)(function(){return Rt(i,u)},[i]),p=(0,d.mN)({defaultValues:f}),b=p.handleSubmit,h=p.control,m=p.formState.dirtyFields,v=p.reset;(0,a.useEffect)(function(){v(f)},[f,v]);var y=(0,d.FH)({control:h}),g=(0,a.useMemo)(function(){var e=[];return t.groups.forEach(function(t){var n=i.filter(function(e){return e.menu_id===u&&e.group_id===t.id}).filter(function(e){return!e.react_conditions||Object.entries(e.react_conditions).every(function(e){var t=e[0],n=e[1],r=null==y?void 0:y[t];return n.includes(r)})});n.length>0&&e.push(Et(Et({},t),{fields:n}))}),e},[i,u,t.groups,y]);return(0,r.jsx)("form",{children:(0,r.jsxs)(o.A,{fallback:"Could not load Settings",children:[g.map(function(e,t){var n=t===g.length-1;return(0,r.jsx)(Ct,{group:e,fields:e.fields,control:h,isLastGroup:n},e.id)}),"license"!==u&&(0,r.jsx)(Ft,{onSubmit:b(function(e){var t=Object.keys(m).reduce(function(t,n){return t[n]=e[n],t},{});l(t),c()}),control:h})]})})};var Rt=function(e,t){var n={};return e.forEach(function(e){var t=void 0!==e.value&&""!==e.value;n[e.id]=t?e.value:e.default}),Et({},n)},qt=n(48474),Tt=(0,a.memo)(function(e){var t=e.className,n=void 0===t?"":t,a=e.children,i=e.title,o=e.isOpen,s=e.onToggle;return(0,r.jsx)(l.e,{className:n,children:(0,r.jsxs)("details",{className:"group",open:o,onToggle:function(e){return s(e.currentTarget.open)},children:[(0,r.jsxs)("summary",{className:"flex cursor-pointer items-center justify-between p-4 hover:bg-gray-50 hover:rounded-xl",children:[(0,r.jsx)("span",{className:"text-base font-medium text-black",children:i}),(0,r.jsx)("svg",{className:"h-5 w-5 text-gray transition-transform group-open:rotate-180",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})]}),(0,r.jsx)("div",{className:"p-4 pt-0",children:a})]})})});Tt.displayName="CollapsableBlock";var zt=function(e){var t=e.settingsGroup,n=(0,bt.A)().settings.filter(function(e){return e.notice&&e.menu_id===t.id}),i=(0,a.useState)(n.map(function(){return!1})),o=i[0],s=i[1];if(!n.length)return null;var l=o.filter(function(e){return e}).length>n.length/2?(0,b.__)("Collapse all","burst-statistics"):(0,b.__)("Expand all","burst-statistics");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex w-full justify-between",children:[(0,r.jsx)("h2",{className:"py-4 text-base font-bold",children:(0,b.__)("Notifications","burst-statistics")}),(0,r.jsx)("button",{className:"cursor-pointer text-sm text-gray underline",onClick:function(){var e=o.filter(function(e){return e}).length<=notices.length/2;s(notices.map(function(){return e}))},children:l})]}),0<n.length&&n.map(function(e,t){return(0,r.jsx)(Tt,{title:e.notice.title,className:"mb-4 w-full flex-1 !bg-accent-light",isOpen:o[t],onToggle:function(e){return function(e,t){s(function(n){var r=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([],n,!0);return r[e]=t,r})}(t,e)},children:(0,r.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,r.jsx)("p",{className:"text-base font-normal",children:e.notice.description}),e.notice.url&&""!==e.notice.url&&(0,r.jsx)(qt.N_,{className:"mt-2 text-base text-gray underline",to:e.notice.url,from:"/",children:(0,b.__)("Learn more","burst-statistics")})]})},t)})]})};zt.displayName="SettingsNotices";const Gt=zt;var Mt=n(55195);function Vt(){var e=Mt.q.useLoaderData().currentItem;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"col-span-12 lg:col-span-6 flex flex-col",children:(0,r.jsx)(Lt,{currentSettingPage:e})}),(0,r.jsx)("div",{className:"col-span-12 lg:col-span-3",children:(0,r.jsx)(Gt,{settingsGroup:e})})]})}},24454:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(91637),a=n(51609),i=n(29436),o=n(66087),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},s.apply(this,arguments)},l=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},c=(0,a.forwardRef)(function(e,t){var n=e.value,c=e.onChange,u=e.loadOptions,d=e.defaultOptions,f=void 0===d?[]:d,p=e.isLoading,b=void 0!==p&&p,h=e.isSearchable,m=void 0===h||h,v=e.name,y=e.disabled,g=void 0!==y&&y,x=e.placeholder,j=void 0===x?"Select an option...":x,w=e.insideModal,_=void 0!==w&&w,O=e.maxSelections,N=void 0===O?1:O,k=e.showRemoveButton,S=void 0===k||k,A=e.allowCustomValue,C=void 0===A||A,P=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["value","onChange","loadOptions","defaultOptions","isLoading","isSearchable","name","disabled","placeholder","insideModal","maxSelections","showRemoveButton","allowCustomValue"]),I=(0,a.useState)([]),D=I[0],F=I[1],E=(0,a.useState)(""),L=E[0],R=E[1],q=(0,a.useState)(b),T=q[0],z=q[1],G=(0,a.useCallback)((0,o.debounce)(function(e){u&&(z(!0),u(e,function(e){F(e),z(!1)}))},150),[u]);(0,a.useEffect)(function(){return function(){G.cancel()}},[G]),(0,a.useEffect)(function(){Array.isArray(f)?F(f):!0===f&&u&&(z(!0),u("",function(e){F(e),z(!1)}))},[f,u]);var M=function(){if(!n)return[];if(Array.isArray(n))return n.map(function(e){return"object"==typeof e&&e.hasOwnProperty("value")&&e.hasOwnProperty("label")?e:D.find(function(t){return t.value===e})||{value:e,label:e.toString()}});if("object"==typeof n&&n.hasOwnProperty("value")&&n.hasOwnProperty("label"))return[n];var e=D.find(function(e){return e.value===n});return e?[e]:[{value:n,label:n.toString()}]}(),V=D.filter(function(e){return!M.some(function(t){return t.value===e.value})}),B=C&&""!==L.trim()&&(0===D.length||!D.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===L.toLowerCase()})&&!M.some(function(e){var t;return(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase()===L.toLowerCase()}));B&&(V=l([{value:L.trim(),label:L.trim(),isCustom:!0}],V,!0));var U=(0,i.mH)({selectedItems:M,onStateChange:function(e){var t=e.selectedItems;switch(e.type){case i.mH.stateChangeTypes.SelectedItemKeyDownBackspace:case i.mH.stateChangeTypes.SelectedItemKeyDownDelete:case i.mH.stateChangeTypes.DropdownKeyDownBackspace:case i.mH.stateChangeTypes.FunctionRemoveSelectedItem:t&&c(1===N?t.length>0?t[0]:null:t)}}}),W=U.getSelectedItemProps,H=U.getDropdownProps,K=(U.addSelectedItem,U.removeSelectedItem,(0,i.Bp)({items:V,selectedItem:null,inputValue:L,stateReducer:function(e,t){var n=t.changes;switch(t.type){case i.Bp.stateChangeTypes.InputKeyDownEnter:case i.Bp.stateChangeTypes.ItemClick:return s(s({},n),{isOpen:N>1,highlightedIndex:0,inputValue:""});default:return n}},onStateChange:function(e){var t=e.type,n=e.selectedItem,r=e.inputValue;switch(t){case i.Bp.stateChangeTypes.InputKeyDownEnter:case i.Bp.stateChangeTypes.ItemClick:if(n)if(1===N)c(n),R("");else if(M.length<N){var a=l(l([],M,!0),[n],!1);c(a),R("")}break;case i.Bp.stateChangeTypes.InputChange:R(r||""),u&&m&&G(r||"")}},itemToString:function(e){return e?e.label:""}})),$=K.isOpen,Q=K.getToggleButtonProps,Y=K.getInputProps,Z=K.getMenuProps,X=K.getItemProps,J=K.highlightedIndex,ee=K.getComboboxProps,te=function(e){var t=M.filter(function(t){return t.value!==e.value});c(1===N?t.length>0?t[0]:null:t)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",s({},ee(),{className:"flex min-h-[2.5rem] w-full rounded-md border border-gray-400 bg-white focus-within:border-primary-dark focus-within:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200",children:[(0,r.jsxs)("div",{className:"flex flex-1 flex-wrap items-center gap-1 p-1",children:[M.map(function(e,t){return(0,r.jsxs)("span",s({},W({selectedItem:e,index:t}),{className:"inline-flex items-center gap-1 rounded bg-primary-light px-2 py-1 text-xs text-primary-dark focus:bg-primary focus:text-white focus:outline-none",children:[e.label,S&&(0,r.jsx)("button",{type:"button",onClick:function(t){t.stopPropagation(),te(e)},className:"ml-1 rounded-full hover:bg-primary hover:text-white focus:bg-primary focus:text-white focus:outline-none","aria-label":"Remove ".concat(e.label),children:(0,r.jsx)("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),"selected-item-".concat(t))}),(1===N||M.length<N)&&(0,r.jsx)("input",s({},Y(H(s(s(s({preventKeyAction:$},t?{ref:t}:{}),{name:v,disabled:g,placeholder:0===M.length?j:N>1?"Add ".concat(N-M.length," more..."):"",readOnly:!m,onKeyDown:function(e){if("Backspace"===e.key&&""===L&&M.length>0){e.preventDefault();var t=M[M.length-1];te(t)}}}),P))),{className:"flex-1 min-w-[120px] border-none bg-transparent p-1 focus:outline-none disabled:cursor-not-allowed",style:{outline:"none"}}))]}),(0,r.jsxs)("div",{className:"flex items-center border-l border-gray-300",children:[N>0&&(0,r.jsxs)("span",{className:"px-2 text-xs text-gray-500 border-r border-gray-200",children:[M.length,"/",N]}),(0,r.jsx)("button",s({type:"button"},Q({disabled:g}),{className:"flex items-center justify-center bg-transparent px-2 py-2 hover:bg-gray-100 focus:border-primary-dark focus:outline-none disabled:cursor-not-allowed disabled:bg-gray-200","aria-label":"Toggle menu",children:T?(0,r.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-primary"}):(0,r.jsx)("svg",{className:"h-4 w-4 transition-transform ".concat($?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}))]})]})),(0,r.jsx)("div",s({},Z(),{className:"w-full ".concat(_?"fixed":""," ").concat($?"":"hidden"),children:(0,r.jsxs)("ul",{className:"relative top-0 z-[9999] max-h-60 overflow-y-auto w-full rounded-md border border-gray-300 bg-white shadow-lg ".concat($&&V.length?"":"hidden"),children:[V.map(function(e,t){return(0,r.jsx)("li",s({},X({item:e,index:t}),{className:"cursor-pointer px-3 py-2 text-sm first:rounded-t-md last:rounded-b-md ".concat(J===t?"bg-primary-light text-primary-dark":"hover:bg-gray-100"),children:e.isCustom?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-4 w-4 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),'Create "',e.label,'"']}):e.label}),e.value)}),0===V.length&&!T&&(0,r.jsx)("li",{className:"px-3 py-2 text-sm text-gray-500",children:M.length>=N?"Maximum ".concat(N," selection").concat(N>1?"s":""," reached"):"No options found"})]})}))]})});c.displayName="AsyncSelectInput";const u=c},28786:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(91637),a=n(9564),i=n(27723);const o=function(e){var t=e.content,n=e.side,o=void 0===n?"top":n,s=(e.className,e.hasArrow),l=void 0===s||s,c=e.delayDuration,u=void 0===c?300:c,d=e.children;return(0,r.jsx)(a.Kq,{delayDuration:u,children:(0,r.jsxs)(a.bL,{children:[(0,r.jsx)(a.l9,{"aria-label":(0,i.__)("Help information","burst-statistics"),onClick:function(e){e.preventDefault(),e.stopPropagation()},onMouseDown:function(e){return e.stopPropagation()},children:d}),(0,r.jsxs)(a.UC,{side:o,sideOffset:5,className:"z-[99999] max-w-xs bg-gray-200 text-gray border border-gray-300 px-2 py-1.5 text-base rounded shadow-md\n            animate-in fade-in-50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 \n            data-[state=delayed-open]:data-[side=top]:slide-in-from-bottom-2\n            data-[state=delayed-open]:data-[side=bottom]:slide-in-from-top-2\n            data-[state=delayed-open]:data-[side=left]:slide-in-from-right-2\n            data-[state=delayed-open]:data-[side=right]:slide-in-from-left-2",onClick:function(e){return e.stopPropagation()},children:["string"==typeof t?(0,i.__)(t,"burst-statistics"):t,l&&(0,r.jsx)(a.i3,{className:"fill-gray-300",width:10,height:5})]})]})})}},31980:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(91637);const a=function(e){var t=e.children,n=e.className,a=void 0===n?"":n;return(0,r.jsx)("div",{className:"absolute inset-0 flex items-end justify-center bg-black/10 z-50 py-4 px-4 ".concat(a),children:(0,r.jsx)("div",{className:"bg-white rounded-lg px-5 py-3  w-[90%] max-w-md relative shadow-md",children:t})})}},61445:(e,t,n)=>{n.d(t,{A:()=>h,l:()=>b});var r=n(61626),a=n(70802),i=n(78280),o=n(3663),s=n(21587),l=n(27723),c=n(89085),u=n(84400),d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},d.apply(this,arguments)},f=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},p=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},b=function(e){return e.map(function(t){var n=d({},t);if(t.react_conditions){var r=function(e,t){return!e||0===Object.keys(e).length||Object.entries(e).some(function(e){var n=e[0],r=e[1],a=t.find(function(e){return e.id===n});if(!a)return!1;var i=a.value;return!!i&&r.includes(i)})}(t.react_conditions,e);"disable"===t.condition_action?n.disabled=!r:n.conditionallyDisabled=!r}return n})};const h=function(){var e,t,n,b=(0,a.jE)(),h=(0,r.I)({queryKey:["goals_data"],queryFn:function(){return f(void 0,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,(0,o.DX)()];case 1:return[2,{goals:(e=t.sent()).goals||[],predefinedGoals:e.predefinedGoals||[],goalFields:Object.values(e.goalFields||{})}]}})})},retry:1}),m=(0,i.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){var e,t;return p(this,function(n){switch(n.label){case 0:return e=(null===(t=b.getQueryData(["goals_data"]))||void 0===t?void 0:t.goals)||[],[4,(0,o.d2)({goals:e})];case 1:return[2,n.sent()]}})})},onSuccess:function(){},onError:function(e){console.error(e),s.oR.error((0,l.__)("Failed to save goals","burst-statistics"))}}),v=(0,i.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t,n=e.id,r=e.value;return p(this,function(e){switch(e.label){case 0:return t=[{id:n,title:r}],[4,(0,o.d2)({goals:t})];case 1:return[2,e.sent()]}})})},onError:function(e){console.error(e),s.oR.error((0,l.__)("Failed to save goal title","burst-statistics"))}}),y=(0,i.n)({mutationFn:function(){return f(void 0,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,(0,o.D)()];case 1:return[2,e.sent()]}})})},onSuccess:function(e){b.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),s.oR.success((0,l.__)("Goal added successfully!","burst-statistics"))},onError:function(e){console.error(e),s.oR.error((0,l.__)("Failed to add goal","burst-statistics"))}}),g=(0,i.n)({mutationFn:function(e){return f(void 0,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,(0,o.$x)(e)];case 1:return[2,t.sent()]}})})},onSuccess:function(e,t){e.deleted&&(b.setQueryData(["goals_data"],function(e){return e?(0,c.jM)(e,function(e){if(1===e.goals.length)e.goals=[];else{var n=e.goals.findIndex(function(e){return e.id===t});-1!==n&&e.goals.splice(n,1)}}):e}),s.oR.success((0,l.__)("Goal deleted successfully!","burst-statistics")))},onError:function(e){console.error(e),s.oR.error((0,l.__)("Failed to delete goal","burst-statistics"))}}),x=(0,i.n)({mutationFn:function(e){return f(void 0,[e],void 0,function(e){var t=e.predefinedGoalId;return p(this,function(e){switch(e.label){case 0:if(!(0,u.A)().isPro)throw new Error((0,l.__)("Predefined goals are a premium feature.","burst-statistics"));return[4,(0,o.ZI)(t)];case 1:return[2,e.sent()]}})})},onSuccess:function(e){b.setQueryData(["goals_data"],function(t){return t?(0,c.jM)(t,function(t){t.goals.push(e.goal)}):t}),s.oR.success((0,l.__)("Successfully added predefined goal!","burst-statistics"))},onError:function(e){console.error(e),s.oR.error(e.message||(0,l.__)("Failed to add predefined goal","burst-statistics"))}});return{goals:(null===(e=h.data)||void 0===e?void 0:e.goals)||[],goalFields:(null===(t=h.data)||void 0===t?void 0:t.goalFields)||[],predefinedGoals:(null===(n=h.data)||void 0===n?void 0:n.predefinedGoals)||[],isLoading:h.isLoading,isError:h.isError,getGoal:function(e){var t,n=(null===(t=h.data)||void 0===t?void 0:t.goals)||[];if(!Array.isArray(n))return!1;var r=n.findIndex(function(t){return t.id==e});return-1!==r&&n[r]},setGoalValue:function(e,t,n){b.setQueryData(["goals_data"],function(r){return r?(0,c.jM)(r,function(r){var a=r.goals.findIndex(function(t){return t.id===e});-1!==a&&(r.goals[a][t]=n)}):r})},updateGoal:function(e,t){b.setQueryData(["goals_data"],function(n){return n?(0,c.jM)(n,function(n){var r=n.goals.findIndex(function(t){return t.id===e});-1!==r&&(n.goals[r]=d(d({},n.goals[r]),t))}):n})},getGoalAsync:function(e){return f(void 0,void 0,void 0,function(){var t,n;return p(this,function(r){switch(r.label){case 0:return[4,b.ensureQueryData({queryKey:["goals_data"],queryFn:o.DX})];case 1:return t=r.sent(),[2,(null===(n=null==t?void 0:t.goals)||void 0===n?void 0:n.find(function(t){return String(t.id)===String(e)}))||null]}})})},saveGoals:m.mutateAsync,saveGoalTitle:function(e,t){return v.mutateAsync({id:e,value:t})},addGoal:y.mutateAsync,deleteGoal:g.mutateAsync,addPredefinedGoal:function(e){return x.mutateAsync({predefinedGoalId:e})},invalidateGoals:function(){return b.invalidateQueries(["goals_data"])}}}},65825:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(91637),a=n(51609),i=n(27723),o=n(22385),s=(0,a.forwardRef)(function(e,t){var n=e.id,a=e.name,s=e.value,l=e.label,c=e.checked,u=e.disabled,d=void 0!==u&&u,f=e.onChange,p=e.className,b=void 0===p?"":p,h=e.tooltip,m=void 0===h?"":h,v=e.recommended,y=void 0!==v&&v,g=e.children;return(0,r.jsxs)("div",{className:"flex items-center gap-2 ".concat(b),children:[(0,r.jsx)("input",{ref:t,type:"radio",id:n,name:a,value:s,checked:c,disabled:d,onChange:function(e){return f(e.target.value)},className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 my-1 mx-0"}),(0,r.jsxs)("label",{htmlFor:n,className:"text-sm text-gray cursor-pointer",children:[l," ",g," ",y&&(0,r.jsxs)("span",{className:"text-xs font-semibold",children:["(",(0,i.__)("Recommended","burst-statistics"),")"]})]}),m&&(0,r.jsx)(o.A,{tooltip:m,color:"blue",name:"help",size:16,className:"bg-blue-light rounded-full"})]})});s.displayName="RadioInput";const l=s},67744:(e,t,n)=>{n.d(t,{q:()=>o});var r=n(91637),a=n(51609),i=n(2573),o=(0,a.memo)(function(e){var t=e.title,n=e.controls,a=e.className,o=void 0===a?"":a;return(0,r.jsxs)("div",{className:(0,i.A)(o,"flex min-h-16 items-center justify-between px-6 gap-4 max-m:px-2.5"),children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:t}),n]})});o.displayName="BlockHeading"},77902:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(91637),a=n(2573),i=n(23130),o=(0,n(51609).memo)(function(e){var t=e.className,n=void 0===t?"":t,o=e.children;return(0,r.jsx)(i.A,{children:(0,r.jsx)("div",{className:(0,a.A)("col-span-12 flex flex-col rounded-xl bg-white shadow-sm relative border border-gray-300",n),children:o})})});o.displayName="Block"},78548:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(91637),a=n(51609),i=n(2573),o=n(22385),s=(0,a.forwardRef)(function(e,t){var n=e.inputId,a=e.options,s=e.value,l=e.columns,c=void 0===l?2:l,u=e.disabled,d=void 0!==u&&u,f=e.goalId,p=e.onChange,b=e.className,h=void 0===b?"":b,m=f?"".concat(f,"-").concat(n):n;return(0,r.jsx)("div",{className:(0,i.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(c),h),ref:t,children:Object.keys(a).map(function(e){var t=a[e],n="".concat(m,"-").concat(t.type),l=t.type===s;return(0,r.jsxs)("div",{className:"w-full bg-gray-200 rounded-m",children:[(0,r.jsx)("input",{type:"radio",checked:l,name:m,id:n,value:t.type,disabled:d,onChange:function(e){p(e.target.value)},className:"sr-only opacity-0 absolute"}),(0,r.jsxs)("label",{htmlFor:n,className:(0,i.A)("flex gap-2.5 m-[1px] items-start space-x-3 p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":l,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!l,"opacity-50 cursor-not-allowed":d}),children:[(0,r.jsx)("div",{className:"flex-shrink-0 mt-1",children:(0,r.jsx)("div",{className:(0,i.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":l,"border-gray-300 bg-white":!l}),children:l&&(0,r.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,r.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(o.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,r.jsx)("h5",{className:(0,i.A)("text-base font-medium transition-colors text-gray-900"),children:t.label})]}),t.description&&t.description.length>1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,r.jsx)("p",{className:(0,i.A)("text-sm transition-colors truncate",{"text-gray-600":l,"text-gray-500":!l}),children:t.description})]})]})]})]},n)})})});s.displayName="RadioButtonsInput";const l=s},86274:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(61626),a=n(70802),i=n(78280),o=n(3663),s=n(21587),l=n(84400),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},u=function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}l((r=r.apply(e,t||[])).next())})},d=function(e,t){var n,r,a,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const f=function(){var e,t,n=(0,a.jE)(),f=(0,l.A)().isLicenseValid,p=(0,r.I)({queryKey:["settings_fields"],queryFn:function(){return u(void 0,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,(0,o.ww)()];case 1:return e=t.sent(),console.log(e),[2,e.fields]}})})},staleTime:3e5,initialData:null===(e=window.burst_settings)||void 0===e?void 0:e.fields,retry:0,select:function(e){return function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0)}}),b=(0,i.n)({mutationFn:function(e){return u(void 0,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,(0,o.Ey)(e)];case 1:return t.sent(),[4,n.invalidateQueries({queryKey:["settings_fields"]})];case 2:return t.sent(),[2]}})})},onSuccess:function(){s.oR.success("Settings saved")}}),h=b.mutateAsync,m=b.isPending;return{settings:(t=p.data,void 0===t||t.forEach(function(e){e.pro&&f&&Object.assign(e,e.pro)}),t),saveSettings:h,getValue:function(e){var t,n;return null===(n=null===(t=p.data)||void 0===t?void 0:t.find(function(t){return t.id===e}))||void 0===n?void 0:n.value},addNotice:function(e,t,r,a){n.setQueryData(["settings_fields"],function(n){return n?n.map(function(n){if(n.id!==e)return n;var i={title:a,label:t,description:r};return c(c({},n),{notice:i})}):n})},setValue:function(e,t){if(p.data){var n=p.data.find(function(t){return t.id===e});n&&(n.value=t)}},isSavingSettings:m,invalidateSettings:function(){return n.invalidateQueries({queryKey:["settings_fields"]})}}}},91788:(e,t,n)=>{n.d(t,{Ad:()=>F,BM:()=>x,Ee:()=>O,Iq:()=>k,Nj:()=>v,YP:()=>I,ZV:()=>_,cA:()=>C,cf:()=>P,fU:()=>w,fs:()=>y,gs:()=>m,ii:()=>S,oI:()=>g,qQ:()=>N,vd:()=>j});var r=n(38443),a=n(71109),i=n(18553),o=n(44184),s=n(67201),l=n(73177),c=n(52368),u=n(89717),d=n(48145),f=n(72442),p=n(6374),b=n(58357),h=n(27723),m=function(e,t){if(void 0===t&&(t=new Date),"number"==typeof e&&(e=new Date(1e3*e)),!(e instanceof Date))return"-";var n={year:31536e6,month:2628e6,day:864e5,hour:36e5,minute:6e4,second:1e3},r=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),a=e-t;for(var i in n)if(Math.abs(a)>n[i]||"second"===i)return r.format(Math.round(a/n[i]),i)},v=function(e,t,n){void 0===n&&(n=!0);var r=(e=Number(e))/(t=Number(t));return isNaN(r)&&(r=0),n?new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1}).format(r):r};function y(e,t){var n={},r=((e=Number(e))-(t=Number(t)))/t;return isNaN(r)&&(r=0),n.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(r),n.status=0<r?"positive":"negative",r===1/0&&(n.val="",n.status="positive"),n}function g(e,t){var n={},r=((e=Number(e))-(t=Number(t)))/100;return isNaN(r)&&(r=0),n.val=new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:1,signDisplay:"exceptZero"}).format(r),n.status=0<r?"positive":"negative",r===1/0&&(n.val="",n.status="positive"),n}var x=function(e){return(0,r.dateI18n)(burst_settings.date_format,new Date(1e3*e))},j=function(e){return e&&("number"==typeof e||Date.parse(e)>=16409952e5)};function w(e){void 0===e&&(e=0);var t=Number(e);isNaN(t)&&(t=0);var n=Math.floor(t/1e3),r=Math.floor(n/3600),a=Math.floor((n-3600*r)/60),i=n-3600*r-60*a,o=function(e){return isNaN(e)?"00":String(e).padStart(2,"0")};return 0===r?[a,i].map(o).join(":"):[r,a,i].map(o).join(":")}function _(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),e<1e3&&(t=0),new Intl.NumberFormat(void 0,{style:"decimal",notation:"compact",compactDisplay:"short",maximumFractionDigits:t}).format(e)}function O(e,t){return void 0===t&&(t=1),e=Number(e),isNaN(e)&&(e=0),0===e?"0%":e>0&&e<.1?"<0.1%":new Intl.NumberFormat(void 0,{style:"percent",maximumFractionDigits:t}).format(e/100)}function N(e){return e?burst_settings.countries[e.toUpperCase()]||(0,h.__)("Not set","burst-statistics"):(0,h.__)("Unknown","burst-statistics")}function k(e){return e?burst_settings.continents[e.toUpperCase()]||(0,h.__)("Not set","burst-statistics"):(0,h.__)("Unknown","burst-statistics")}function S(e){void 0===e&&(e=new Date);var t=-60*e.getTimezoneOffset(),n=Math.floor(e.getTime()/1e3)+3600*burst_settings.gmt_offset-t;return new Date(1e3*n)}var A=S(),C={today:{label:(0,h.__)("Today","burst-statistics"),range:function(){return{startDate:(0,f.default)(A),endDate:(0,s.default)(A)}}},yesterday:{label:(0,h.__)("Yesterday","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(A,-1)),endDate:(0,s.default)((0,a.default)(A,-1))}}},"last-7-days":{label:(0,h.__)("Last 7 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(A,-7)),endDate:(0,s.default)((0,a.default)(A,-1))}}},"last-30-days":{label:(0,h.__)("Last 30 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(A,-30)),endDate:(0,s.default)((0,a.default)(A,-1))}}},"last-90-days":{label:(0,h.__)("Last 90 days","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(A,-90)),endDate:(0,s.default)((0,a.default)(A,-1))}}},"last-month":{label:(0,h.__)("Last month","burst-statistics"),range:function(){return{startDate:(0,p.default)((0,i.default)(A,-1)),endDate:(0,l.default)((0,i.default)(A,-1))}}},"week-to-date":{label:(0,h.__)("Week to date","burst-statistics"),range:function(){return{startDate:(0,f.default)((0,a.default)(A,-A.getDay())),endDate:(0,s.default)(A)}}},"month-to-date":{label:(0,h.__)("Month to date","burst-statistics"),range:function(){return{startDate:(0,p.default)(A),endDate:(0,s.default)(A)}}},"year-to-date":{label:(0,h.__)("Year to date","burst-statistics"),range:function(){return{startDate:(0,b.A)(A),endDate:(0,s.default)(A)}}},"last-year":{label:(0,h.__)("Last year","burst-statistics"),range:function(){return{startDate:(0,b.A)((0,o.default)(A,-1)),endDate:(0,c.A)((0,o.default)(A,-1))}}}},P=function(e){return Object.values(e).filter(Boolean).map(function(e){var t=C[e];return t.isSelected=D,t})},I=function(e,t){var n="MMMM d, yyyy";return{startDate:e?(0,u.default)(new Date(e),n):"",endDate:t?(0,u.default)(new Date(t),n):""}};function D(e){var t=this.range();return(0,d.default)(e.startDate,t.startDate)&&(0,d.default)(e.endDate,t.endDate)}function F(e,t){if(void 0===t&&(t={}),!e||!t[e])return function(e){return _(e)};var n=t[e],r=n.isPercentage,a=n.isTime,i=n.precision,o=n.suffix;return function(e){if(null==e)return"";if(r)return O(e,i);if(a)return w(e);var t=_(e,i);return o&&(t+=o),t}}},94304:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(91637),a=n(51609),i=n.n(a),o=n(42617),s=n(2573),l=n(22385),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)};const u=i().forwardRef(function(e,t){var n,a=e.value,i=e.onChange,s=e.options,c=(void 0===(n=void 0===s?[]:s)&&(n=[]),Array.isArray(n)?n:Object.entries(n).map(function(e){var t=e[0],n=e[1];return{value:t,label:String(n)}}));return(0,r.jsxs)(o.bL,{value:a,onValueChange:function(e){return i(e)},children:[(0,r.jsxs)(o.l9,{ref:t,className:"inline-flex items-center justify-center gap-1 rounded bg-white text-base leading-none outline outline-gray-400 px-2 py-2 hover:bg-gray-100 focus:shadow-[0_0_0_2px]",children:[(0,r.jsx)(o.WT,{placeholder:"Select an option…"}),(0,r.jsx)(o.In,{className:"text-base",children:(0,r.jsx)(l.A,{name:"chevron-down",color:"black",size:16,tooltip:"",onClick:function(){},className:""})})]}),(0,r.jsxs)(o.UC,{className:"bg-gray-100 text-black border border-gray-400 rounded-md shadow-lg ring-1 ring-black/5 overflow-hidden z-10 shadow-gray-400/50",position:"item-aligned",children:[(0,r.jsx)(o.PP,{className:"",children:(0,r.jsx)(l.A,{name:"chevron-up",color:"black",size:16,tooltip:"",onClick:function(){},className:""})}),(0,r.jsx)(o.LM,{className:"",children:c.map(function(e){return(0,r.jsx)(d,{value:e.value,children:e.label},e.value)})}),(0,r.jsx)(o.wn,{className:"text-base",children:(0,r.jsx)(l.A,{name:"chevron-down",color:"white",size:16,tooltip:"",onClick:function(){},className:""})})]})]})});var d=i().forwardRef(function(e,t){var n=e.children,a=e.className,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["children","className"]);return(0,r.jsxs)(o.q7,c({ref:t,className:(0,s.$)("cursor-default px-2 py-2 text-base select-none flex items-center gap-1 flex-row overflow-hidden","hover:bg-gray-300 hover:text-black","focus:bg-gray-300","transition-all duration-200",a)},i,{children:[(0,r.jsx)("div",{className:"w-4 flex items-center",children:(0,r.jsx)(o.VF,{children:(0,r.jsx)(l.A,{name:"check",color:"black",size:16,tooltip:"",onClick:function(){},className:""})})}),(0,r.jsx)(o.p4,{children:n}),(0,r.jsx)("div",{className:"w-4 flex items-center"})]}))})},94976:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(91637),a=n(51609),i=n(34677),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o.apply(this,arguments)},s=(0,a.forwardRef)(function(e,t){var n=e.value,a=e.onChange,s=e.disabled,l=e.required,c=e.size,u=void 0===c?"default":c,d=e.className,f=void 0===d?"":d,p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(e,["value","onChange","disabled","required","size","className"]),b="string"==typeof n?"1"===n:Boolean(n),h="small"===u?"w-8 h-5":"w-10 h-6",m="small"===u?"w-3 h-3 translate-x-1 data-[state=checked]:translate-x-4":"w-4 h-4 translate-x-1 data-[state=checked]:translate-x-5";return(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(i.bL,o({ref:t,className:"".concat(h," bg-gray-400 rounded-full relative focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed data-[state=checked]:bg-primary ").concat(f),checked:b,onCheckedChange:a,disabled:s,required:l},p,{children:(0,r.jsx)(i.zi,{className:"block ".concat(m," bg-white rounded-full shadow transform transition-transform duration-200")})}))})});s.displayName="SwitchInput";const l=s},98371:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(91637),a=n(85373),i=n(22385);const o=function(e){var t=e.title,n=e.subtitle,o=void 0===n?"":n,s=e.customHeader,l=void 0===s?null:s,c=e.content,u=e.footer,d=e.triggerClassName,f=e.children,p=e.isOpen,b=e.onClose;return(0,r.jsxs)(a.bL,{open:p,onOpenChange:function(e){e||null==b||b()},children:[d&&(0,r.jsx)(a.l9,{className:d,children:f}),(0,r.jsxs)(a.ZL,{container:document.getElementById("modal-root"),children:[(0,r.jsx)(a.hJ,{className:"bg-black/50 fixed inset-0 z-50"}),(0,r.jsxs)(a.UC,{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full max-w-[720px] max-h-[90vh] m-3 px-4 py-3 rounded-md z-50 bg-gray-100 shadow-md focus:outline-none data-[state=open]:animate-contentShow flex flex-col overflow-x-visible",children:[(0,r.jsx)("div",{className:"flex flex-row justify-between items-center flex-shrink-0",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex-1",children:l}),(0,r.jsx)(a.bm,{asChild:!0,children:(0,r.jsx)("button",{"aria-label":"Close",onClick:b,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150 ml-4",children:(0,r.jsx)(i.A,{name:"times",size:18,color:"gray"})})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.hE,{className:"text-lg font-semibold text-black",children:t}),o&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:o})]}),(0,r.jsx)(a.bm,{asChild:!0,children:(0,r.jsx)("button",{"aria-label":"Close",onClick:b,className:"bg-gray-200 rounded-full p-2 w-8 h-8 cursor-pointer hover:bg-gray-300 transition-colors duration-150",children:(0,r.jsx)(i.A,{name:"times",size:18,color:"gray"})})})]})}),(0,r.jsx)(a.VY,{className:"text-base text-black mb-6 mt-4 flex-1 overflow-y-auto overflow-x-visible min-h-0",children:c}),u&&(0,r.jsx)("div",{className:"flex flex-row justify-end gap-2 flex-shrink-0 bottom-0 bg-gray-100 pt-4 border-t border-gray-200 mx-4 px-4",children:u})]})]})]})}}}]);