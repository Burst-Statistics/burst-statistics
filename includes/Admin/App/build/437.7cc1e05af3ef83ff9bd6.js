"use strict";(self.webpackChunk_burst_statistics_burst_statistics=self.webpackChunk_burst_statistics_burst_statistics||[]).push([[437],{30733(e,t,r){r.d(t,{z:()=>K});var s=r(10790),n=r(95955),a=r(44488),i=r(86087),o=r(27723),l=r(30533),c=r(51367),u=r(77363),d=r(28811),f=r(21587),p=r(88511),b=r(21201),m=r(3879),h=r(78802),g=r(80076),x=r(56823),y=r(6987),v=r(92745),_=r(85944),j=r(61885),w=r(86870),k=r(63557),N=r(80762),A=r(717),C=(r(51609),function(){return C=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},C.apply(this,arguments)}),O=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})},S=function(e,t){var r,s,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}},D=function(e,t,r){if(r||2===arguments.length)for(var s,n=0,a=t.length;n<a;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},E=[{value:"24h",label:(0,o.__)("24 hours","burst-statistics")},{value:"7d",label:(0,o.__)("7 days","burst-statistics")},{value:"30d",label:(0,o.__)("30 days","burst-statistics")},{value:"never",label:(0,o.__)("Never","burst-statistics")}],F={can_change_date:!1,can_filter:!1},R={can_change_date:(0,o.__)("Change date range","burst-statistics"),can_filter:(0,o.__)("Change filters","burst-statistics")},z=function(e){var t=(Array.isArray(burst_settings.menu)?burst_settings.menu:Object.values(burst_settings.menu||{})).find(function(t){return t.id===e});return(null==t?void 0:t.title)||e},I=function(e){if(0===e)return(0,o.__)("Never expires","burst-statistics");var t=e-Date.now()/1e3;if(0>t)return(0,o.__)("Expired","burst-statistics");var r=Math.floor(t/86400),s=Math.floor(t%86400/3600);return 0<r?1===r?(0,o.__)("Expires in 1 day","burst-statistics"):
// translators: %d is the number of days.
// translators: %d is the number of days.
(0,o.__)("Expires in ".concat(r," days"),"burst-statistics"):0<s?1===s?(0,o.__)("Expires in 1 hour","burst-statistics"):
// translators: %d is the number of hours.
// translators: %d is the number of hours.
(0,o.__)("Expires in ".concat(s," hours"),"burst-statistics"):(0,o.__)("Expires soon","burst-statistics")},L=function(e){var t=e.currentTab,r=e.startDate,n=e.endDate,a=e.filters,l=(0,i.useMemo)(function(){return Object.entries(a||{}).filter(function(e){var t=e[1];return t&&""!==t}).map(function(e){var t,r=e[0],s=e[1];return{key:r,label:(null===(t=j.OF[r])||void 0===t?void 0:t.label)||r,value:s}})},[a]),c=r&&n,u=0<l.length;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-md font-medium text-black",children:(0,o.__)("What you're sharing:","burst-statistics")}),(0,s.jsxs)("dl",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-sm",children:[(0,s.jsx)("dt",{className:"font-base text-gray",children:(0,o.__)("Initial tab:","burst-statistics")}),(0,s.jsx)("dd",{className:"font-medium text-black",children:z(t)}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("dt",{className:"font-base text-gray",children:(0,o.__)("Date range:","burst-statistics")}),(0,s.jsxs)("dd",{className:"font-medium text-black",children:[(0,w.kz)(r)," – ",(0,w.kz)(n)]})]}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("dt",{className:"font-base text-gray",children:(0,o.sprintf)((0,o._n)("Filter:","Filters:",l.length,"burst-statistics"))}),(0,s.jsx)("dd",{className:"font-medium text-black",children:l.map(function(e,t){return 0===t?(0,s.jsx)("span",{children:(0,i.createInterpolateElement)((0,o.sprintf)(/* translators: 1: filter label, 2: filter value */ /* translators: 1: filter label, 2: filter value */
(0,o.__)("%1$s is %2$s","burst-statistics"),"<strong>"+e.label+"</strong>","<em>"+e.value+"</em>"),{strong:(0,s.jsx)("span",{className:"font-medium text-black"}),em:(0,s.jsx)("span",{className:"font-light text-gray"})})},e.key):(0,s.jsx)("span",{children:(0,i.createInterpolateElement)((0,o.sprintf)(/* translators: 1: filter label, 2: filter value */ /* translators: 1: filter label, 2: filter value */
(0,o.__)(" and %1$s is %2$s","burst-statistics"),"<strong>"+e.label+"</strong>","<em>"+e.value+"</em>"),{strong:(0,s.jsx)("span",{className:"font-medium text-black"}),em:(0,s.jsx)("span",{className:"font-light text-gray"})})},e.key)})})]})]})]})},P=function(e){var t,r=e.isOpen,n=e.onToggle,a=e.permissions,i=e.onPermissionToggle,u=e.sharedTabs,d=e.onTabToggle,f=e.shareableTabs,b=e.currentTab,m=(0,(0,p.A)().isLicenseValidFor)("share-link-advanced");return(0,s.jsxs)("div",{className:"border-t border-gray-200 -mx-4 px-4 pt-3",children:[(0,s.jsxs)("button",{type:"button",onClick:n,className:"flex w-full items-center gap-2 text-left text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:[(0,s.jsx)(v.A,{name:"chevron-right",size:14,className:"text-gray-700 transition-transform duration-200 ".concat(r?"rotate-90":"")}),(0,s.jsx)("span",{children:(0,o.__)("Advanced options","burst-statistics")}),(0,s.jsx)(A.A,{label:(null===(t=window.burst_settings)||void 0===t?void 0:t.is_pro)?"Agency":"Pro",id:"share-link-advanced"})]}),(0,s.jsx)(l.N,{children:r&&(0,s.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,s.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:(0,o.__)("Allow viewer to:","burst-statistics")}),(0,s.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:Object.entries(R).map(function(e){var t=e[0],r=e[1];return(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm ".concat(m?"cursor-pointer":"cursor-default"),children:[(0,s.jsx)("input",{disabled:!m,type:"checkbox",checked:a[t]||!1,onChange:function(){return i(t)},className:"rounded border-gray-400 text-wp-blue focus:ring-wp-blue cursor-pointer disabled:cursor-default disabled:opacity-60"}),(0,s.jsx)("span",{className:m?"text-gray":"text-gray-500",children:r})]},t)})})]}),1<f.length&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:(0,o.__)("Allow access to these tabs:","burst-statistics")}),(0,s.jsx)("div",{className:"flex flex-wrap gap-x-6 gap-y-2",children:f.map(function(e){var t=e.id===b,r=!m||t,n=u.includes(e.id);return(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm ".concat(r?"cursor-default":"cursor-pointer"),children:[(0,s.jsx)("input",{type:"checkbox",checked:n,onChange:function(){return d(e.id)},disabled:r,className:"rounded border-gray-400 text-wp-blue focus:ring-wp-blue cursor-pointer disabled:cursor-default disabled:opacity-60"}),(0,s.jsxs)("span",{className:r?"text-gray-500":"text-gray",children:[e.title,t&&(0,s.jsxs)("span",{className:"ml-1 text-xs text-gray-400",children:["(",(0,o.__)("current view","burst-statistics"),")"]})]})]},e.id)})})]})]})})})]})},M=function(e){var t=e.link,r=e.copiedId,n=e.onCopy,a=e.onRevoke,l=e.isRevoking,u=r===t.token,d=(0,i.useMemo)(function(){return t.shared_tabs&&0!==t.shared_tabs.length?t.shared_tabs.map(function(e){return z(e)}):[]},[t.shared_tabs]),f=(0,i.useMemo)(function(){var e,r,s=null==t?void 0:t.initial_state;return(null===(e=null==s?void 0:s.date_range)||void 0===e?void 0:e.start)&&(null===(r=null==s?void 0:s.date_range)||void 0===r?void 0:r.end)?"".concat((0,w.kz)(s.date_range.start)," – ").concat((0,w.kz)(s.date_range.end)):null},[t]),p=(0,i.useMemo)(function(){var e=null==t?void 0:t.initial_state;return(null==e?void 0:e.filters)?Object.entries(e.filters).filter(function(e){var t=e[1];return t&&""!==t}).map(function(e){var t,r=e[0],s=e[1];return{key:r,label:(null===(t=j.OF[r])||void 0===t?void 0:t.label)||r,value:s}}):[]},[t]),b=(0,i.useMemo)(function(){return(e=t.permissions)?Object.entries(e).filter(function(e){return e[1]}).map(function(e){var t=e[0];return R[t]}).filter(Boolean):[];var e},[t.permissions]);return(0,s.jsx)(c.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"rounded-md border p-3 ".concat(u?"border-green bg-green-50":"border-gray-200 bg-white"," transition-colors duration-200"),children:(0,s.jsxs)("div",{className:"flex gap-2 mb-2 flex-col",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-1.5",children:[(0,s.jsx)("span",{className:"text-base font-medium text-gray-700",children:new Intl.ListFormat(void 0,{style:"long"}).format(d)}),f&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-light text-gray-800",children:[(0,s.jsx)(v.A,{name:"calendar",size:10}),f]}),(0,s.jsx)("span",{className:"ml-auto text-xs text-gray-600",children:I(t.expires)})]}),(0,s.jsxs)("div",{className:"flex gap-1.5",children:[(0,s.jsx)("input",{type:"text",readOnly:!0,title:t.url,value:t.url,onClick:function(e){return e.target.select()},className:"max-w-full truncate text-sm text-gray-800 font-mono w-full bg-gray-50 px-2 py-1.5 rounded border border-gray-300 cursor-text focus:border-wp-blue focus:ring-1 focus:ring-wp-blue/20"}),(0,s.jsx)(_.A,{content:u?(0,o.__)("Copied!","burst-statistics"):(0,o.__)("Copy link","burst-statistics"),children:(0,s.jsx)("button",{onClick:function(){return n(t)},className:"rounded p-1 text-gray-400 transition-colors hover:bg-gray-200 hover:text-gray-600",children:u?(0,s.jsx)(v.A,{name:"check",size:14,color:"green"}):(0,s.jsx)(v.A,{name:"copy",size:14})})}),(0,s.jsx)(_.A,{content:(0,o.__)("Revoke","burst-statistics"),children:(0,s.jsx)("button",{onClick:function(){return a(t.token)},disabled:l,className:"rounded p-1 text-gray-400 transition-colors hover:bg-red-50 hover:text-red disabled:opacity-50",children:(0,s.jsx)(v.A,{name:"times",size:14})})})]}),0<p.length||0<b.length&&(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[p.map(function(e){return(0,s.jsx)(_.A,{content:"".concat(e.label,": ").concat(e.value),children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-gray-100 border border-gray-300 px-1.5 py-0.5 text-xs font-light text-gray-800",children:[(0,s.jsx)(v.A,{name:"filter",size:10}),e.label]})},e.key)}),b.map(function(e){return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 rounded bg-gray-100 border border-gray-300 px-1.5 py-0.5 text-xs font-light text-gray-800",children:[(0,s.jsx)(v.A,{name:"check",size:10}),e]},e)})]})]})})},T=function(e){var t=e.isOpen,r=e.onToggle,n=e.links,a=e.isLoading,i=e.copiedId,u=e.onCopy,d=e.onRevoke,f=e.isRevoking,p=n.length;return a||0!==p?(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:[(0,s.jsxs)("button",{type:"button",onClick:r,className:"flex w-full items-center gap-2 text-left text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors",children:[(0,s.jsx)(v.A,{name:"chevron-right",size:14,className:"text-gray-600 transition-transform duration-200 ".concat(t?"rotate-90":"")}),(0,s.jsxs)("span",{children:[(0,o.__)("Active shared links","burst-statistics"),!a&&0<p&&(0,s.jsxs)("span",{className:"ml-1.5 text-gray-500",children:["(",p,")"]})]})]}),(0,s.jsx)(l.N,{children:t&&(0,s.jsx)(c.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:(0,s.jsx)("div",{className:"pt-3 space-y-2",children:a?(0,s.jsx)("p",{className:"text-sm text-gray-500 py-2",children:(0,o.__)("Loading…","burst-statistics")}):(0,s.jsx)(l.N,{children:n.map(function(e){return(0,s.jsx)(M,{link:e,copiedId:i,onCopy:u,onRevoke:d,isRevoking:f},e.token)})})})})})]}):null},V=function(){var e=(0,u.z)(),t=(0,b.A)(),r=t.startDate,n=t.endDate,a=(0,m.R7)("url").filters,l=(0,i.useMemo)(function(){return e.pathname.replace(/^\//,"").split("/")[0]||"dashboard"},[e.pathname]),c=(0,i.useMemo)(function(){return(Array.isArray(burst_settings.menu)?burst_settings.menu:Object.values(burst_settings.menu||{})).filter(function(e){return e.shareable}).map(function(e){return{id:e.id,title:e.title}})},[]),p=(0,i.useState)(!1),v=p[0],_=p[1],j=(0,i.useState)("24h"),w=j[0],A=j[1],R=(0,i.useState)(F),z=R[0],I=R[1],M=(0,i.useState)(!1),V=M[0],B=M[1],K=(0,i.useState)(!1),$=K[0],G=K[1],U=(0,i.useState)([]),W=U[0],Z=U[1];(0,i.useEffect)(function(){if(v){var e=c.map(function(e){return e.id});e.includes(l)?Z([l]):0<e.length&&Z([e[0]])}},[v,l,c]);var q=(0,i.useState)([]),H=q[0],Q=q[1],Y=(0,i.useState)(!1),J=Y[0],X=Y[1],ee=(0,i.useState)(!1),te=ee[0],re=ee[1],se=(0,i.useState)(!1),ne=se[0],ae=se[1],ie=(0,i.useState)(null),oe=ie[0],le=ie[1],ce=(0,k.A)(function(e){return e.isShareableLinkViewer}),ue=(0,i.useCallback)(function(e){I(function(t){var r;return C(C({},t),((r={})[e]=!t[e],r))})},[]),de=(0,i.useCallback)(function(e){e!==l&&Z(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):D(D([],t,!0),[e],!1)})},[l]),fe=(0,i.useCallback)(function(){return O(void 0,void 0,void 0,function(){var e,t;return S(this,function(r){switch(r.label){case 0:X(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(0,d.Eo)("get_share_links")];case 2:return e=r.sent(),Q(e.share_links||[]),[3,5];case 3:return t=r.sent(),console.error("Failed to fetch share links:",t),[3,5];case 4:return X(!1),[7];case 5:return[2]}})})},[]);(0,i.useEffect)(function(){v&&fe()},[v,fe]);var pe=(0,i.useCallback)(function(){_(!1),le(null),B(!1),G(!1),I(F)},[]),be=(0,i.useCallback)(function(){return O(void 0,void 0,void 0,function(){var e,t,s,i,l,c;return S(this,function(u){switch(u.label){case 0:re(!0),u.label=1;case 1:return u.trys.push([1,5,6,7]),e=window.location.href,t=e.replace(/wp-admin\/admin\.php\?page=burst/,"burst-dashboard"),s={date_range:{start:r||"",end:n||""},filters:{}},a&&Object.entries(a).forEach(function(e){var t=e[0],r=e[1];r&&""!==r&&(s.filters[t]=r)}),[4,(0,d.Eo)("get_share_token",{expiration:w,view_url:t,permissions:z,shared_tabs:W,initial_state:s})];case 2:return(i=u.sent()).share_token&&i.share_url?(l=i.share_url,[4,(0,N.l)(l)]):(f.oR.error((0,o.__)("Failed to generate share link","burst-statistics")),[2]);case 3:return u.sent(),[4,fe()];case 4:return u.sent(),G(!0),le(i.share_token),f.oR.success((0,o.__)("Link created and copied to clipboard!","burst-statistics")),setTimeout(function(){return le(null)},3e3),[3,7];case 5:return c=u.sent(),console.error("Failed to generate share link:",c),f.oR.error((0,o.__)("Failed to generate share link","burst-statistics")),[3,7];case 6:return re(!1),[7];case 7:return[2]}})})},[w,z,W,r,n,a,fe]),me=(0,i.useCallback)(function(e){return O(void 0,void 0,void 0,function(){var t;return S(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,N.l)(e.url)];case 1:return r.sent(),le(e.token),f.oR.success((0,o.__)("Link copied!","burst-statistics")),setTimeout(function(){return le(null)},2e3),[3,3];case 2:return t=r.sent(),console.error("Failed to copy link:",t),f.oR.error((0,o.__)("Failed to copy link","burst-statistics")),[3,3];case 3:return[2]}})})},[]),he=(0,i.useCallback)(function(e){return O(void 0,void 0,void 0,function(){var t,r;return S(this,function(s){switch(s.label){case 0:ae(!0),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,(0,d.Eo)("revoke_share_link",{token:e})];case 2:return(t=s.sent()).success&&(Q(t.share_links||[]),f.oR.success((0,o.__)("Link revoked","burst-statistics"))),[3,5];case 3:return r=s.sent(),console.error("Failed to revoke link:",r),f.oR.error((0,o.__)("Failed to revoke link","burst-statistics")),[3,5];case 4:return ae(!1),[7];case 5:return[2]}})})},[]);return ce?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.wk,{label:"",icon:"referrer",onClick:function(){return _(!0)}}),(0,s.jsx)(g.A,{isOpen:v,onClose:pe,title:(0,o.__)("Share dashboard","burst-statistics"),content:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray text-sm",children:(0,o.__)("Generate a private, shareable link to a live view of this dashboard.","burst-statistics")}),(0,s.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4 space-y-4",children:[(0,s.jsx)(L,{currentTab:l,startDate:r,endDate:n,filters:a}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-base font-medium text-gray-800",children:(0,o.__)("Link expires in:","burst-statistics")}),(0,s.jsx)(x.A,{value:w,onChange:A,options:E})]}),(0,s.jsx)(P,{isOpen:V,onToggle:function(){return B(function(e){return!e})},permissions:z,onPermissionToggle:ue,sharedTabs:W,onTabToggle:de,shareableTabs:c,currentTab:l}),(0,s.jsx)(y.A,{onClick:be,disabled:te,btnVariant:"primary",className:"w-full justify-center",children:te?(0,o.__)("Generating…","burst-statistics"):(0,o.__)("Generate shareable link","burst-statistics")})]}),(0,s.jsx)(T,{isOpen:$,onToggle:function(){return G(function(e){return!e})},links:H,isLoading:J,copiedId:oe,onCopy:me,onRevoke:he,isRevoking:ne})]})})]})},B=r(13521),K=function(){return(0,s.jsxs)("div",{className:"col-span-12 flex justify-between items-center flex-wrap gap-y-2",children:[(0,s.jsx)(B.A,{children:(0,s.jsx)(n.y,{})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(B.A,{children:(0,s.jsx)(a.A,{})}),(0,s.jsx)(B.A,{children:(0,s.jsx)(V,{})})]})]})}},78802(e,t,r){r.d(t,{wk:()=>b,B:()=>u});var s=r(10790),n=r(2573),a=r(92745),i=r(82529),o=r(27723);const l=function(e){var t=e.filter,r=e.onRemove,l=e.onClick,c=e.className,u=void 0===c?"":c,d=e.showRemoveButton,f=void 0===d||d,p=e.disabled,b=void 0!==p&&p,m=e.smallLabels,h=void 0!==m&&m,g=(0,n.$)("inline-flex items-center gap-2 border shadow-sm rounded-md transition-all duration-200",{"px-2 py-1 text-xs":h,"px-3 py-2 text-sm":!h},{"bg-gray-100 border-gray-200 cursor-not-allowed opacity-60":b,"bg-white border-gray-300 hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)] cursor-pointer":!b},u),x=function(e){b||e.target.closest(".remove-button")||l&&l(t)};return t&&t.config?t.key?(0,s.jsxs)("div",{className:g,onClick:x,onKeyDown:function(e){b||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),x(e))},role:"button",tabIndex:b?-1:0,"aria-label":(0,o.__)("Edit %s filter","burst-statistics").replace("%s",t.config.label),"aria-disabled":b,title:b?"":(0,o.__)("Click to edit filter","burst-statistics"),children:[(0,s.jsx)(a.A,{name:t.config.icon,size:h?14:16}),(0,s.jsx)("p",{className:(0,n.$)("font-medium",{"text-gray-800":b}),children:t.config.label}),(0,s.jsx)("span",{className:(0,n.$)("w-px",h?"h-3":"h-4",b?"bg-gray-300":"bg-gray-400")}),(0,s.jsx)("p",{className:(0,n.$)({"text-gray-800":b,"text-gray":!b}),children:(0,i.S)(t.displayValue)}),f&&r&&!b&&(0,s.jsx)("button",{onClick:function(e){b?e.stopPropagation():r&&r(t.key)},disabled:b,className:(0,n.$)("remove-button rounded-full transition-colors",h?"p-0.5":"p-1",{"cursor-not-allowed opacity-50":b,"hover:bg-gray-200":!b}),"aria-label":(0,o.__)("Remove filter","burst-statistics"),title:b?"":(0,o.__)("Remove filter","burst-statistics"),children:(0,s.jsx)(a.A,{name:"times",color:b?"var(--rsp-grey-300)":"var(--rsp-grey-500)",size:h?14:16})})]}):null:(localStorage.removeItem("burst-filters-storage"),null)};var c=r(63557);const u=function(e){var t=e.filters,r=void 0===t?[]:t,n=e.onRemove,a=e.onClick,i=e.className,o=void 0===i?"flex flex-wrap gap-2":i,u=e.showRemoveButton,d=void 0===u||u,f=e.emptyMessage,p=void 0===f?null:f,b=e.isReport,m=void 0!==b&&b,h=e.smallLabels,g=void 0!==h&&h,x=(0,c.A)(function(e){return e.userCanFilter});return Array.isArray(r)&&0!==r.length||p?0===r.length&&p?(0,s.jsx)("div",{className:"text-gray-500 text-sm",children:p}):(0,s.jsx)("div",{className:o,children:r.map(function(e){return(0,s.jsx)(l,{disabled:m||!x,filter:e,onRemove:n,onClick:a,showRemoveButton:d,smallLabels:g},e.key)})}):null};var d=function(){return d=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},d.apply(this,arguments)},f=function(e){var t=e.onClick,r=e.icon,i=e.iconSize,o=void 0===i?16:i,l=e.label,c=e.variant,u=void 0===c?"default":c,f=e.size,p=void 0===f?"md":f,b=e.disabled,m=void 0!==b&&b,h=e.className,g=void 0===h?"":h,x=e.ariaLabel,y=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["onClick","icon","iconSize","label","variant","size","disabled","className","ariaLabel"]),v=(0,n.$)("inline-flex items-center gap-2 rounded-md transition-all duration-200 cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-2",{"bg-transparent border border-transparent hover:bg-gray-50":"default"===u,"bg-white border border-gray-300 border-dashed shadow-sm hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]":"dashed"===u,"bg-gray-100 border border-gray-300 hover:bg-gray-200":"solid"===u},{"py-1 px-2 text-xs":"sm"===p,"py-2 px-3 text-sm":"md"===p,"py-3 px-4 text-base":"lg"===p},{"opacity-50 cursor-not-allowed focus:ring-0 focus:ring-offset-0":m},g),_=Object.fromEntries(Object.entries({"aria-label":x||l,"aria-disabled":!!m||void 0}).filter(function(e){return e[0],void 0!==e[1]}));return(0,s.jsxs)("button",d({type:y.type||"button",onClick:t,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||!t||m||(e.preventDefault(),t(e)),y.onKeyDown&&y.onKeyDown(e)},className:v,disabled:m},_,y,{children:[r&&(0,s.jsx)(a.A,{name:r,size:o}),l&&(0,s.jsx)("span",{className:"font-medium text-base",children:l})]}))};f.displayName="IconButton";const p=f,b=function(e){var t=e.onClick,r=e.className,n=void 0===r?"":r,a=e.icon,i=void 0===a?"plus":a,l=e.label,c=void 0===l?(0,o.__)("Add filter","burst-statistics"):l,u=e.smallLabels,d=void 0!==u&&u;return(0,s.jsx)(p,{variant:"dashed",icon:i,label:c,onClick:t,className:n,ariaLabel:c,size:d?"sm":"md"})}},95955(e,t,r){r.d(t,{y:()=>B});var s=r(10790),n=r(51609),a=r.n(n),i=r(84790),o=r(78802),l=r(27723),c=r(80076),u=r(2573),d=r(92745),f=r(717),p=r(3879),b=r(88511);const m=function(e){var t,r=e.filterKey,n=e.config,a=e.isActive,i=void 0!==a&&a,o=e.onClick,c=e.gridPosition,m=e.reportBlockIndex,h=(0,b.A)().isLicenseValid,g=(0,p.R7)(m),x=g.isFavorite,y=g.toggleFavorite,v=n.pro&&!h||n.coming_soon,_=x(r),j=function(e){e.stopPropagation(),e.preventDefault(),v||y(r)},w=function(){v||o()};return(0,s.jsxs)("div",{className:(0,u.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2",{"border-primary bg-primary-light":i,"border-gray-300 shadow-sm hover:border-gray-400":!i&&!v,"bg-gray-100 border-gray-200":v,"bg-gray-300 opacity-90":n.coming_soon}),role:c?"gridcell":void 0,"aria-posinset":null==c?void 0:c.position,"aria-setsize":null==c?void 0:c.total,children:[(0,s.jsx)("button",{onClick:w,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),w())},disabled:v,"aria-label":(t="".concat(n.label," filter"),i&&(t+=", ".concat((0,l.__)("currently active","burst-statistics"))),n.pro&&(t+=", ".concat((0,l.__)("Pro feature","burst-statistics"))),n.coming_soon&&(t+=", ".concat((0,l.__)("coming soon","burst-statistics"))),v&&(t+=", ".concat((0,l.__)("disabled","burst-statistics"))),t),"aria-pressed":i,className:(0,u.A)("w-full h-full absolute inset-0 rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"cursor-not-allowed":v,"cursor-pointer hover:bg-black hover:bg-opacity-5":!v}),tabIndex:v?-1:0}),(0,s.jsx)("div",{className:"absolute top-2 right-2 z-20 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200",children:(0,s.jsx)("button",{onClick:j,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),j(e))},disabled:v,className:(0,u.A)("p-1 rounded-full transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1","hover:bg-gray-200 active:bg-gray-300",{"text-yellow-500":_,"text-gray-400 hover:text-gray-600":!_,"cursor-not-allowed opacity-50":v}),"aria-label":_?(0,l.__)("Remove %s from favorites","burst-statistics").replace("%s",n.label):(0,l.__)("Add %s to favorites","burst-statistics").replace("%s",n.label),"aria-pressed":_,tabIndex:v?-1:0,children:(0,s.jsx)(d.A,{name:_?"star-filled":"star-outline",size:16,color:_?"yellow":"gray","aria-hidden":"true"})})}),i&&(0,s.jsx)("div",{className:"absolute top-2 left-2 z-10","aria-hidden":"true",children:(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-3 relative z-10 pointer-events-none",children:[(0,s.jsx)("div",{className:(0,u.A)("flex h-12 w-12 items-center justify-center rounded-lg",{"bg-gray-100":!i,"bg-primary-light":i}),"aria-hidden":"true",children:(0,s.jsx)(d.A,{name:n.icon,color:"gray",size:24,"aria-hidden":"true"})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:n.label}),n.pro&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(f.A,{label:(0,l.__)("Pro","burst-statistics")})}),n.coming_soon&&(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("span",{className:"inline-flex items-center rounded bg-blue-light px-2 py-0.5 text-xs font-medium text-gray",children:(0,l.__)("Coming soon","burst-statistics")})})]})]})]})};var h=r(67691),g=function(){return g=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},g.apply(this,arguments)};const x=function(e){var t=e.onSelectFilter,r=e.reportBlockIndex,a=(0,p.R7)(r),i=a.filtersConf,o=a.filterCategories,c=a.getActiveFilters,f=a.getFiltersByCategory,b=a.getFavoriteFilters,x=(0,h.A)().getValue,y=(0,n.useState)("favorites"),v=y[0],_=y[1],j=(0,n.useState)(""),w=j[0],k=j[1],N=(0,n.useState)({}),A=N[0],C=N[1],O=(0,n.useRef)(null),S=c(),D=f(),E=b(),F=x("filtering_by_domain");(0,n.useEffect)(function(){if(F)C(i);else{var e=Object.fromEntries(Object.entries(i).filter(function(e){return"host"!==e[0]}));C(e)}},[i,F]),(0,n.useEffect)(function(){O.current&&O.current.focus()},[]);var R=function(e,t,r){if(r||2===arguments.length)for(var s,n=0,a=t.length;n<a;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}([{key:"favorites",label:(0,l.__)("Favorites","burst-statistics"),icon:"star-outline"},{key:"all",label:(0,l.__)("All","burst-statistics"),icon:"grid"}],Object.entries(o).sort(function(e,t){var r=e[1],s=t[1];return r.order-s.order}).map(function(e){var t=e[0],r=e[1];return{key:t,label:r.label,icon:r.icon}}),!0),z=function(e){if(!e.trim())return null;var t=e.toLowerCase(),r=Object.entries(A).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return g({key:t},r)}),s=function(e){return e.label.toLowerCase().includes(t)||e.key.toLowerCase().includes(t)},n=[];"favorites"===v?n=E:"all"===v?n=r:v in D&&(n=D[v]||[]);var a=n.filter(s);return 0<a.length?{results:a,source:v,isFromCurrentTab:!0}:{results:r.filter(s),source:"all",isFromCurrentTab:!1}}(w),I=function(e,n){return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(d.A,{name:"empty",size:48,color:"gray"}),(0,s.jsx)("p",{className:"mt-2",children:w.trim()?(0,l.__)("No filters match your search.","burst-statistics"):"favorites"===v?(0,l.__)("No favorite filters yet. Pin filters to add them here.","burst-statistics"):"all"===v?(0,l.__)("No filters available.","burst-statistics"):(0,l.__)("No filters in this category.","burst-statistics")})]}):(0,s.jsxs)("div",{children:[n&&!n.isFromCurrentTab&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-blue-light border border-blue-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(d.A,{name:"help",size:16,color:"blue"}),(0,s.jsx)("span",{className:"text-sm text-blue-700",children:(0,l.__)("No results found in current tab. Showing results from all filters.","burst-statistics")})]})}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 justify-items-center",role:"grid","aria-label":(0,l.__)("Available filters","burst-statistics"),children:e.map(function(n,a){return(0,s.jsx)(m,{reportBlockIndex:r,filterKey:n.key,config:n,isActive:Object.prototype.hasOwnProperty.call(S,n.key),onClick:function(){return t(n.key,n)},gridPosition:{position:a+1,total:e.length}},n.key)})})]})};return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"filter-search",className:"sr-only",children:(0,l.__)("Search filters","burst-statistics")}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(d.A,{name:"search",size:16,className:"text-gray-400","aria-hidden":"true"})}),(0,s.jsx)("input",{id:"filter-search",type:"text",placeholder:(0,l.__)("Search filters…","burst-statistics"),value:w,onChange:function(e){return k(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary text-sm","aria-describedby":z?"search-results-info":void 0,ref:O}),w&&(0,s.jsx)("button",{onClick:function(){return k("")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-900","aria-label":(0,l.__)("Clear search","burst-statistics"),type:"button",children:(0,s.jsx)(d.A,{name:"times",size:16,"aria-hidden":"true"})})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto scrollbar-hide",role:"tablist","aria-label":(0,l.__)("Filter categories","burst-statistics"),children:R.map(function(e){return(0,s.jsxs)("button",{id:"tab-".concat(e.key),onClick:function(){return _(e.key)},role:"tab","aria-selected":v===e.key,"aria-controls":"tabpanel-".concat(e.key),className:(0,u.A)("flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap flex-shrink-0","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{"border-primary text-primary":v===e.key,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":v!==e.key}),children:[(0,s.jsx)("span",{className:(0,u.A)("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-primary-light text-white shadow-sm border-primary border-0.5":v===e.key,"bg-transparent":v!==e.key}),"aria-hidden":"true",children:(0,s.jsx)(d.A,{name:e.icon,size:16})}),(0,s.jsx)("span",{children:e.label})]},e.key)})})})}),(0,s.jsx)("div",{role:"tabpanel",id:"tabpanel-".concat(v),"aria-labelledby":"tab-".concat(v),children:z?(0,s.jsxs)("div",{children:[0<z.results.length&&(0,s.jsx)("div",{id:"search-results-info",className:"sr-only",children:(0,l.__)("Showing %d search results","burst-statistics").replace("%d",z.results.length.toString())}),I(z.results,z)]}):"favorites"===v?I(E):"all"===v?I(Object.entries(A).filter(function(e){return e[0],e[1].type}).map(function(e){var t=e[0],r=e[1];return g({key:t},r)})):v in D?I(D[v]||[]):null})]})};var y=r(17021),v=r(3316),_=r(51285),j=r(53576),w=r.n(j),k=function(e,t,r,s){return new(r||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})},N=function(e,t){var r,s,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}};const A=function(e){var t=e.filterKey,r=e.config,a=e.initialValue,i=void 0===a?"":a,o=e.onChange,c=(0,n.useState)(i),u=c[0],d=c[1],f=(0,n.useRef)(null),p=(0,n.useRef)(null),b=(0,n.useState)([]),m=b[0],h=b[1],g=(0,n.useState)([]),x=g[0],j=g[1],A=(0,n.useState)(""),C=A[0],O=A[1],S=(0,n.useState)(!1),D=S[0],E=S[1],F=(0,_.A)().getFilterOptions;(0,n.useEffect)(function(){d(i)},[i]),(0,n.useEffect)(function(){k(void 0,void 0,void 0,function(){var e,t;return N(this,function(s){switch(s.label){case 0:return r.options?[4,F(r.options,"")]:[2];case 1:return e=s.sent(),t=Array.isArray(e)?e.map(function(e){return{value:e.id||e.title,label:e.title}}):[],h(t),j(t),E(1e3>t.length),[2]}})})},[r.options,F]);var R=(0,n.useMemo)(function(){return w()(function(e){return k(void 0,void 0,void 0,function(){var t,s;return N(this,function(n){switch(n.label){case 0:return r.options?[4,F(r.options,e)]:[2];case 1:return t=n.sent(),s=Array.isArray(t)?t.map(function(e){return{value:e.id||e.title,label:e.title}}):[],h(s),e||j(s),[2]}})})},300)},[r.options,F]);(0,n.useEffect)(function(){if(r.reloadOnSearch&&r.options&&!(3>C.length||D))return R(C),function(){R.cancel()}},[C,r.reloadOnSearch,D,R]),(0,n.useEffect)(function(){var e=setTimeout(function(){var e,t;r.options&&f.current?f.current.focus?f.current.focus():(null===(t=null===(e=f.current.select)||void 0===e?void 0:e.inputRef)||void 0===t?void 0:t.current)&&f.current.select.inputRef.current.focus():!r.options&&p.current&&p.current.focus()},100);return function(){return clearTimeout(e)}},[r.options]);var z=function(){if(r.options)return(0,l.__)("Search or select an option…","burst-statistics");switch(t){case"page_url":return(0,l.__)("Enter page URL (e.g., /about)","burst-statistics");case"referrer":return(0,l.__)("Enter referrer URL (e.g., google.com)","burst-statistics");case"campaign":return(0,l.__)("Enter campaign name","burst-statistics");case"source":return(0,l.__)("Enter traffic source","burst-statistics");case"medium":return(0,l.__)("Enter traffic medium","burst-statistics");case"term":return(0,l.__)("Enter search term","burst-statistics");case"content":return(0,l.__)("Enter content identifier","burst-statistics");case"parameter":return(0,l.__)("Enter URL parameter (e.g., utm_campaign)","burst-statistics");default:return(0,l.__)("Enter filter value…","burst-statistics")}};return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-2 relative",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,l.__)("Filter value","burst-statistics")}),r.options?(0,s.jsx)(y.A,{ref:f,value:u?m.find(function(e){return e.value===u})||{value:u,label:u}:null,onChange:function(e){var t=e?e.value:"";d(t),o(t)},loadOptions:function(e,t){return k(void 0,void 0,void 0,function(){var r,s;return N(this,function(n){return r=String(null!=e?e:"").toLowerCase(),O(r),m.length?0===r.length?(null==t||t(m),j(m),[2]):(s=m.filter(function(e){var t,s,n=String(null!==(t=e.label)&&void 0!==t?t:"").toLowerCase(),a=String(null!==(s=e.value)&&void 0!==s?s:"").toLowerCase();return n.includes(r)||a.includes(r)}),null==t||t(s),j(s),[2]):(null==t||t([]),[2])})})},defaultOptions:x,placeholder:z(),isSearchable:!0,disabled:!1,insideModal:!0,allowCustomValue:0===x.length}):(0,s.jsx)(v.A,{ref:p,value:u,onChange:function(e){var t=e.target.value;d(t),o(t)},placeholder:z(),className:"w-full"})]})})};var C=r(75111);const O=function(e){var t=e.filterKey,r=e.initialValue,a=void 0===r?"":r,i=e.onChange,o=(0,n.useState)(a),c=o[0],u=o[1];(0,n.useEffect)(function(){u(a)},[a]);var d="bounces"===t?{"":{type:"",icon:"user",label:(0,l.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"bounce",label:(0,l.__)("Bounced visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,l.__)("Active visitors","burst-statistics")}}:"new_visitor"===t?{"":{type:"",icon:"user",label:(0,l.__)("All visitors (default)","burst-statistics")},include:{type:"include",icon:"user-plus",label:(0,l.__)("New visitors","burst-statistics")},exclude:{type:"exclude",icon:"user-check",label:(0,l.__)("Returning visitors","burst-statistics")}}:"entry_exit_pages"===t?{"":{type:"",icon:"user",label:(0,l.__)("All pages","burst-statistics")},entry:{type:"entry",icon:"user-plus",label:(0,l.__)("Entry pages","burst-statistics")},exit:{type:"exit",icon:"user-check",label:(0,l.__)("Exit pages","burst-statistics")}}:{"":{type:"",icon:"user",label:(0,l.__)("All visitors (default)","burst-statistics"),description:(0,l.__)("Show all visitors without filtering","burst-statistics")},include:{type:"include",icon:"check",label:(0,l.__)("Include","burst-statistics"),description:(0,l.__)("Include visitors matching this criteria","burst-statistics")},exclude:{type:"exclude",icon:"times",label:(0,l.__)("Exclude","burst-statistics"),description:(0,l.__)("Exclude visitors matching this criteria","burst-statistics")}};return(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,l.__)("Filter option","burst-statistics")}),(0,s.jsx)(C.A,{inputId:"".concat(t,"-boolean"),options:d,value:c,onChange:function(e){u(e),i(e)},columns:1})]})})};var S=r(90160),D=function(){return D=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},D.apply(this,arguments)},E=(0,n.forwardRef)(function(e,t){var r=e.min,a=void 0===r?0:r,i=e.max,o=void 0===i?100:i,c=e.step,u=void 0===c?1:c,d=e.value,f=void 0===d?[a,o]:d,p=e.onChange,b=e.formatValue,m=void 0===b?function(e){return e.toString()}:b,h=e.className,g=void 0===h?"":h,x=e.disabled,y=void 0!==x&&x,v=e.label,_=e.showLabels,j=void 0===_||_,w=e.showCurrentValue,k=void 0===w||w,N=e.allowSingleValue,A=void 0!==N&&N,C=e.rangeSeparator,O=void 0===C?" - ":C,E=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["min","max","step","value","onChange","formatValue","className","disabled","label","showLabels","showCurrentValue","allowSingleValue","rangeSeparator"]),F=(0,n.useState)(f),R=F[0],z=F[1];return(0,n.useEffect)(function(){z(f)},[f]),(0,s.jsxs)("div",D({ref:t,className:"space-y-3 ".concat(g)},E,{children:[v&&(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:v}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(S.bL,{className:"relative flex items-center select-none touch-none w-full h-5",value:A&&R[0]===R[1]?[R[0]]:R,onValueChange:function(e){var t=A&&1===e.length?[e[0],e[0]]:[e[0],e[1]];z(t),null==p||p(t)},min:a,max:o,step:u,disabled:y,children:[(0,s.jsx)(S.CC,{className:"bg-gray-200 relative grow rounded-full h-2",children:(0,s.jsx)(S.Q6,{className:"absolute bg-primary rounded-full h-full"})}),(0,s.jsx)(S.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,l.__)("Minimum value","burst-statistics")}),(!A||R[0]!==R[1])&&(0,s.jsx)(S.zi,{className:"block w-5 h-5 bg-white border-2 border-primary rounded-full shadow-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":(0,l.__)("Maximum value","burst-statistics")})]}),j&&(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:m(a)}),k&&(0,s.jsx)("span",{className:"font-medium text-primary",children:A&&R[0]===R[1]?m(R[0]):"".concat(m(R[0])).concat(O).concat(m(R[1]))}),(0,s.jsx)("span",{children:m(o)})]})]})]}))});E.displayName="RangeSliderInput";const F=E,R=function(e){var t=e.filterKey,r=e.initialValue,a=void 0===r?"":r,i=e.onChange,o=function(e){if(!e||""===e)return[0,100];if("string"==typeof e&&e.includes("-")){var t=e.split("-").map(function(e){return parseFloat(e.trim())});return[t[0]||0,t[1]||100]}return[0,parseFloat(e)||0]},c=(0,n.useState)(o(a)),u=c[0],d=c[1],f=(0,n.useState)(0),p=f[0],b=f[1],m=(0,n.useState)(100),h=m[0],g=m[1];(0,n.useEffect)(function(){d(o(a))},[a]),(0,n.useEffect)(function(){switch(t){case"bounce_rate":case"conversion_rate":default:b(0),g(100);break;case"time_per_session":b(0),g(3600)}},[t]);var x=function(e){d(e);var t=e[0]===e[1]?e[0].toString():"".concat(e[0],"-").concat(e[1]);i(t)};return(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(F,{min:p,max:h,value:u,onChange:x,formatValue:function(e){if(""===e||null==e)return"";var r="string"==typeof e?parseFloat(e):e;switch(t){case"bounce_rate":case"conversion_rate":return"".concat(r,"%");case"time_per_session":var s=Math.floor(r/60),n=r%60;return 0<s?"".concat(s,"m ").concat(n,"s"):"".concat(n,"s");default:return r.toString()}},label:(0,l.__)("Filter range","burst-statistics"),showLabels:!0,showCurrentValue:!0,rangeSeparator:" - "}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:(0,l.__)("Exact range values","burst-statistics")}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.A,{type:"number",value:u[0],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=p&&r<=h){var s=[r||0,u[1]];d(s),x(s)}},placeholder:(0,l.__)("Min value…","burst-statistics"),min:p,max:h,className:"w-full"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,l.__)("Minimum value","burst-statistics")})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)(v.A,{type:"number",value:u[1],onChange:function(e){var t=e.target.value,r=parseFloat(t);if(""===t||!isNaN(r)&&r>=p&&r<=h){var s=[u[0],r||h];d(s),x(s)}},placeholder:(0,l.__)("Max value…","burst-statistics"),min:p,max:h,className:"w-full"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(0,l.__)("Maximum value","burst-statistics")})]}),(0,s.jsx)("button",{type:"button",onClick:function(){d([p,h]),i("")},className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:(0,l.__)("Clear","burst-statistics")})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:(0,l.__)("Clear to remove this filter","burst-statistics")})]})]})})};var z=function(e,t,r){if(r||2===arguments.length)for(var s,n=0,a=t.length;n<a;n++)!s&&n in t||(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))};const I=function(e){var t=e.initialValue,r=void 0===t?"":t,a=e.onChange,i=(0,_.A)().getFilterOptions,o=(0,n.useState)([]),c=o[0],f=o[1];(0,n.useEffect)(function(){var e,t,r,s;e=void 0,t=void 0,s=function(){var e;return function(e,t){var r,s,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(t){switch(t.label){case 0:return[4,i("devices")];case 1:return e=t.sent()||[],f(e),[2]}})},new((r=void 0)||(r=Promise))(function(n,a){function i(e){try{l(s.next(e))}catch(e){a(e)}}function o(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})},[]);var p,b=(0,n.useState)((p=r)&&""!==p.trim()?p.split(",").map(function(e){return e.trim().toLowerCase()}).filter(Boolean):[]),m=b[0],h=b[1];(0,n.useEffect)(function(){var e=0<m.length?m.join(","):"";a(e)},[m,a]);var g=function(e){h(function(t){return t.includes(e)?t.filter(function(t){return t!==e}):z(z([],t,!0),[e],!1)})},x=function(e){return m.includes(e)},y=function(e){var t="".concat(e.title," device filter"),r=x(e.id)?(0,l.__)("selected","burst-statistics"):(0,l.__)("not selected","burst-statistics");return"".concat(t,", ").concat(r)};return c&&0!==c.length?(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 justify-items-center",role:"group","aria-label":(0,l.__)("Device selection options","burst-statistics"),children:c.map(function(e){var t=x(e.id);return(0,s.jsxs)("button",{onClick:function(){return g(e.id)},onKeyDown:function(t){return function(e,t){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),g(t))}(t,e.id)},className:(0,u.A)("relative rounded-lg border-2 p-4 transition-all duration-200 bg-white w-full group","focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","hover:shadow-md",{"border-primary bg-primary-light":t,"border-gray-300 hover:border-gray-400":!t}),"aria-label":y(e),"aria-pressed":t,type:"button",children:[t&&(0,s.jsx)("div",{className:"absolute top-2 right-2 z-10","aria-hidden":"true",children:(0,s.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,s.jsx)("div",{className:(0,u.A)("flex h-12 w-12 items-center justify-center rounded-lg transition-colors",{"bg-primary-light":t,"bg-gray-100 group-hover:bg-gray-200":!t}),"aria-hidden":"true",children:(0,s.jsx)(d.A,{name:e.key,color:"gray",size:24,"aria-hidden":"true"})}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h3",{className:(0,u.A)("text-sm font-medium transition-colors",{"text-gray-900":t,"text-gray-700":!t}),children:e.title})})]}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2 z-10","aria-hidden":"true",children:(0,s.jsx)("div",{className:(0,u.A)("h-4 w-4 rounded border-2 transition-all duration-200 flex items-center justify-center",{"bg-primary border-primary":t,"bg-white border-gray-300 group-hover:border-gray-400":!t}),children:t&&(0,s.jsx)(d.A,{name:"check",size:12,color:"white","aria-hidden":"true"})})})]},e.id)})})}):null};var L=function(){return L=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},L.apply(this,arguments)};const P=function(e){var t=e.filterKey,r=e.config,n=e.tempValue,a=e.onTempValueChange;return(0,s.jsx)("div",{className:"h-full",children:function(){var e={filterKey:t,config:r,initialValue:n,onChange:a};if("device_id"===t)return(0,s.jsx)(I,L({},e));switch(r.type){case"string":default:return(0,s.jsx)(A,L({},e));case"boolean":return(0,s.jsx)(O,L({},e));case"int":return(0,s.jsx)(R,L({},e))}}()})};var M=r(6987);const T=function(e){var t=e.isOpen,r=e.setIsOpen,i=e.initialFilter,o=e.reportBlockIndex,u=(0,p.R7)(o),f=u.setFilters,b=u.deleteFilter,m=u.clearAllFilters,h=u.getActiveFilters,g=(0,n.useState)("selection"),y=g[0],v=g[1],_=(0,n.useState)(null),j=_[0],w=_[1],k=(0,n.useState)(null),N=k[0],A=k[1],C=(0,n.useState)(""),O=C[0],S=C[1];a().useEffect(function(){t&&(i?(v("setup"),w(i.key),A(i.config),S(i.value)):(v("selection"),w(null),A(null),S("")))},[t,i]);var D=function(){v("selection"),w(null),A(null),S("")};return(0,s.jsx)(c.A,{isOpen:t,onClose:function(){return r(!1)},title:"selection"===y?(0,l.__)("Select a filter","burst-statistics"):(0,l.__)("Setup Filter","burst-statistics"),subtitle:"selection"===y?"selection"===y?(0,l.__)("Choose a filter to apply to your analytics data","burst-statistics"):(0,l.__)("Setup filter","burst-statistics"):void 0,customHeader:"setup"===y&&"setup"===y&&N?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center space-x-3 mb-4",children:(0,s.jsxs)("button",{onClick:D,className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded transition-all duration-200","aria-label":(0,l.__)("Back to filters","burst-statistics"),type:"button",children:[(0,s.jsx)(d.A,{name:"chevron-left",size:16,"aria-hidden":"true"}),(0,s.jsx)("span",{children:(0,l.__)("Back to filters","burst-statistics")})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary-light",children:(0,s.jsx)(d.A,{name:N.icon,color:"gray",size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:N.label}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"setup"===y&&N?"string"===N.type?N.options?(0,l.__)("Start typing to search or select from available options","burst-statistics"):(0,l.__)("Enter the value you want to filter by","burst-statistics"):"int"===N.type?(0,l.__)("Set the range for this filter","burst-statistics"):"boolean"===N.type?(0,l.__)("Select the option you want to filter by","burst-statistics"):"":""})]})]})]}):null,content:"selection"===y?(0,s.jsx)(x,{onSelectFilter:function(e,t){w(e),A(t),v("setup");var r=h();S(r[e]||"")},reportBlockIndex:o}):j&&N?(0,s.jsx)(P,{filterKey:j,config:N,onBack:D,tempValue:O,onTempValueChange:function(e){S(e)}}):null,footer:"selection"===y?(0,s.jsx)(M.A,{onClick:function(){m(),r(!1)},btnVariant:"tertiary",size:"sm",className:"w-full",ariaLabel:(0,l.__)("Reset all active filters to default settings","burst-statistics"),children:(0,l.__)("Reset all filters","burst-statistics")}):"setup"===y?(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(M.A,{onClick:function(){var e,t;j&&(e=j,""===(t=O)||null==t?b(e):f(e,t),r(!1))},btnVariant:"primary",size:"sm",className:"flex-1",ariaLabel:N?(0,l.__)("Apply %s filter","burst-statistics").replace("%s",N.label):(0,l.__)("Apply filter","burst-statistics"),children:(0,l.__)("Apply Filter","burst-statistics")}),(0,s.jsx)(M.A,{onClick:function(){var e,t;j&&(e=j,""===(t=O)||null==t?b(e):f(e,t),D())},btnVariant:"secondary",size:"sm",className:"flex-1",ariaLabel:N?(0,l.__)("Apply %s filter and continue adding more filters","burst-statistics").replace("%s",N.label):(0,l.__)("Apply filter and add more","burst-statistics"),children:(0,l.__)("Apply & Add More","burst-statistics")})]}):null,triggerClassName:""})};var V=r(63557),B=function(e){var t,r,a,l=null!==(t=e.smallLabels)&&void 0!==t&&t,c=null!==(r=e.reportBlockIndex)&&void 0!==r?r:void 0,u=null!==(a=e.isReport)&&void 0!==a&&a,d=(0,V.A)(function(e){return e.userCanFilter}),f=(0,n.useState)(!1),p=f[0],b=f[1],m=(0,n.useState)(null),h=m[0],g=m[1],x=(0,i.A)(c),y=x.activeFilters,v=x.removeFilter;return(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)(o.B,{isReport:u,filters:y,onRemove:v,onClick:function(e){g({key:e.key,config:e.config,value:e.value}),b(!0)},smallLabels:l,className:"flex flex-wrap gap-2"}),d&&!u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.wk,{smallLabels:l,onClick:function(){g(null),b(!0)}}),(0,s.jsx)(T,{isOpen:p,setIsOpen:function(){b(!1),g(null)},initialFilter:h,reportBlockIndex:c})]})]})}},75111(e,t,r){r.d(t,{A:()=>d});var s=r(10790),n=r(51609),a=r(2573),i=r(92745),o=r(27723),l=r(717),c=r(88511),u=(0,n.forwardRef)(function(e,t){var r=e.inputId,n=e.options,u=e.value,d=e.columns,f=void 0===d?2:d,p=e.disabled,b=void 0!==p&&p,m=e.goalId,h=e.onChange,g=e.className,x=void 0===g?"":g,y=(0,c.A)().isTrial,v=m?"".concat(m,"-").concat(r):r;return(0,s.jsx)("div",{className:(0,a.A)("burst-radio-buttons__list grid gap-4",function(e){switch(e){case 1:return"grid-cols-1";case 2:default:return"grid-cols-2";case 3:return"grid-cols-3";case 4:return"grid-cols-4"}}(f),x),ref:t,children:Object.keys(n).map(function(e){var t=n[e],r="".concat(v,"-").concat(t.type),c=t.type===u;return(0,s.jsxs)("div",{className:"w-full bg-gray-200 rounded-lg",children:[(0,s.jsx)("input",{type:"radio",checked:c,name:v,id:r,value:t.type,disabled:b||t.disabled,onChange:function(e){h(e.target.value)},className:"sr-only opacity-0 absolute"}),(0,s.jsxs)("label",{htmlFor:r,className:(0,a.A)("flex gap-2.5 m-[1px] items-start p-3 rounded-lg border-2 transition-all duration-200 cursor-pointer","focus-within:ring-2 focus-within:ring-primary focus-within:ring-offset-2 items-center",{"border-primary bg-primary-light":c,"border-gray-300 hover:border-gray-400 bg-white hover:bg-gray-50":!c,"opacity-50 cursor-not-allowed":b||t.disabled}),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:(0,a.A)("w-4 h-4 rounded-full border-2 transition-all duration-200 flex items-center justify-center",{"border-primary bg-primary":c,"border-gray-300 bg-white":!c}),children:c&&(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-white"})})}),(0,s.jsxs)("div",{className:"flex items-center flex-row min-w-0 gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[t.icon&&(0,s.jsx)(i.A,{name:t.icon,size:18,className:"flex-shrink-0"}),(0,s.jsx)("h5",{className:(0,a.A)("text-base font-medium transition-colors text-gray-900"),children:t.label}),t.pro&&(0,s.jsxs)(s.Fragment,{children:["Pro",(0,s.jsx)(l.A,{label:(0,o.__)("Pro","burst-statistics"),id:"reporting",type:y?"icon":"badge"})]})]}),t.description&&1<t.description.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-px bg-gray-400 mx-3 h-5"}),(0,s.jsx)("p",{className:(0,a.A)("text-sm transition-colors truncate",{"text-gray-600":c,"text-gray-500":!c}),children:t.description})]})]})]})]},r)})})});u.displayName="RadioButtonsInput";const d=u},3316(e,t,r){r.d(t,{A:()=>o});var s=r(10790),n=r(51609),a=function(){return a=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)},i=(0,n.forwardRef)(function(e,t){var r=e.type,n=void 0===r?"text":r,i=e.className,o=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}(e,["type","className"]);return(0,s.jsx)("input",a({ref:t,type:n,className:"w-full rounded-md border border-gray-400 p-2 focus:border-primary-dark focus:outline-none focus:ring disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 ".concat(i||"")},o))});i.displayName="TextInput";const o=i},44488(e,t,r){r.d(t,{A:()=>g});var s=r(10790),n=r(51609),a=r(33597),i=r(89717),o=r(48145),l=r(20467),c=r(92745),u=r(21201),d=r(86870),f=r(65162),p=r(63557),b="yyyy-MM-dd",m=new Date(2022,0,1),h=function(e){var t=e.range,r=e.display,n=e.isOpen,a=e.setIsOpen,i=e.disabled;return(0,s.jsxs)(f.l9,{className:"burst-date-button flex min-w-[200px] items-center gap-2 rounded-md border px-3 py-2 shadow-sm transition-all duration-200 ".concat(i?"cursor-not-allowed border-gray-200 bg-gray-100 text-gray-800 opacity-60":"border-gray-300 bg-white hover:bg-gray-50 hover:[box-shadow:0_0_0_3px_rgba(0,0,0,0.05)]"),onClick:function(){return!i&&a(!n)},disabled:i,children:[(0,s.jsx)(c.A,{name:"calendar",size:"18"}),(0,s.jsx)("span",{className:"w-full text-base",children:"custom"===t?"".concat(r.startDate," - ").concat(r.endDate):d.cA[t].label}),(0,s.jsx)(c.A,{name:"chevron-down"})]})};const g=function(){var e=(0,p.A)(function(e){return e.userCanFilterDateRange}),t=(0,n.useState)(!1),r=t[0],c=t[1],g=(0,u.F)(),x=g.startDate,y=g.endDate,v=g.setDateRange,_=g.range,j=(0,n.useState)({startDate:(0,l.A)(x),endDate:(0,l.A)(y),key:"selection"}),w=j[0],k=j[1],N=(0,n.useRef)(0),A=burst_settings.date_ranges,C=(0,n.useMemo)(function(){return(0,d.cf)(A)},[A]),O=(0,n.useMemo)(function(){return(0,d.YP)(x,y)},[x,y]),S=(0,n.useCallback)(function(t){if(e)try{N.current++;var r=t.selection,s=r.startDate,n=r.endDate,a=(0,i.default)(s,b),u=(0,i.default)(n,b);k({startDate:(0,l.A)(a),endDate:(0,l.A)(u),key:"selection"});var f=Object.keys(d.cA).find(function(e){var r=d.cA[e].range();return(0,o.default)(t.selection.startDate,r.startDate)&&(0,o.default)(t.selection.endDate,r.endDate)})||"custom";(2===N.current||"custom"!==f||a!==u)&&(N.current=0,v(f,a,u),c(!1))}catch(e){console.error("Error updating date range:",e)}},[v,e]);return(0,s.jsx)("div",{className:"ml-auto w-auto",children:(0,s.jsxs)(f.bL,{open:r&&e,onOpenChange:function(t){return e&&c(t)},children:[(0,s.jsx)(h,{range:_,display:O,isOpen:r,setIsOpen:c,disabled:!e}),(0,s.jsx)("div",{className:"burst-date-range-popover-container relative z-[2]",children:(0,s.jsx)(f.ZL,{container:document.querySelector(".burst-date-range-popover-container"),children:(0,s.jsxs)(f.UC,{align:"end",sideOffset:10,arrowPadding:10,id:"burst-statistics",children:[(0,s.jsx)("span",{className:"absolute right-4 mt-1 h-4 w-4 -translate-y-2 rotate-45 transform bg-green-light"}),(0,s.jsx)("div",{className:"z-50 rounded-lg border border-gray-200 bg-white shadow-md",children:(0,s.jsx)(a.Ur,{ranges:[w],rangeColors:["#2b8133"],dateDisplayFormat:"dd MMMM yyyy",monthDisplayFormat:"MMMM",onChange:S,inputRanges:[],showSelectionPreview:!0,months:2,direction:"horizontal",minDate:m,maxDate:(0,d.ii)(),staticRanges:C})})]})})})]})})}},21201(e,t,r){r.d(t,{A:()=>_,F:()=>v});var s=r(36095),n=r(11672),a=r(77363),i=r(51609),o=r(89717),l=r(30618),c=r(20467),u=r(61819),d=r(86870),f=r(61885),p="yyyy-MM-dd",b=["today","yesterday","last-7-days","last-30-days","last-90-days","last-month","week-to-date","month-to-date","year-to-date","last-year","custom"],m=["/statistics","/sources","/sales"],h=function(e){if(!e)return!1;var t=(0,c.A)(e);return(0,l.default)(t)&&/^\d{4}-\d{2}-\d{2}$/.test(e)},g=function(e){return!!e&&b.includes(e)},x=function(e){var t=e.range,r=e.startDate,s=e.endDate;return g(t)?"custom"!==t||h(r)&&h(s):!(!h(r)||!h(s))},y=function(e,t){var r={};return Object.keys(e).forEach(function(t){t!==f.Nb&&"startDate"!==t&&"endDate"!==t&&"range"!==t&&void 0!==e[t]&&(r[t]=e[t])}),t.range&&(r.range=t.range),t.startDate&&(r.startDate=t.startDate),t.endDate&&(r.endDate=t.endDate),r[f.Nb]="",r},v=function(){var e,t=(0,s.Z)(),r=(0,a.z)(),l=(0,i.useRef)(!1),c=(e=r.pathname,m.some(function(t){return e.startsWith(t)})),f=(0,u.S)(function(e){return e.startDate}),b=(0,u.S)(function(e){return e.endDate}),v=(0,u.S)(function(e){return e.range}),_=(0,u.S)(function(e){return e.setStartDate}),j=(0,u.S)(function(e){return e.setEndDate}),w=(0,u.S)(function(e){return e.setRange}),k=(0,n.S)({strict:!1}),N=(0,i.useMemo)(function(){if(c&&x(k)){var e=k.range,t=k.startDate,r=k.endDate;if(g(e)&&"custom"!==e){var s=function(e){if("custom"===e||!function(e){return e in d.cA}(e))return null;var t=d.cA[e].range(),r=t.startDate,s=t.endDate;return{startDate:(0,o.default)(r,p),endDate:(0,o.default)(s,p)}}(e);if(s)return{range:e,startDate:s.startDate,endDate:s.endDate}}if(h(t)&&h(r))return{range:e||"custom",startDate:t,endDate:r}}return{range:v,startDate:f,endDate:b}},[k,c,f,b,v]);(0,i.useEffect)(function(){if(c&&!l.current)if(l.current=!0,x(k)){var e=k.range,r=k.startDate,s=k.endDate;g(e)&&"custom"!==e?w(e):h(r)&&h(s)&&(_(r),j(s),w("custom"))}else if(v){var n={range:v};"custom"===v&&(n.startDate=f,n.endDate=b);var a=y(k,n);t({search:a,replace:!0})}},[c]),(0,i.useEffect)(function(){if(c&&l.current&&x(k)){var e=k.range,t=k.startDate,r=k.endDate;g(e)&&"custom"!==e?v!==e&&w(e):h(t)&&h(r)&&(f!==t&&_(t),b!==r&&j(r),"custom"!==v&&w("custom"))}},[k,c,f,b,v,_,j,w]);var A=(0,i.useCallback)(function(e,r,s){if("custom"===e&&r&&s?(_(r),j(s),w("custom")):w(e),c){var n={range:e};"custom"===e&&r&&s&&(n.startDate=r,n.endDate=s),t({search:function(e){return y(e,n)},replace:!1})}},[t,c,_,j,w]),C=(0,i.useCallback)(function(e){"custom"===e?(w("custom"),c&&t({search:function(e){return y(e,{range:"custom",startDate:f,endDate:b})},replace:!1})):A(e)},[A,w,c,t,f,b]),O=(0,i.useCallback)(function(e){A("custom",e,N.endDate)},[A,N.endDate]),S=(0,i.useCallback)(function(e){A("custom",N.startDate,e)},[A,N.startDate]);return{startDate:N.startDate,endDate:N.endDate,range:N.range,isDateRangeRoute:c,setDateRange:A,setRange:C,setStartDate:O,setEndDate:S}};const _=v},80762(e,t,r){r.d(t,{l:()=>s});var s=function(e){return t=void 0,r=void 0,n=function(){var t,r;return function(e,t){var r,s,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,s=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),navigator.clipboard&&navigator.clipboard.writeText?[4,navigator.clipboard.writeText(e)]:[3,2];case 1:return s.sent(),[2];case 2:return[3,4];case 3:return t=s.sent(),console.warn("Clipboard API failed, trying fallback",t),[3,4];case 4:return(r=document.createElement("textarea")).value=e,r.style.position="fixed",r.style.left="-999999px",document.body.appendChild(r),r.select(),r.focus(),document.execCommand("copy"),document.body.removeChild(r),[2]}})},new((s=void 0)||(s=Promise))(function(e,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s(function(e){e(r)})).then(i,o)}l((n=n.apply(t,r||[])).next())});var t,r,s,n}},73437(e,t,r){r.r(t),r.d(t,{component:()=>d});var s=r(10790),n=r(30733),a=r(35257),i=r(91094),o=r(72927),l=r(24590),c=r(13521),u=r(88511);function d(){var e=(0,u.A)().isPro?["parameters"]:["referrers"];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.z,{}),(0,s.jsx)(c.A,{children:(0,s.jsx)(a.A,{})}),(0,s.jsx)(c.A,{children:(0,s.jsx)(i.A,{})}),(0,s.jsx)(c.A,{children:(0,s.jsx)(o.A,{})}),(0,s.jsx)(c.A,{children:(0,s.jsx)(l.A,{allowedConfigs:["pages"],id:"1"})}),(0,s.jsx)(c.A,{children:(0,s.jsx)(l.A,{allowedConfigs:e,id:"2"})})]})}}}]);